{"version":3,"file":"100-bundle.js?01bf446ff78254954479","mappings":"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","sources":["webpack://recipe-me-webpack5/./src/helpers/imageOptimizer.js","webpack://recipe-me-webpack5/./src/helpers/imageGallery.js"],"sourcesContent":["/**\r\n * Optimize image before uploading to Cloudinary\r\n * @param {File} file - Original image file\r\n * @param {Object} options - Resize options\r\n * @returns {Promise<Blob>} - Optimized image blob\r\n */\r\nexport async function optimizeImage(file, options = {}) {\r\n  const {\r\n    maxWidth = 1600,\r\n    maxHeight = 1600,\r\n    quality = 0.85,\r\n    format = 'image/jpeg'\r\n  } = options;\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    \r\n    reader.onload = (e) => {\r\n      const img = new Image();\r\n      \r\n      img.onload = () => {\r\n        // Calculate new dimensions (maintain aspect ratio)\r\n        let width = img.width;\r\n        let height = img.height;\r\n        \r\n        if (width > maxWidth || height > maxHeight) {\r\n          const ratio = Math.min(maxWidth / width, maxHeight / height);\r\n          width = Math.round(width * ratio);\r\n          height = Math.round(height * ratio);\r\n        }\r\n        \r\n        // Create canvas\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        \r\n        // Draw resized image\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.imageSmoothingEnabled = true;\r\n        ctx.imageSmoothingQuality = 'high';\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        \r\n        // Convert to blob\r\n        canvas.toBlob(\r\n          (blob) => {\r\n            if (blob) {\r\n              console.log(`âœ… Optimized: ${(file.size / 1024).toFixed(0)}KB â†’ ${(blob.size / 1024).toFixed(0)}KB`);\r\n              resolve(blob);\r\n            } else {\r\n              reject(new Error('Failed to optimize image'));\r\n            }\r\n          },\r\n          format,\r\n          quality\r\n        );\r\n      };\r\n      \r\n      img.onerror = () => reject(new Error('Failed to load image'));\r\n      img.src = e.target.result;\r\n    };\r\n    \r\n    reader.onerror = () => reject(new Error('Failed to read file'));\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n\r\n/**\r\n * Get recommended optimization settings for different image types\r\n */\r\nexport const IMAGE_PRESETS = {\r\n  avatar: {\r\n    maxWidth: 400,\r\n    maxHeight: 400,\r\n    quality: 0.90,\r\n    format: 'image/jpeg'\r\n  },\r\n  recipeHero: {\r\n    maxWidth: 1600,\r\n    maxHeight: 1600,\r\n    quality: 0.85,\r\n    format: 'image/jpeg'\r\n  },\r\n  recipeThumbnail: {\r\n    maxWidth: 800,\r\n    maxHeight: 800,\r\n    quality: 0.80,\r\n    format: 'image/jpeg'\r\n  }\r\n};","// src/helpers/imageGallery.js\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { loadRecipes, saveRecipes } from '../functions.js';\r\nimport { optimizeImage, IMAGE_PRESETS } from './imageOptimizer.js';\r\n\r\nconst CLOUDINARY_CLOUD_NAME = 'day1f5nz8';\r\nconst CLOUDINARY_UPLOAD_PRESET = 'recipe_images';\r\n\r\n/**\r\n * Setup image gallery with upload, ordering, and feature selection\r\n * @param {string} recipeId - Current recipe ID\r\n */\r\nexport function setupImageGallery(recipeId) {\r\n  const uploadInput = document.getElementById('cloudinary-upload');\r\n  \r\n  if (!uploadInput) {\r\n    console.warn('Image upload input not found');\r\n    return;\r\n  }\r\n\r\n  // Handle Cloudinary upload\r\nuploadInput.addEventListener('change', async (e) => {\r\n  const file = e.target.files[0];\r\n  if (!file) return;\r\n\r\n  // âŒ Block video file uploads\r\n  if (file.type.startsWith('video/')) {\r\n    showUploadStatus('âŒ Video files not supported. Please upload to YouTube and paste the link instead.', 'error');\r\n    uploadInput.value = '';\r\n    return;\r\n  }\r\n\r\n  // Validate image type\r\n  if (!file.type.startsWith('image/')) {\r\n    showUploadStatus('Please select an image file', 'error');\r\n    uploadInput.value = '';\r\n    return;\r\n  }\r\n\r\n\r\n  // Validate original file size (allow up to 20MB originals)\r\n  if (file.size > 20 * 1024 * 1024) {\r\n    showUploadStatus('Image must be smaller than 20MB', 'error');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    showUploadStatus(`Optimizing ${(file.size / 1024 / 1024).toFixed(1)}MB image...`, 'uploading');\r\n    \r\n    // âœ… OPTIMIZE BEFORE UPLOAD\r\n    const optimizedBlob = await optimizeImage(file, IMAGE_PRESETS.recipeHero);\r\n    \r\n    // Show savings\r\n    const originalSize = (file.size / 1024).toFixed(0);\r\n    const optimizedSize = (optimizedBlob.size / 1024).toFixed(0);\r\n    const savings = Math.round((1 - optimizedBlob.size / file.size) * 100);\r\n    \r\n    console.log(`ðŸ“‰ Size reduction: ${originalSize}KB â†’ ${optimizedSize}KB (${savings}% smaller)`);\r\n    \r\n    showUploadStatus('Uploading optimized image...', 'uploading');\r\n    \r\n    // Upload the optimized version (not the original!)\r\n    const { url, publicId } = await uploadToCloudinary(optimizedBlob, file.name);\r\n    \r\n    // Add to recipe images\r\n    await addImageToRecipe(recipeId, {\r\n      url,\r\n      source: 'user-upload',\r\n      cloudinaryPublicId: publicId,\r\n      attribution: null,\r\n      metadata: {\r\n        uploadedAt: new Date().toISOString(),\r\n        originalFilename: file.name,\r\n        originalSize: file.size,\r\n        optimizedSize: optimizedBlob.size\r\n      }\r\n    });\r\n    \r\n    await renderImageGallery(recipeId);\r\n    showUploadStatus(`âœ“ Image added! (Saved ${savings}% bandwidth)`, 'success');\r\n    uploadInput.value = '';\r\n    \r\n  } catch (error) {\r\n    console.error('Upload failed:', error);\r\n    showUploadStatus(`âœ— Upload failed: ${error.message}`, 'error');\r\n  }\r\n});\r\n\r\n  // Initial render\r\n  renderImageGallery(recipeId);\r\n}\r\n\r\n/**\r\n * Add image from Unsplash (called from featureImage.js)\r\n * ALWAYS includes attribution (Unsplash requirement)\r\n * @param {string} recipeId \r\n * @param {Object} imageData \r\n */\r\nexport async function addUnsplashImage(recipeId, imageData) {\r\n  await addImageToRecipe(recipeId, {\r\n    url: imageData.url,\r\n    source: 'unsplash',\r\n    cloudinaryPublicId: null,\r\n    attribution: {\r\n      photographer: imageData.photographer,\r\n      photographerUrl: imageData.photographerLink, // Includes UTM params\r\n      requiresAttribution: true,\r\n      canEdit: false // Cannot edit/remove Unsplash attribution\r\n    }\r\n  });\r\n  \r\n  await renderImageGallery(recipeId);\r\n}\r\n\r\n/**\r\n * Upload to Cloudinary - returns URL and publicId\r\n */\r\n// Upload to Cloudinary to accept Blob\r\nasync function uploadToCloudinary(fileOrBlob, filename = 'image.jpg') {\r\n  const formData = new FormData();\r\n  \r\n  // Convert blob to file with proper name\r\n  if (fileOrBlob instanceof Blob && !(fileOrBlob instanceof File)) {\r\n    const file = new File([fileOrBlob], filename, { type: fileOrBlob.type });\r\n    formData.append('file', file);\r\n  } else {\r\n    formData.append('file', fileOrBlob);\r\n  }\r\n  \r\n  formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);\r\n  formData.append('folder', 'recipes');\r\n\r\n  const response = await fetch(\r\n    `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`,\r\n    {\r\n      method: 'POST',\r\n      body: formData\r\n    }\r\n  );\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json();\r\n    throw new Error(error.error?.message || 'Upload failed');\r\n  }\r\n\r\n  const data = await response.json();\r\n  \r\n  return {\r\n    url: data.secure_url.replace('/upload/', '/upload/q_auto,f_auto/'),\r\n    publicId: data.public_id\r\n  };\r\n}\r\n/**\r\n * Add image to recipe\r\n */\r\nasync function addImageToRecipe(recipeId, imageData) {\r\n  const recipes = await loadRecipes();\r\n  const recipe = recipes.find(r => r.id === recipeId);\r\n  if (!recipe) return;\r\n\r\n  // Initialize images array if needed\r\n  if (!recipe.images) {\r\n    recipe.images = [];\r\n  }\r\n\r\n  // Create new image object\r\n  const newImage = {\r\n    id: uuidv4(),\r\n    url: imageData.url,\r\n    source: imageData.source,\r\n    isFeatured: recipe.images.length === 0, // First image is featured\r\n    order: recipe.images.length,\r\n    cloudinaryPublicId: imageData.cloudinaryPublicId || null,\r\n    attribution: imageData.attribution || null,\r\n    metadata: imageData.metadata || null\r\n  };\r\n\r\n  recipe.images.push(newImage);\r\n  recipe.updatedAt = new Date().toISOString();\r\n  \r\n  saveRecipes(recipes);\r\n  localStorage.setItem('editingRecipe', JSON.stringify(recipe));\r\n}\r\n\r\n/**\r\n * Render the image gallery\r\n */\r\nexport async function renderImageGallery(recipeId) {\r\n  const recipes = await loadRecipes();\r\n  const recipe = recipes.find(r => r.id === recipeId);\r\n  const gallery = document.getElementById('image-gallery');\r\n  const noImagesMsg = gallery?.querySelector('.no-images');\r\n  \r\n  if (!recipe || !gallery) return;\r\n\r\n  // Show/hide no images message\r\n  if (!recipe.images || recipe.images.length === 0) {\r\n    if (noImagesMsg) noImagesMsg.style.display = 'block';\r\n    gallery.innerHTML = '<p class=\"no-images\">No images yet. Upload or search to add images.</p>';\r\n    return;\r\n  }\r\n\r\n  if (noImagesMsg) noImagesMsg.style.display = 'none';\r\n\r\n  // Sort images by order\r\n  const sortedImages = [...recipe.images].sort((a, b) => a.order - b.order);\r\n\r\n  gallery.innerHTML = `\r\n    ${sortedImages.map(img => `\r\n      <div class=\"image-card\" data-image-id=\"${img.id}\" draggable=\"true\">\r\n        <div class=\"image-preview\">\r\n          <img src=\"${img.url}\" alt=\"Recipe image\">\r\n          ${img.isFeatured ? '<div class=\"featured-badge\"><i class=\"fa-solid fa-star\"></i> Featured</div>' : ''}\r\n          \r\n          ${img.source === 'unsplash' ? `\r\n            <div class=\"source-badge unsplash-badge\" title=\"From Unsplash\">\r\n              <i class=\"fa-solid fa-image\"></i> Unsplash\r\n            </div>\r\n          ` : img.attribution ? `\r\n            <div class=\"source-badge attribution-badge\" title=\"${formatAttributionText(img)}\">\r\n              <i class=\"fa-solid fa-copyright\"></i> Credit\r\n            </div>\r\n          ` : ''}\r\n        </div>\r\n        \r\n        <div class=\"image-actions\">\r\n          <button \r\n            class=\"btn-small ${img.isFeatured ? 'active' : ''}\" \r\n            onclick=\"window.setFeaturedImage('${recipeId}', '${img.id}')\"\r\n            title=\"Set as featured image\"\r\n          >\r\n            <i class=\"fa-solid fa-star\"></i>\r\n          </button>\r\n          \r\n          <button \r\n            class=\"btn-small\" \r\n            onclick=\"window.moveImageUp('${recipeId}', '${img.id}')\"\r\n            title=\"Move up\"\r\n            ${img.order === 0 ? 'disabled' : ''}\r\n          >\r\n            <i class=\"fa-solid fa-arrow-up\"></i>\r\n          </button>\r\n          \r\n          <button \r\n            class=\"btn-small\" \r\n            onclick=\"window.moveImageDown('${recipeId}', '${img.id}')\"\r\n            title=\"Move down\"\r\n            ${img.order === sortedImages.length - 1 ? 'disabled' : ''}\r\n          >\r\n            <i class=\"fa-solid fa-arrow-down\"></i>\r\n          </button>\r\n          \r\n          <button \r\n            class=\"btn-small ${img.attribution ? 'has-attribution' : ''}\" \r\n            onclick=\"window.editAttribution('${recipeId}', '${img.id}')\"\r\n            title=\"${img.source === 'unsplash' ? 'Unsplash attribution (required)' : img.attribution ? 'Edit attribution' : 'Add attribution'}\"\r\n            ${img.source === 'unsplash' ? 'disabled' : ''}\r\n          >\r\n            <i class=\"fa-solid fa-${img.source === 'unsplash' ? 'lock' : 'copyright'}\"></i>\r\n          </button>\r\n          \r\n          <button \r\n            class=\"btn-small btn-danger\" \r\n            onclick=\"window.removeImage('${recipeId}', '${img.id}')\"\r\n            title=\"Remove image\"\r\n          >\r\n            <i class=\"fa-solid fa-trash\"></i>\r\n          </button>\r\n        </div>\r\n        \r\n        ${img.source === 'unsplash' || img.attribution ? `\r\n          <div class=\"image-credit ${img.source === 'unsplash' ? 'unsplash-credit' : ''}\">\r\n            ${formatAttribution(img)}\r\n          </div>\r\n        ` : ''}\r\n      </div>\r\n    `).join('')}\r\n  `;\r\n\r\n  // Setup drag-and-drop for reordering\r\n  setupDragAndDrop(recipeId);\r\n}\r\n\r\n/**\r\n * Format attribution for display (Unsplash-compliant)\r\n */\r\nfunction formatAttribution(image) {\r\n  if (!image.attribution) return '';\r\n  \r\n  const attr = image.attribution;\r\n  \r\n  // Unsplash-specific format (required by their guidelines)\r\n  if (image.source === 'unsplash') {\r\n    return `Photo by <a href=\"${attr.photographerUrl}\" target=\"_blank\" rel=\"noopener\">${attr.photographer}</a> on <a href=\"https://unsplash.com/?utm_source=recipe_me&utm_medium=referral\" target=\"_blank\" rel=\"noopener\">Unsplash</a>`;\r\n  }\r\n  \r\n  // User-added attribution\r\n  if (attr.customCredit) {\r\n    return attr.customCredit;\r\n  }\r\n  \r\n  let text = `Photo by ${attr.photographer}`;\r\n  \r\n  if (attr.photographerUrl) {\r\n    text = `<a href=\"${attr.photographerUrl}\" target=\"_blank\" rel=\"noopener\">${text}</a>`;\r\n  }\r\n  \r\n  return text;\r\n}\r\n\r\n/**\r\n * Format attribution as plain text (for title attribute)\r\n */\r\nfunction formatAttributionText(image) {\r\n  if (!image.attribution) return '';\r\n  \r\n  const attr = image.attribution;\r\n  \r\n  if (image.source === 'unsplash') {\r\n    return `Photo by ${attr.photographer} on Unsplash`;\r\n  }\r\n  \r\n  if (attr.customCredit) {\r\n    return attr.customCredit;\r\n  }\r\n  \r\n  return `Photo by ${attr.photographer}`;\r\n}\r\n\r\n/**\r\n * Edit attribution (only for user uploads, not Unsplash)\r\n */\r\nwindow.editAttribution = async function(recipeId, imageId) {\r\n  const recipes = await loadRecipes();\r\n  const recipe = recipes.find(r => r.id === recipeId);\r\n  const image = recipe?.images?.find(img => img.id === imageId);\r\n  \r\n  if (!image) return;\r\n  \r\n  // Block editing Unsplash attribution\r\n  if (image.source === 'unsplash') {\r\n    alert('Unsplash attribution cannot be edited or removed per their terms of use.');\r\n    return;\r\n  }\r\n  \r\n  const attribution = await showAttributionDialog(image.attribution);\r\n  \r\n  if (attribution !== undefined) { // undefined = cancelled\r\n    image.attribution = attribution;\r\n    recipe.updatedAt = new Date().toISOString();\r\n    saveRecipes(recipes);\r\n    localStorage.setItem('editingRecipe', JSON.stringify(recipe));\r\n    await renderImageGallery(recipeId);\r\n  }\r\n};\r\n\r\n/**\r\n * Show attribution dialog\r\n */\r\nfunction showAttributionDialog(currentAttribution) {\r\n  return new Promise((resolve) => {\r\n    const dialog = document.createElement('dialog');\r\n    dialog.className = 'attribution-dialog modal-dialog';\r\n    \r\n    const hasAttribution = currentAttribution && currentAttribution.photographer;\r\n    \r\n    dialog.innerHTML = `\r\n      <form id=\"attribution-form\">\r\n        <h3>${hasAttribution ? 'Edit' : 'Add'} Image Attribution</h3>\r\n        <p class=\"hint\">Optional - add credit if this photo is from a photographer or requires attribution.</p>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"photographer-name\">Photographer/Source Name:</label>\r\n          <input \r\n            type=\"text\" \r\n            id=\"photographer-name\" \r\n            placeholder=\"e.g., Jane Smith Photography\"\r\n            value=\"${currentAttribution?.photographer || ''}\"\r\n          >\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"photographer-url\">Website/URL (optional):</label>\r\n          <input \r\n            type=\"url\" \r\n            id=\"photographer-url\" \r\n            placeholder=\"https://janesmith.com\"\r\n            value=\"${currentAttribution?.photographerUrl || ''}\"\r\n          >\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"custom-credit\">Custom Credit Line (optional):</label>\r\n          <input \r\n            type=\"text\" \r\n            id=\"custom-credit\" \r\n            placeholder=\"e.g., Photography by Jane Smith\"\r\n            value=\"${currentAttribution?.customCredit || ''}\"\r\n          >\r\n          <small>If blank, will auto-generate from photographer name</small>\r\n        </div>\r\n        \r\n        <div class=\"button-group\">\r\n          ${hasAttribution ? `\r\n            <button type=\"button\" id=\"remove-attribution-btn\" class=\"btn-secondary\">\r\n              Remove Attribution\r\n            </button>\r\n          ` : ''}\r\n          <button type=\"button\" id=\"cancel-btn\" class=\"btn-secondary\">\r\n            Cancel\r\n          </button>\r\n          <button type=\"submit\" class=\"btn-primary\">\r\n            Save\r\n          </button>\r\n        </div>\r\n      </form>\r\n    `;\r\n    \r\n    document.body.appendChild(dialog);\r\n    dialog.showModal();\r\n    \r\n    const form = dialog.querySelector('#attribution-form');\r\n    const photographerInput = dialog.querySelector('#photographer-name');\r\n    const urlInput = dialog.querySelector('#photographer-url');\r\n    const creditInput = dialog.querySelector('#custom-credit');\r\n    const cancelBtn = dialog.querySelector('#cancel-btn');\r\n    const removeBtn = dialog.querySelector('#remove-attribution-btn');\r\n    \r\n    photographerInput.focus();\r\n    \r\n    cancelBtn.addEventListener('click', () => {\r\n      dialog.close();\r\n      dialog.remove();\r\n      resolve(undefined); // undefined = cancelled\r\n    });\r\n    \r\n    if (removeBtn) {\r\n      removeBtn.addEventListener('click', () => {\r\n        if (confirm('Remove attribution from this image?')) {\r\n          dialog.close();\r\n          dialog.remove();\r\n          resolve(null); // null = remove attribution\r\n        }\r\n      });\r\n    }\r\n    \r\n    dialog.addEventListener('click', (e) => {\r\n      if (e.target === dialog) {\r\n        dialog.close();\r\n        dialog.remove();\r\n        resolve(undefined);\r\n      }\r\n    });\r\n    \r\n    form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n      \r\n      const photographer = photographerInput.value.trim();\r\n      const url = urlInput.value.trim();\r\n      const customCredit = creditInput.value.trim();\r\n      \r\n      if (!photographer) {\r\n        dialog.close();\r\n        dialog.remove();\r\n        resolve(null); // No photographer = remove attribution\r\n        return;\r\n      }\r\n      \r\n      const attribution = {\r\n        photographer,\r\n        photographerUrl: url || null,\r\n        customCredit: customCredit || null,\r\n        requiresAttribution: true,\r\n        canEdit: true\r\n      };\r\n      \r\n      dialog.close();\r\n      dialog.remove();\r\n      resolve(attribution);\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Set featured image\r\n */\r\nwindow.setFeaturedImage = async function(recipeId, imageId) {\r\n  const recipes = await loadRecipes();\r\n  const recipe = recipes.find(r => r.id === recipeId);\r\n  if (!recipe || !recipe.images) return;\r\n\r\n  recipe.images.forEach(img => img.isFeatured = false);\r\n  const image = recipe.images.find(img => img.id === imageId);\r\n  if (image) image.isFeatured = true;\r\n\r\n  recipe.updatedAt = new Date().toISOString();\r\n  saveRecipes(recipes);\r\n  localStorage.setItem('editingRecipe', JSON.stringify(recipe));\r\n  \r\n  await renderImageGallery(recipeId);\r\n};\r\n\r\n/**\r\n * Move image up\r\n */\r\nwindow.moveImageUp = async function(recipeId, imageId) {\r\n  const recipes = await loadRecipes();\r\n  const recipe = recipes.find(r => r.id === recipeId);\r\n  if (!recipe || !recipe.images) return;\r\n\r\n  const index = recipe.images.findIndex(img => img.id === imageId);\r\n  if (index <= 0) return;\r\n\r\n  const temp = recipe.images[index].order;\r\n  recipe.images[index].order = recipe.images[index - 1].order;\r\n  recipe.images[index - 1].order = temp;\r\n\r\n  recipe.updatedAt = new Date().toISOString();\r\n  saveRecipes(recipes);\r\n  localStorage.setItem('editingRecipe', JSON.stringify(recipe));\r\n  \r\n  await renderImageGallery(recipeId);\r\n};\r\n\r\n/**\r\n * Move image down\r\n */\r\nwindow.moveImageDown = async function(recipeId, imageId) {\r\n  const recipes = await loadRecipes();\r\n  const recipe = recipes.find(r => r.id === recipeId);\r\n  if (!recipe || !recipe.images) return;\r\n\r\n  const index = recipe.images.findIndex(img => img.id === imageId);\r\n  if (index === -1 || index >= recipe.images.length - 1) return;\r\n\r\n  const temp = recipe.images[index].order;\r\n  recipe.images[index].order = recipe.images[index + 1].order;\r\n  recipe.images[index + 1].order = temp;\r\n\r\n  recipe.updatedAt = new Date().toISOString();\r\n  saveRecipes(recipes);\r\n  localStorage.setItem('editingRecipe', JSON.stringify(recipe));\r\n  \r\n  await renderImageGallery(recipeId);\r\n};\r\n\r\n/**\r\n * Remove image\r\n */\r\nwindow.removeImage = async function(recipeId, imageId) {\r\n  if (!confirm('Remove this image? This cannot be undone.')) return;\r\n\r\n  const recipes = await loadRecipes();\r\n  const recipe = recipes.find(r => r.id === recipeId);\r\n  if (!recipe || !recipe.images) return;\r\n\r\n  // Find the image\r\n  const imageToRemove = recipe.images.find(img => img.id === imageId);\r\n  \r\n  // TODO: If Cloudinary image, delete from Cloudinary server\r\n  // if (imageToRemove?.source === 'user-upload' && imageToRemove.cloudinaryPublicId) {\r\n  //   await deleteFromCloudinary(imageToRemove.cloudinaryPublicId);\r\n  // }\r\n\r\n  // Remove from recipe\r\n  recipe.images = recipe.images.filter(img => img.id !== imageId);\r\n  \r\n  // Reorder remaining images\r\n  recipe.images.sort((a, b) => a.order - b.order);\r\n  recipe.images.forEach((img, index) => img.order = index);\r\n\r\n  // If removed image was featured, set first image as featured\r\n  if (recipe.images.length > 0 && !recipe.images.some(img => img.isFeatured)) {\r\n    recipe.images[0].isFeatured = true;\r\n  }\r\n\r\n  recipe.updatedAt = new Date().toISOString();\r\n  saveRecipes(recipes);\r\n  localStorage.setItem('editingRecipe', JSON.stringify(recipe));\r\n  \r\n  await renderImageGallery(recipeId);\r\n};\r\n\r\n/**\r\n * Setup drag-and-drop reordering\r\n */\r\nfunction setupDragAndDrop(recipeId) {\r\n  const imageCards = document.querySelectorAll('.image-card');\r\n  let draggedElement = null;\r\n\r\n  imageCards.forEach(card => {\r\n    card.addEventListener('dragstart', (e) => {\r\n      draggedElement = card;\r\n      card.classList.add('dragging');\r\n    });\r\n\r\n    card.addEventListener('dragend', () => {\r\n      card.classList.remove('dragging');\r\n    });\r\n\r\n    card.addEventListener('dragover', (e) => {\r\n      e.preventDefault();\r\n      const afterElement = getDragAfterElement(card.parentElement, e.clientY);\r\n      if (afterElement == null) {\r\n        card.parentElement.appendChild(draggedElement);\r\n      } else {\r\n        card.parentElement.insertBefore(draggedElement, afterElement);\r\n      }\r\n    });\r\n\r\n    card.addEventListener('drop', async (e) => {\r\n      e.preventDefault();\r\n      await reorderImagesAfterDrag(recipeId);\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Get element to insert dragged item after\r\n */\r\nfunction getDragAfterElement(container, y) {\r\n  const draggableElements = [...container.querySelectorAll('.image-card:not(.dragging)')];\r\n\r\n  return draggableElements.reduce((closest, child) => {\r\n    const box = child.getBoundingClientRect();\r\n    const offset = y - box.top - box.height / 2;\r\n\r\n    if (offset < 0 && offset > closest.offset) {\r\n      return { offset: offset, element: child };\r\n    } else {\r\n      return closest;\r\n    }\r\n  }, { offset: Number.NEGATIVE_INFINITY }).element;\r\n}\r\n\r\n/**\r\n * Save new order after drag-and-drop\r\n */\r\nasync function reorderImagesAfterDrag(recipeId) {\r\n  const recipes = await loadRecipes();\r\n  const recipe = recipes.find(r => r.id === recipeId);\r\n  if (!recipe || !recipe.images) return;\r\n\r\n  const imageCards = document.querySelectorAll('.image-card');\r\n  const newOrder = Array.from(imageCards).map(card => card.dataset.imageId);\r\n\r\n  newOrder.forEach((imageId, index) => {\r\n    const img = recipe.images.find(i => i.id === imageId);\r\n    if (img) img.order = index;\r\n  });\r\n\r\n  recipe.updatedAt = new Date().toISOString();\r\n  saveRecipes(recipes);\r\n  localStorage.setItem('editingRecipe', JSON.stringify(recipe));\r\n}\r\n\r\n/**\r\n * Show upload status\r\n */\r\nfunction showUploadStatus(message, type) {\r\n  const statusDiv = document.getElementById('upload-status');\r\n  if (!statusDiv) return;\r\n\r\n  statusDiv.textContent = message;\r\n  statusDiv.className = `upload-status-${type}`;\r\n\r\n  if (type === 'success' || type === 'error') {\r\n    setTimeout(() => {\r\n      statusDiv.textContent = '';\r\n      statusDiv.className = '';\r\n    }, 3000);\r\n  }\r\n}"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","optimizeImage","_x","_optimizeImage","apply","arguments","_callee","file","options","_options$maxWidth","maxWidth","_options$maxHeight","maxHeight","_options$quality","quality","_options$format","format","_args","_context","undefined","reject","reader","FileReader","onload","img","Image","width","height","ratio","Math","min","round","canvas","document","createElement","ctx","getContext","imageSmoothingEnabled","imageSmoothingQuality","drawImage","toBlob","blob","console","log","concat","size","toFixed","Error","onerror","src","target","result","readAsDataURL","_next","_throw","IMAGE_PRESETS","avatar","recipeHero","recipeThumbnail","_asyncToGenerator","setupImageGallery","recipeId","uploadInput","getElementById","addEventListener","_ref","optimizedBlob","originalSize","optimizedSize","savings","_yield$uploadToCloudi","url","publicId","_t","files","type","startsWith","showUploadStatus","uploadToCloudinary","name","addImageToRecipe","source","cloudinaryPublicId","attribution","metadata","uploadedAt","Date","toISOString","originalFilename","renderImageGallery","error","message","warn","addUnsplashImage","_x2","_x3","_addUnsplashImage","_callee8","imageData","_context8","photographer","photographerUrl","photographerLink","requiresAttribution","canEdit","_x4","_uploadToCloudinary","_callee9","fileOrBlob","filename","formData","response","_error$error","data","_args9","_context9","FormData","Blob","File","append","fetch","method","body","ok","json","secure_url","replace","public_id","_x5","_x6","_addImageToRecipe","_callee0","recipes","recipe","newImage","_context0","loadRecipes","find","id","images","uuidv4","isFeatured","order","push","updatedAt","saveRecipes","localStorage","setItem","JSON","stringify","_x7","_renderImageGallery","_callee1","gallery","noImagesMsg","sortedImages","_context1","querySelector","style","display","innerHTML","_toConsumableArray","sort","b","map","formatAttributionText","formatAttribution","join","setupDragAndDrop","image","attr","customCredit","text","showAttributionDialog","currentAttribution","dialog","className","hasAttribution","appendChild","showModal","form","photographerInput","urlInput","creditInput","cancelBtn","removeBtn","focus","close","remove","confirm","preventDefault","trim","imageCards","querySelectorAll","draggedElement","forEach","card","classList","add","container","afterElement","parentElement","clientY","reduce","closest","child","box","getBoundingClientRect","offset","top","element","Number","NEGATIVE_INFINITY","insertBefore","_ref7","_callee7","_context7","reorderImagesAfterDrag","_x16","_x17","_reorderImagesAfterDrag","_callee10","_context10","Array","from","dataset","imageId","index","statusDiv","textContent","setTimeout","window","editAttribution","_ref2","_callee2","_recipe$images","_context2","alert","_x8","_x9","setFeaturedImage","_ref3","_callee3","_context3","_x0","_x1","moveImageUp","_ref4","_callee4","temp","_context4","findIndex","_x10","_x11","moveImageDown","_ref5","_callee5","_context5","_x12","_x13","removeImage","_ref6","_callee6","_context6","filter","some","_x14","_x15"],"sourceRoot":""}