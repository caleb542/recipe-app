/*! For license information please see profile-bundle.js.LICENSE.txt */
var e={};function t(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),"function"==typeof SuppressedError&&SuppressedError;var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e.g?e.g:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var r=i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.locked=new Map,this.addToLocked=function(t,n){var o=e.locked.get(t);void 0===o?void 0===n?e.locked.set(t,[]):e.locked.set(t,[n]):void 0!==n&&(o.unshift(n),e.locked.set(t,o))},this.isLocked=function(t){return e.locked.has(t)},this.lock=function(t){return new Promise(function(n,o){e.isLocked(t)?e.addToLocked(t,n):(e.addToLocked(t),n())})},this.unlock=function(t){var n=e.locked.get(t);if(void 0!==n&&0!==n.length){var o=n.pop();e.locked.set(t,n),void 0!==o&&setTimeout(o,0)}else e.locked.delete(t)}}return e.getInstance=function(){return void 0===e.instance&&(e.instance=new e),e.instance},e}();t.default=function(){return n.getInstance()}});o(r);var a=o(i(function(e,t){var o=n&&n.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})},i=n&&n.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},a=n;Object.defineProperty(t,"__esModule",{value:!0});var s="browser-tabs-lock-key",c={key:function(e){return o(a,void 0,void 0,function(){return i(this,function(e){throw new Error("Unsupported")})})},getItem:function(e){return o(a,void 0,void 0,function(){return i(this,function(e){throw new Error("Unsupported")})})},clear:function(){return o(a,void 0,void 0,function(){return i(this,function(e){return[2,window.localStorage.clear()]})})},removeItem:function(e){return o(a,void 0,void 0,function(){return i(this,function(e){throw new Error("Unsupported")})})},setItem:function(e,t){return o(a,void 0,void 0,function(){return i(this,function(e){throw new Error("Unsupported")})})},keySync:function(e){return window.localStorage.key(e)},getItemSync:function(e){return window.localStorage.getItem(e)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(e){return window.localStorage.removeItem(e)},setItemSync:function(e,t){return window.localStorage.setItem(e,t)}};function u(e){return new Promise(function(t){return setTimeout(t,e)})}function l(e){for(var t="",n=0;n<e;n++)t+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz"[Math.floor(61*Math.random())];return t}var d=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+l(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,void 0===e.waiters&&(e.waiters=[])}return e.prototype.acquireLock=function(t,n){return void 0===n&&(n=5e3),o(this,void 0,void 0,function(){var o,r,a,d,h,p,f;return i(this,function(i){switch(i.label){case 0:o=Date.now()+l(4),r=Date.now()+n,a=s+"-"+t,d=void 0===this.storageHandler?c:this.storageHandler,i.label=1;case 1:return Date.now()<r?[4,u(30)]:[3,8];case 2:return i.sent(),null!==d.getItemSync(a)?[3,5]:(h=this.id+"-"+t+"-"+o,[4,u(Math.floor(25*Math.random()))]);case 3:return i.sent(),d.setItemSync(a,JSON.stringify({id:this.id,iat:o,timeoutKey:h,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,u(30)];case 4:return i.sent(),null!==(p=d.getItemSync(a))&&(f=JSON.parse(p)).id===this.id&&f.iat===o?(this.acquiredIatSet.add(o),this.refreshLockWhileAcquired(a,o),[2,!0]):[3,7];case 5:return e.lockCorrector(void 0===this.storageHandler?c:this.storageHandler),[4,this.waitForSomethingToChange(r)];case 6:i.sent(),i.label=7;case 7:return o=Date.now()+l(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(e,t){return o(this,void 0,void 0,function(){var n=this;return i(this,function(a){return setTimeout(function(){return o(n,void 0,void 0,function(){var n,o,a;return i(this,function(i){switch(i.label){case 0:return[4,r.default().lock(t)];case 1:return i.sent(),this.acquiredIatSet.has(t)?(n=void 0===this.storageHandler?c:this.storageHandler,null===(o=n.getItemSync(e))?(r.default().unlock(t),[2]):((a=JSON.parse(o)).timeRefreshed=Date.now(),n.setItemSync(e,JSON.stringify(a)),r.default().unlock(t),this.refreshLockWhileAcquired(e,t),[2])):(r.default().unlock(t),[2])}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){var o=!1,i=Date.now(),r=!1;function a(){if(r||(window.removeEventListener("storage",a),e.removeFromWaiting(a),clearTimeout(s),r=!0),!o){o=!0;var t=50-(Date.now()-i);t>0?setTimeout(n,t):n(null)}}window.addEventListener("storage",a),e.addToWaiting(a);var s=setTimeout(a,Math.max(0,t-Date.now()))})];case 1:return n.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),void 0!==e.waiters&&e.waiters.push(t)},e.removeFromWaiting=function(t){void 0!==e.waiters&&(e.waiters=e.waiters.filter(function(e){return e!==t}))},e.notifyWaiters=function(){void 0!==e.waiters&&e.waiters.slice().forEach(function(e){return e()})},e.prototype.releaseLock=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.releaseLock__private__(e)];case 1:return[2,t.sent()]}})})},e.prototype.releaseLock__private__=function(t){return o(this,void 0,void 0,function(){var n,o,a,u;return i(this,function(i){switch(i.label){case 0:return n=void 0===this.storageHandler?c:this.storageHandler,o=s+"-"+t,null===(a=n.getItemSync(o))?[2]:(u=JSON.parse(a)).id!==this.id?[3,2]:[4,r.default().lock(u.iat)];case 1:i.sent(),this.acquiredIatSet.delete(u.iat),n.removeItemSync(o),r.default().unlock(u.iat),e.notifyWaiters(),i.label=2;case 2:return[2]}})})},e.lockCorrector=function(t){for(var n=Date.now()-5e3,o=t,i=[],r=0;;){var a=o.keySync(r);if(null===a)break;i.push(a),r++}for(var c=!1,u=0;u<i.length;u++){var l=i[u];if(l.includes(s)){var d=o.getItemSync(l);if(null!==d){var h=JSON.parse(d);(void 0===h.timeRefreshed&&h.timeAcquired<n||void 0!==h.timeRefreshed&&h.timeRefreshed<n)&&(o.removeItemSync(l),c=!0)}}}c&&e.notifyWaiters()},e.waiters=void 0,e}();t.default=d}));const s={timeoutInSeconds:60},c={name:"auth0-spa-js",version:"2.9.1"},u=()=>Date.now();class l extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,l.prototype)}static fromPayload({error:e,error_description:t}){return new l(e,t)}}class d extends l{constructor(e,t,n,o=null){super(e,t),this.state=n,this.appState=o,Object.setPrototypeOf(this,d.prototype)}}class h extends l{constructor(e,t,n,o,i=null){super(e,t),this.connection=n,this.state=o,this.appState=i,Object.setPrototypeOf(this,h.prototype)}}class p extends l{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,p.prototype)}}class f extends p{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,f.prototype)}}class m extends l{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,m.prototype)}}class y extends l{constructor(e,t,n){super(e,t),this.mfa_token=n,Object.setPrototypeOf(this,y.prototype)}}class g extends l{constructor(e,t){super("missing_refresh_token",`Missing Refresh Token (audience: '${b(e,["default"])}', scope: '${b(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,g.prototype)}}class v extends l{constructor(e,t){super("missing_scopes",`Missing requested scopes after refresh (audience: '${b(e,["default"])}', missing scope: '${b(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,v.prototype)}}class w extends l{constructor(e){super("use_dpop_nonce","Server rejected DPoP proof: wrong nonce"),this.newDpopNonce=e,Object.setPrototypeOf(this,w.prototype)}}function b(e,t=[]){return e&&!t.includes(e)?e:""}const k=()=>window.crypto,_=()=>{let e="";return Array.from(k().getRandomValues(new Uint8Array(43))).forEach(t=>e+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~."[t%66]),e},S=e=>btoa(e),I=[{key:"name",type:["string"]},{key:"version",type:["string","number"]},{key:"env",type:["object"]}],O=e=>Object.keys(e).reduce((t,n)=>{const o=I.find(e=>e.key===n);return o&&o.type.includes(typeof e[n])&&(t[n]=e[n]),t},{}),P=e=>{var{clientId:n}=e,o=t(e,["clientId"]);return new URLSearchParams((e=>Object.keys(e).filter(t=>void 0!==e[t]).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]}),{}))(Object.assign({client_id:n},o))).toString()},T=async e=>{const t=k().subtle.digest({name:"SHA-256"},(new TextEncoder).encode(e));return await t},j=e=>(e=>decodeURIComponent(atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))(e.replace(/_/g,"/").replace(/-/g,"+")),C=e=>{const t=new Uint8Array(e);return(e=>{const t={"+":"-","/":"_","=":""};return e.replace(/[+/=]/g,e=>t[e])})(window.btoa(String.fromCharCode(...Array.from(t))))},E=new TextEncoder,x=new TextDecoder;function z(e){return"string"==typeof e?E.encode(e):x.decode(e)}function K(e){if("number"!=typeof e.modulusLength||e.modulusLength<2048)throw new A(`${e.name} modulusLength must be at least 2048 bits`)}let N;if(Uint8Array.prototype.toBase64)N=e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0}));else{const e=32768;N=t=>{t instanceof ArrayBuffer&&(t=new Uint8Array(t));const n=[];for(let o=0;o<t.byteLength;o+=e)n.push(String.fromCharCode.apply(null,t.subarray(o,o+e)));return btoa(n.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}}function U(e){return N(e)}class R extends Error{constructor(e){var t;super(null!=e?e:"operation not supported"),this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}class A extends Error{constructor(e){var t;super(e),this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}function D(e){switch(e.algorithm.name){case"RSA-PSS":return function(e){if("SHA-256"===e.algorithm.hash.name)return"PS256";throw new R("unsupported RsaHashedKeyAlgorithm hash name")}(e);case"RSASSA-PKCS1-v1_5":return function(e){if("SHA-256"===e.algorithm.hash.name)return"RS256";throw new R("unsupported RsaHashedKeyAlgorithm hash name")}(e);case"ECDSA":return function(e){if("P-256"===e.algorithm.namedCurve)return"ES256";throw new R("unsupported EcKeyAlgorithm namedCurve")}(e);case"Ed25519":return"Ed25519";default:throw new R("unsupported CryptoKey algorithm name")}}function L(e){return e instanceof CryptoKey}function Z(e){return L(e)&&"public"===e.type}async function W(e){const{kty:t,e:n,n:o,x:i,y:r,crv:a}=await crypto.subtle.exportKey("jwk",e);return{kty:t,crv:a,e:n,n:o,x:i,y:r}}const F=["authorization_code","refresh_token","urn:ietf:params:oauth:grant-type:token-exchange"],H=async(e,t)=>{const n=await fetch(e,t);return{ok:n.ok,json:await n.json(),headers:(o=n.headers,[...o].reduce((e,[t,n])=>(e[t]=n,e),{}))};var o},G=async(e,t,n,o,i,r,a=1e4,s)=>i?(async(e,t,n,o,i,r,a,s)=>{return c={auth:{audience:t,scope:n},timeout:i,fetchUrl:e,fetchOptions:o,useFormData:a,useMrrt:s},u=r,new Promise(function(e,t){const n=new MessageChannel;n.port1.onmessage=function(o){o.data.error?t(new Error(o.data.error)):e(o.data),n.port1.close()},u.postMessage(c,[n.port2])});var c,u})(e,t,n,o,a,i,r,s):(async(e,t,n)=>{const o=new AbortController;let i;return t.signal=o.signal,Promise.race([H(e,t),new Promise((e,t)=>{i=setTimeout(()=>{o.abort(),t(new Error("Timeout when executing 'fetch'"))},n)})]).finally(()=>{clearTimeout(i)})})(e,o,a);async function V(e,n,o,i,r,a,s,c,u,d){if(u){const t=await u.generateProof({url:e,method:r.method||"GET",nonce:await u.getNonce()});r.headers=Object.assign(Object.assign({},r.headers),{dpop:t})}let h,p=null;for(let t=0;t<3;t++)try{h=await G(e,o,i,r,a,s,n,c),p=null;break}catch(e){p=e}if(p)throw p;const f=h.json,{error:m,error_description:v}=f,b=t(f,["error","error_description"]),{headers:k,ok:_}=h;let S;if(u&&(S=k["dpop-nonce"],S&&await u.setNonce(S)),!_){const t=v||`HTTP error. Unable to fetch ${e}`;if("mfa_required"===m)throw new y(m,t,b.mfa_token);if("missing_refresh_token"===m)throw new g(o,i);if("use_dpop_nonce"===m){if(!u||!S||d)throw new w(S);return V(e,n,o,i,r,a,s,c,u,!0)}throw new l(m||"request_error",t)}return b}async function J(e,n){var{baseUrl:o,timeout:i,audience:r,scope:a,auth0Client:s,useFormData:u,useMrrt:l,dpop:d}=e,h=t(e,["baseUrl","timeout","audience","scope","auth0Client","useFormData","useMrrt","dpop"]);const p="urn:ietf:params:oauth:grant-type:token-exchange"===h.grant_type,f="refresh_token"===h.grant_type&&l,m=Object.assign(Object.assign(Object.assign(Object.assign({},h),p&&r&&{audience:r}),p&&a&&{scope:a}),f&&{audience:r,scope:a}),y=u?P(m):JSON.stringify(m),g=(v=h.grant_type,F.includes(v));var v;return await V(`${o}/oauth/token`,i,r||"default",a,{method:"POST",body:y,headers:{"Content-Type":u?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(O(s||c)))}},n,u,l,g?d:void 0)}const X=(...e)=>{return(t=e.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(t))).join(" ");var t},M=(e,t,n)=>{let o;return n&&(o=e[n]),o||(o=e.default),X(o,t)};class B{constructor(e,t="@@auth0spajs@@",n){this.prefix=t,this.suffix=n,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[t,n,o,i]=e.split("::");return new B({clientId:n,scope:i,audience:o},t)}static fromCacheEntry(e){const{scope:t,audience:n,client_id:o}=e;return new B({scope:t,audience:n,clientId:o})}}class Y{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){const t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}}class q{constructor(){this.enclosedCache=function(){let e={};return{set(t,n){e[t]=n},get(t){const n=e[t];if(n)return n},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}}class ${constructor(e,t,n){this.cache=e,this.keyManifest=t,this.nowProvider=n||u}async setIdToken(e,t,n){var o;const i=this.getIdTokenCacheKey(e);await this.cache.set(i,{id_token:t,decodedToken:n}),await(null===(o=this.keyManifest)||void 0===o?void 0:o.add(i))}async getIdToken(e){const t=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){const t=await this.get(e);if(!t)return;if(!t.id_token||!t.decodedToken)return;return{id_token:t.id_token,decodedToken:t.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}}async get(e,t=0,n=!1,o){var i;let r=await this.cache.get(e.toKey());if(!r){const t=await this.getCacheKeys();if(!t)return;const i=this.matchExistingCacheKey(e,t);if(i&&(r=await this.cache.get(i)),!i&&n&&"cache-only"!==o)return this.getEntryWithRefreshToken(e,t)}if(!r)return;const a=await this.nowProvider(),s=Math.floor(a/1e3);return r.expiresAt-t<s?r.body.refresh_token?this.modifiedCachedEntry(r,e):(await this.cache.remove(e.toKey()),void await(null===(i=this.keyManifest)||void 0===i?void 0:i.remove(e.toKey()))):r.body}async modifiedCachedEntry(e,t){return e.body={refresh_token:e.body.refresh_token,audience:e.body.audience,scope:e.body.scope},await this.cache.set(t.toKey(),e),{refresh_token:e.body.refresh_token,audience:e.body.audience,scope:e.body.scope}}async set(e){var t;const n=new B({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(n.toKey(),o),await(null===(t=this.keyManifest)||void 0===t?void 0:t.add(n.toKey()))}async remove(e,t,n){const o=new B({clientId:e,scope:n,audience:t});await this.cache.remove(o.toKey())}async clear(e){var t;const n=await this.getCacheKeys();n&&(await n.filter(t=>!e||t.includes(e)).reduce(async(e,t)=>{await e,await this.cache.remove(t)},Promise.resolve()),await(null===(t=this.keyManifest)||void 0===t?void 0:t.clear()))}async wrapCacheEntry(e){const t=await this.nowProvider();return{body:e,expiresAt:Math.floor(t/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?null===(e=await this.keyManifest.get())||void 0===e?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new B({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,t){return t.filter(t=>{var n;const o=B.fromKey(t),i=new Set(o.scope&&o.scope.split(" ")),r=(null===(n=e.scope)||void 0===n?void 0:n.split(" "))||[],a=o.scope&&r.reduce((e,t)=>e&&i.has(t),!0);return"@@auth0spajs@@"===o.prefix&&o.clientId===e.clientId&&o.audience===e.audience&&a})[0]}async getEntryWithRefreshToken(e,t){var n;for(const o of t){const t=B.fromKey(o);if("@@auth0spajs@@"===t.prefix&&t.clientId===e.clientId){const t=await this.cache.get(o);if(null===(n=null==t?void 0:t.body)||void 0===n?void 0:n.refresh_token)return this.modifiedCachedEntry(t,e)}}}async updateEntry(e,t){var n;const o=await this.getCacheKeys();if(o)for(const i of o){const o=await this.cache.get(i);if((null===(n=null==o?void 0:o.body)||void 0===n?void 0:n.refresh_token)===e){const e=Object.assign(Object.assign({},o.body),{refresh_token:t});await this.set(e)}}}}class Q{constructor(e,t,n){this.storage=e,this.clientId=t,this.cookieDomain=n,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const ee=e=>"number"==typeof e,te=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"];var ne=i(function(e,t){var o=n&&n.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function i(e,t){if(!t)return"";var n="; "+e;return!0===t?n:n+"="+t}function r(e,t,n){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(t).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if("number"==typeof e.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*e.expires),e.expires=t}return i("Expires",e.expires?e.expires.toUTCString():"")+i("Domain",e.domain)+i("Path",e.path)+i("Secure",e.secure)+i("SameSite",e.sameSite)}(n)}function a(e){for(var t={},n=e?e.split("; "):[],o=/(%[\dA-F]{2})+/gi,i=0;i<n.length;i++){var r=n[i].split("="),a=r.slice(1).join("=");'"'===a.charAt(0)&&(a=a.slice(1,-1));try{t[r[0].replace(o,decodeURIComponent)]=a.replace(o,decodeURIComponent)}catch(e){}}return t}function s(){return a(document.cookie)}function c(e,t,n){document.cookie=r(e,t,o({path:"/"},n))}t.__esModule=!0,t.encode=r,t.parse=a,t.getAll=s,t.get=function(e){return s()[e]},t.set=c,t.remove=function(e,t){c(e,"",o(o({},t),{expires:-1}))}});o(ne),ne.encode,ne.parse,ne.getAll;var oe=ne.get,ie=ne.set,re=ne.remove;const ae={get(e){const t=oe(e);if(void 0!==t)return JSON.parse(t)},save(e,t,n){let o={};"https:"===window.location.protocol&&(o={secure:!0,sameSite:"none"}),(null==n?void 0:n.daysUntilExpire)&&(o.expires=n.daysUntilExpire),(null==n?void 0:n.cookieDomain)&&(o.domain=n.cookieDomain),ie(e,JSON.stringify(t),o)},remove(e,t){let n={};(null==t?void 0:t.cookieDomain)&&(n.domain=t.cookieDomain),re(e,n)}},se={get:e=>ae.get(e)||ae.get(`_legacy_${e}`),save(e,t,n){let o={};"https:"===window.location.protocol&&(o={secure:!0}),(null==n?void 0:n.daysUntilExpire)&&(o.expires=n.daysUntilExpire),(null==n?void 0:n.cookieDomain)&&(o.domain=n.cookieDomain),ie(`_legacy_${e}`,JSON.stringify(t),o),ae.save(e,t,n)},remove(e,t){let n={};(null==t?void 0:t.cookieDomain)&&(n.domain=t.cookieDomain),re(e,n),ae.remove(e,t),ae.remove(`_legacy_${e}`,t)}},ce={get(e){if("undefined"==typeof sessionStorage)return;const t=sessionStorage.getItem(e);return null!=t?JSON.parse(t):void 0},save(e,t){sessionStorage.setItem(e,JSON.stringify(t))},remove(e){sessionStorage.removeItem(e)}};var ue;!function(e){e.Code="code",e.ConnectCode="connect_code"}(ue||(ue={}));var le,de=function(e){return le=le||function(){var e=function(e){var t=atob(e);return t}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YSx1c2VNcnJ0OmZ9LHBvcnRzOltwXX0pPT57bGV0IGgsdSxsPXt9O2NvbnN0e2F1ZGllbmNlOmQsc2NvcGU6eX09cnx8e307dHJ5e2NvbnN0IHI9YT8oZT0+e2NvbnN0IHQ9bmV3IFVSTFNlYXJjaFBhcmFtcyhlKSxyPXt9O3JldHVybiB0LmZvckVhY2goKChlLHQpPT57clt0XT1lfSkpLHJ9KShjLmJvZHkpOkpTT04ucGFyc2UoYy5ib2R5KTtpZighci5yZWZyZXNoX3Rva2VuJiYicmVmcmVzaF90b2tlbiI9PT1yLmdyYW50X3R5cGUpe2lmKHU9KChlLHQpPT5vW24oZSx0KV0pKGQseSksIXUmJmYpe2NvbnN0IGU9by5sYXRlc3RfcmVmcmVzaF90b2tlbix0PSgoZSx0KT0+e2NvbnN0IHI9T2JqZWN0LmtleXMobykuZmluZCgocj0+e2lmKCJsYXRlc3RfcmVmcmVzaF90b2tlbiIhPT1yKXtjb25zdCBzPSgoZSx0KT0+dC5zdGFydHNXaXRoKGAke2V9fGApKSh0LHIpLG89ci5zcGxpdCgifCIpWzFdLnNwbGl0KCIgIiksbj1lLnNwbGl0KCIgIikuZXZlcnkoKGU9Pm8uaW5jbHVkZXMoZSkpKTtyZXR1cm4gcyYmbn19KSk7cmV0dXJuISFyfSkoeSxkKTtlJiYhdCYmKHU9ZSl9aWYoIXUpdGhyb3cgbmV3IHQoZCx5KTtjLmJvZHk9YT9zKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSx7cmVmcmVzaF90b2tlbjp1fSkpOkpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSx7cmVmcmVzaF90b2tlbjp1fSkpfWxldCBqLGs7ImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGo9bmV3IEFib3J0Q29udHJvbGxlcixjLnNpZ25hbD1qLnNpZ25hbCk7dHJ5e2s9YXdhaXQgUHJvbWlzZS5yYWNlKFsoXz1lLG5ldyBQcm9taXNlKChlPT5zZXRUaW1lb3V0KGUsXykpKSksZmV0Y2goaSxPYmplY3QuYXNzaWduKHt9LGMpKV0pfWNhdGNoKGUpe3JldHVybiB2b2lkIHAucG9zdE1lc3NhZ2Uoe2Vycm9yOmUubWVzc2FnZX0pfWlmKCFrKXJldHVybiBqJiZqLmFib3J0KCksdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjoiVGltZW91dCB3aGVuIGV4ZWN1dGluZyAnZmV0Y2gnIn0pO2c9ay5oZWFkZXJzLGw9Wy4uLmddLnJlZHVjZSgoKGUsW3Qscl0pPT4oZVt0XT1yLGUpKSx7fSksaD1hd2FpdCBrLmpzb24oKSxoLnJlZnJlc2hfdG9rZW4/KGYmJihvLmxhdGVzdF9yZWZyZXNoX3Rva2VuPWgucmVmcmVzaF90b2tlbixPPXUsYj1oLnJlZnJlc2hfdG9rZW4sT2JqZWN0LmVudHJpZXMobykuZm9yRWFjaCgoKFtlLHRdKT0+e3Q9PT1PJiYob1tlXT1iKX0pKSksKChlLHQscik9PntvW24odCxyKV09ZX0pKGgucmVmcmVzaF90b2tlbixkLHkpLGRlbGV0ZSBoLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KShkLHkpLHAucG9zdE1lc3NhZ2Uoe29rOmsub2ssanNvbjpoLGhlYWRlcnM6bH0pfWNhdGNoKGUpe3AucG9zdE1lc3NhZ2Uoe29rOiExLGpzb246e2Vycm9yOmUuZXJyb3IsZXJyb3JfZGVzY3JpcHRpb246ZS5tZXNzYWdlfSxoZWFkZXJzOmx9KX12YXIgTyxiLGcsX30pKX0oKTsKCg=="),t=e.indexOf("\n",10)+1,n=e.substring(t)+"",o=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(o)}(),new Worker(le,e)};const he={};class pe{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var t;const n=new Set((null===(t=await this.cache.get(this.manifestKey))||void 0===t?void 0:t.keys)||[]);n.add(e),await this.cache.set(this.manifestKey,{keys:[...n]})}async remove(e){const t=await this.cache.get(this.manifestKey);if(t){const n=new Set(t.keys);return n.delete(e),n.size>0?await this.cache.set(this.manifestKey,{keys:[...n]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const fe={memory:()=>(new q).enclosedCache,localstorage:()=>new Y},me=e=>fe[e],ye=e=>{const{openUrl:n,onRedirect:o}=e,i=t(e,["openUrl","onRedirect"]);return Object.assign(Object.assign({},i),{openUrl:!1===n||n?n:o})},ge=(e,t)=>{const n=(null==t?void 0:t.split(" "))||[];return((null==e?void 0:e.split(" "))||[]).every(e=>n.includes(e))},ve={NONCE:"nonce",KEYPAIR:"keypair"};class we{constructor(e){this.clientId=e}getVersion(){return 1}createDbHandle(){const e=window.indexedDB.open("auth0-spa-js",this.getVersion());return new Promise((t,n)=>{e.onupgradeneeded=()=>Object.values(ve).forEach(t=>e.result.createObjectStore(t)),e.onerror=()=>n(e.error),e.onsuccess=()=>t(e.result)})}async getDbHandle(){return this.dbHandle||(this.dbHandle=await this.createDbHandle()),this.dbHandle}async executeDbRequest(e,t,n){const o=n((await this.getDbHandle()).transaction(e,t).objectStore(e));return new Promise((e,t)=>{o.onsuccess=()=>e(o.result),o.onerror=()=>t(o.error)})}buildKey(e){const t=e?`_${e}`:"auth0";return`${this.clientId}::${t}`}setNonce(e,t){return this.save(ve.NONCE,this.buildKey(t),e)}setKeyPair(e){return this.save(ve.KEYPAIR,this.buildKey(),e)}async save(e,t,n){await this.executeDbRequest(e,"readwrite",e=>e.put(n,t))}findNonce(e){return this.find(ve.NONCE,this.buildKey(e))}findKeyPair(){return this.find(ve.KEYPAIR,this.buildKey())}find(e,t){return this.executeDbRequest(e,"readonly",e=>e.get(t))}async deleteBy(e,t){const n=await this.executeDbRequest(e,"readonly",e=>e.getAllKeys());null==n||n.filter(t).map(t=>this.executeDbRequest(e,"readwrite",e=>e.delete(t)))}deleteByClientId(e,t){return this.deleteBy(e,e=>"string"==typeof e&&e.startsWith(`${t}::`))}clearNonces(){return this.deleteByClientId(ve.NONCE,this.clientId)}clearKeyPairs(){return this.deleteByClientId(ve.KEYPAIR,this.clientId)}}class be{constructor(e){this.storage=new we(e)}getNonce(e){return this.storage.findNonce(e)}setNonce(e,t){return this.storage.setNonce(e,t)}async getOrGenerateKeyPair(){let e=await this.storage.findKeyPair();return e||(e=await async function(e,t){var n;let o;return o={name:"ECDSA",namedCurve:"P-256"},crypto.subtle.generateKey(o,null!==(n=null==t?void 0:t.extractable)&&void 0!==n&&n,["sign","verify"])}(0,{extractable:!1}),await this.storage.setKeyPair(e)),e}async generateProof(e){const t=await this.getOrGenerateKeyPair();return function({keyPair:e,url:t,method:n,nonce:o,accessToken:i}){const r=function(e){const t=new URL(e);return t.search="",t.hash="",t.href}(t);return async function(e,t,n,o,i,r){const a=null==e?void 0:e.privateKey,s=null==e?void 0:e.publicKey;if(!L(c=a)||"private"!==c.type)throw new TypeError('"keypair.privateKey" must be a private CryptoKey');var c;if(!Z(s))throw new TypeError('"keypair.publicKey" must be a public CryptoKey');if(!0!==s.extractable)throw new TypeError('"keypair.publicKey.extractable" must be true');if("string"!=typeof t)throw new TypeError('"htu" must be a string');if("string"!=typeof n)throw new TypeError('"htm" must be a string');if(void 0!==o&&"string"!=typeof o)throw new TypeError('"nonce" must be a string or undefined');if(void 0!==i&&"string"!=typeof i)throw new TypeError('"accessToken" must be a string or undefined');if(void 0!==r&&("object"!=typeof r||null===r||Array.isArray(r)))throw new TypeError('"additional" must be an object');return async function(e,t,n){if(!1===n.usages.includes("sign"))throw new TypeError('private CryptoKey instances used for signing assertions must include "sign" in their "usages"');const o=`${U(z(JSON.stringify(e)))}.${U(z(JSON.stringify(t)))}`;return`${o}.${U(await crypto.subtle.sign(function(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:"SHA-256"};case"RSA-PSS":return K(e.algorithm),{name:e.algorithm.name,saltLength:32};case"RSASSA-PKCS1-v1_5":return K(e.algorithm),{name:e.algorithm.name};case"Ed25519":return{name:e.algorithm.name}}throw new R}(n),n,z(o)))}`}({alg:D(a),typ:"dpop+jwt",jwk:await W(s)},Object.assign(Object.assign({},r),{iat:Math.floor(Date.now()/1e3),jti:crypto.randomUUID(),htm:n,nonce:o,htu:t,ath:i?U(await crypto.subtle.digest("SHA-256",z(i))):void 0}),a)}(e,r,n,o,i)}(Object.assign({keyPair:t},e))}async calculateThumbprint(){return function(e){return async function(e){if(!Z(e))throw new TypeError('"publicKey" must be a public CryptoKey');if(!0!==e.extractable)throw new TypeError('"publicKey.extractable" must be true');const t=await W(e);let n;switch(t.kty){case"EC":n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":n={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":n={e:t.e,kty:t.kty,n:t.n};break;default:throw new R("unsupported JWK kty")}return U(await crypto.subtle.digest({name:"SHA-256"},z(JSON.stringify(n))))}(e.publicKey)}(await this.getOrGenerateKeyPair())}async clear(){await Promise.all([this.storage.clearNonces(),this.storage.clearKeyPairs()])}}var ke;!function(e){e.Bearer="Bearer",e.DPoP="DPoP"}(ke||(ke={}));class _e{constructor(e,t){this.hooks=t,this.config=Object.assign(Object.assign({},e),{fetch:e.fetch||("undefined"==typeof window?fetch:window.fetch.bind(window))})}isAbsoluteUrl(e){return/^(https?:)?\/\//i.test(e)}buildUrl(e,t){if(t){if(this.isAbsoluteUrl(t))return t;if(e)return`${e.replace(/\/?\/$/,"")}/${t.replace(/^\/+/,"")}`}throw new TypeError("`url` must be absolute or `baseUrl` non-empty.")}getAccessToken(e){return this.config.getAccessToken?this.config.getAccessToken(e):this.hooks.getAccessToken(e)}extractUrl(e){return"string"==typeof e?e:e instanceof URL?e.href:e.url}buildBaseRequest(e,t){if(!this.config.baseUrl)return new Request(e,t);const n=this.buildUrl(this.config.baseUrl,this.extractUrl(e)),o=e instanceof Request?new Request(n,e):n;return new Request(o,t)}setAuthorizationHeader(e,t,n=ke.Bearer){e.headers.set("authorization",`${n} ${t}`)}async setDpopProofHeader(e,t){if(!this.config.dpopNonceId)return;const n=await this.hooks.getDpopNonce(),o=await this.hooks.generateDpopProof({accessToken:t,method:e.method,nonce:n,url:e.url});e.headers.set("dpop",o)}async prepareRequest(e,t){const n=await this.getAccessToken(t);let o,i;"string"==typeof n?(o=this.config.dpopNonceId?ke.DPoP:ke.Bearer,i=n):(o=n.token_type,i=n.access_token),this.setAuthorizationHeader(e,i,o),o===ke.DPoP&&await this.setDpopProofHeader(e,i)}getHeader(e,t){return Array.isArray(e)?new Headers(e).get(t)||"":"function"==typeof e.get?e.get(t)||"":e[t]||""}hasUseDpopNonceError(e){if(401!==e.status)return!1;const t=this.getHeader(e.headers,"www-authenticate");return t.includes("invalid_dpop_nonce")||t.includes("use_dpop_nonce")}async handleResponse(e,t){const n=this.getHeader(e.headers,"dpop-nonce");if(n&&await this.hooks.setDpopNonce(n),!this.hasUseDpopNonceError(e))return e;if(!n||!t.onUseDpopNonceError)throw new w(n);return t.onUseDpopNonceError()}async internalFetchWithAuth(e,t,n,o){const i=this.buildBaseRequest(e,t);await this.prepareRequest(i,o);const r=await this.config.fetch(i);return this.handleResponse(r,n)}fetchWithAuth(e,t,n){const o={onUseDpopNonceError:()=>this.internalFetchWithAuth(e,t,Object.assign(Object.assign({},o),{onUseDpopNonceError:void 0}),n)};return this.internalFetchWithAuth(e,t,o,n)}}class Se{constructor(e,t){this.myAccountFetcher=e,this.apiBase=t}async connectAccount(e){const t=await this.myAccountFetcher.fetchWithAuth(`${this.apiBase}v1/connected-accounts/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return this._handleResponse(t)}async completeAccount(e){const t=await this.myAccountFetcher.fetchWithAuth(`${this.apiBase}v1/connected-accounts/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return this._handleResponse(t)}async _handleResponse(e){let t;try{t=await e.text(),t=JSON.parse(t)}catch(n){throw new Ie({type:"invalid_json",status:e.status,title:"Invalid JSON response",detail:t||String(n)})}if(e.ok)return t;throw new Ie(t)}}class Ie extends Error{constructor({type:e,status:t,title:n,detail:o,validation_errors:i}){super(o),this.name="MyAccountApiError",this.type=e,this.status=t,this.title=n,this.detail=o,this.validation_errors=i,Object.setPrototypeOf(this,Ie.prototype)}}const Oe=new a;class Pe{constructor(e){let t,n;if(this.userCache=(new q).enclosedCache,this.activeLockKeys=new Set,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{const e=Array.from(this.activeLockKeys);for(const t of e)await Oe.releaseLock(t);this.activeLockKeys.clear(),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),"undefined"!=typeof window&&(()=>{if(!k())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===k().subtle)throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)n=e.cache;else{if(t=e.cacheLocation||"memory",!me(t))throw new Error(`Invalid cache location "${t}"`);n=me(t)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=!1===e.legacySameSiteCookie?ae:se,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(()=>`auth0.${this.options.clientId}.is.authenticated`)(),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:ce;var i;this.scope=((e,t,...n)=>{if("object"!=typeof e)return{default:X(t,e,...n)};let o={default:X(t,...n)};return Object.keys(e).forEach(i=>{const r=e[i];o[i]=X(t,r,...n)}),o})(this.options.authorizationParams.scope,"openid",this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new Q(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||u,this.cacheManager=new $(n,n.allKeys?void 0:new pe(n,this.options.clientId),this.nowProvider),this.dpop=this.options.useDpop?new be(this.options.clientId):void 0,this.domainUrl=(i=this.options.domain,/^https?:\/\//.test(i)?i:`https://${i}`),this.tokenIssuer=((e,t)=>e?e.startsWith("https://")?e:`https://${e}/`:`${t}/`)(this.options.issuer,this.domainUrl);const r=`${this.domainUrl}/me/`,a=this.createFetcher(Object.assign(Object.assign({},this.options.useDpop&&{dpopNonceId:"__auth0_my_account_api__"}),{getAccessToken:()=>this.getTokenSilently({authorizationParams:{scope:"create:me:connected_accounts",audience:r},detailedResponse:!0})}));this.myAccountApi=new Se(a,r),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===t&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new de)}_url(e){const t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||c)));return`${this.domainUrl}${e}&auth0Client=${t}`}_authorizeUrl(e){return this._url(`/authorize?${P(e)}`)}async _verifyIdToken(e,t,n){const o=await this.nowProvider();return(e=>{if(!e.id_token)throw new Error("ID token is required but missing");const t=(e=>{const t=e.split("."),[n,o,i]=t;if(3!==t.length||!n||!o||!i)throw new Error("ID token could not be decoded");const r=JSON.parse(j(o)),a={__raw:e},s={};return Object.keys(r).forEach(e=>{a[e]=r[e],te.includes(e)||(s[e]=r[e])}),{encoded:{header:n,payload:o,signature:i},header:JSON.parse(j(n)),claims:a,user:s}})(e.id_token);if(!t.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(t.claims.iss!==e.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${e.iss}", found "${t.claims.iss}"`);if(!t.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==t.header.alg)throw new Error(`Signature algorithm of "${t.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!t.claims.aud||"string"!=typeof t.claims.aud&&!Array.isArray(t.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but was not one of "${t.claims.aud.join(", ")}"`);if(t.claims.aud.length>1){if(!t.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(t.claims.azp!==e.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${e.aud}", found "${t.claims.azp}"`)}}else if(t.claims.aud!==e.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but found "${t.claims.aud}"`);if(e.nonce){if(!t.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(t.claims.nonce!==e.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${e.nonce}", found "${t.claims.nonce}"`)}if(e.max_age&&!ee(t.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(null==t.claims.exp||!ee(t.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!ee(t.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=e.leeway||60,o=new Date(e.now||Date.now()),i=new Date(0);if(i.setUTCSeconds(t.claims.exp+n),o>i)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${o}) is after expiration time (${i})`);if(null!=t.claims.nbf&&ee(t.claims.nbf)){const e=new Date(0);if(e.setUTCSeconds(t.claims.nbf-n),o<e)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${o}) is before ${e}`)}if(null!=t.claims.auth_time&&ee(t.claims.auth_time)){const i=new Date(0);if(i.setUTCSeconds(parseInt(t.claims.auth_time)+e.max_age+n),o>i)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${o}) is after last auth at ${i}`)}if(e.organization){const n=e.organization.trim();if(n.startsWith("org_")){const e=n;if(!t.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(e!==t.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${e}", found "${t.claims.org_id}"`)}else{const e=n.toLowerCase();if(!t.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(e!==t.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${e}", found "${t.claims.org_name}"`)}}return t})({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:n,leeway:this.options.leeway,max_age:(i=this.options.authorizationParams.max_age,"string"!=typeof i?i:parseInt(i,10)||void 0),now:o});var i}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,t,n){var o;const i=S(_()),r=S(_()),a=_(),s=await T(a),c=C(s),u=await(null===(o=this.dpop)||void 0===o?void 0:o.calculateThumbprint()),l=((e,t,n,o,i,r,a,s,c)=>Object.assign(Object.assign(Object.assign({client_id:e.clientId},e.authorizationParams),n),{scope:M(t,n.scope,n.audience),response_type:"code",response_mode:s||"query",state:o,nonce:i,redirect_uri:a||e.authorizationParams.redirect_uri,code_challenge:r,code_challenge_method:"S256",dpop_jkt:c}))(this.options,this.scope,e,i,r,c,e.redirect_uri||this.options.authorizationParams.redirect_uri||n,null==t?void 0:t.response_mode,u),d=this._authorizeUrl(l);return{nonce:r,code_verifier:a,scope:l.scope,audience:l.audience||"default",redirect_uri:l.redirect_uri,state:i,url:d}}async loginWithPopup(e,t){var n;if(e=e||{},!(t=t||{}).popup&&(t.popup=(()=>{const e=window.screenX+(window.innerWidth-400)/2,t=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup",`left=${e},top=${t},width=400,height=600,resizable,scrollbars=yes,status=1`)})(),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);t.popup.location.href=o.url;const i=await(e=>new Promise((t,n)=>{let o;const i=setInterval(()=>{e.popup&&e.popup.closed&&(clearInterval(i),clearTimeout(r),window.removeEventListener("message",o,!1),n(new m(e.popup)))},1e3),r=setTimeout(()=>{clearInterval(i),n(new f(e.popup)),window.removeEventListener("message",o,!1)},1e3*(e.timeoutInSeconds||60));o=function(a){if(a.data&&"authorization_response"===a.data.type){if(clearTimeout(r),clearInterval(i),window.removeEventListener("message",o,!1),e.popup.close(),a.data.response.error)return n(l.fromPayload(a.data.response));t(a.data.response)}},window.addEventListener("message",o)}))(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==i.state)throw new l("state_mismatch","Invalid state");const r=(null===(n=e.authorizationParams)||void 0===n?void 0:n.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:i.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:r})}async getUser(){var e;const t=await this._getIdTokenFromCache();return null===(e=null==t?void 0:t.decodedToken)||void 0===e?void 0:e.user}async getIdTokenClaims(){var e;const t=await this._getIdTokenFromCache();return null===(e=null==t?void 0:t.decodedToken)||void 0===e?void 0:e.claims}async loginWithRedirect(e={}){var n;const o=ye(e),{openUrl:i,fragment:r,appState:a}=o,s=t(o,["openUrl","fragment","appState"]),c=(null===(n=s.authorizationParams)||void 0===n?void 0:n.organization)||this.options.authorizationParams.organization,u=await this._prepareAuthorizeUrl(s.authorizationParams||{}),{url:l}=u,d=t(u,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},d),{appState:a,response_type:ue.Code}),c&&{organization:c}));const h=r?`${l}#${r}`:l;i?await i(h):window.location.assign(h)}async handleRedirectCallback(e=window.location.href){const t=e.split("?").slice(1);if(0===t.length)throw new Error("There are no query params available for parsing.");const n=this.transactionManager.get();if(!n)throw new l("missing_transaction","Invalid state");this.transactionManager.remove();const o=(e=>{e.indexOf("#")>-1&&(e=e.substring(0,e.indexOf("#")));const t=new URLSearchParams(e);return{state:t.get("state"),code:t.get("code")||void 0,connect_code:t.get("connect_code")||void 0,error:t.get("error")||void 0,error_description:t.get("error_description")||void 0}})(t.join(""));return n.response_type===ue.ConnectCode?this._handleConnectAccountRedirectCallback(o,n):this._handleLoginRedirectCallback(o,n)}async _handleLoginRedirectCallback(e,t){const{code:n,state:o,error:i,error_description:r}=e;if(i)throw new d(i,r||i,o,t.appState);if(!t.code_verifier||t.state&&t.state!==o)throw new l("state_mismatch","Invalid state");const a=t.organization,s=t.nonce,c=t.redirect_uri;return await this._requestToken(Object.assign({audience:t.audience,scope:t.scope,code_verifier:t.code_verifier,grant_type:"authorization_code",code:n},c?{redirect_uri:c}:{}),{nonceIn:s,organization:a}),{appState:t.appState,response_type:ue.Code}}async _handleConnectAccountRedirectCallback(e,t){const{connect_code:n,state:o,error:i,error_description:r}=e;if(i)throw new h(i,r||i,t.connection,o,t.appState);if(!n)throw new l("missing_connect_code","Missing connect code");if(!(t.code_verifier&&t.state&&t.auth_session&&t.redirect_uri&&t.state===o))throw new l("state_mismatch","Invalid state");const a=await this.myAccountApi.completeAccount({auth_session:t.auth_session,connect_code:n,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier});return Object.assign(Object.assign({},a),{appState:t.appState,response_type:ue.ConnectCode})}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch(e){}}async getTokenSilently(e={}){var t,n;const o=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:M(this.scope,null===(t=e.authorizationParams)||void 0===t?void 0:t.scope,(null===(n=e.authorizationParams)||void 0===n?void 0:n.audience)||this.options.authorizationParams.audience)})}),i=await((e,t)=>{let n=he[t];return n||(n=e().finally(()=>{delete he[t],n=null}),he[t]=n),n})(()=>this._getTokenSilently(o),`${this.options.clientId}::${o.authorizationParams.audience}::${o.authorizationParams.scope}`);return e.detailedResponse?i:null==i?void 0:i.access_token}async _getTokenSilently(e){const{cacheMode:n}=e,o=t(e,["cacheMode"]);if("off"!==n){const e=await this._getEntryFromCache({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId,cacheMode:n});if(e)return e}if("cache-only"===n)return;const i=`auth0.lock.getTokenSilently.${this.options.clientId}.${o.authorizationParams.audience||"default"}`;if(!await(async(e,t=3)=>{for(let n=0;n<t;n++)if(await e())return!0;return!1})(()=>Oe.acquireLock(i,5e3),10))throw new p;this.activeLockKeys.add(i),1===this.activeLockKeys.size&&window.addEventListener("pagehide",this._releaseLockOnPageHide);try{if("off"!==n){const e=await this._getEntryFromCache({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId});if(e)return e}const e=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(o):await this._getTokenFromIFrame(o),{id_token:t,token_type:i,access_token:r,oauthTokenScope:a,expires_in:s}=e;return Object.assign(Object.assign({id_token:t,token_type:i,access_token:r},a?{scope:a}:null),{expires_in:s})}finally{await Oe.releaseLock(i),this.activeLockKeys.delete(i),0===this.activeLockKeys.size&&window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}async getTokenWithPopup(e={},t={}){var n,o;const i=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:M(this.scope,null===(n=e.authorizationParams)||void 0===n?void 0:n.scope,(null===(o=e.authorizationParams)||void 0===o?void 0:o.audience)||this.options.authorizationParams.audience)})});return t=Object.assign(Object.assign({},s),t),await this.loginWithPopup(i,t),(await this.cacheManager.get(new B({scope:i.authorizationParams.scope,audience:i.authorizationParams.audience||"default",clientId:this.options.clientId}),void 0,this.options.useMrrt)).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){null!==e.clientId?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const n=e.logoutParams||{},{federated:o}=n,i=t(n,["federated"]),r=o?"&federated":"";return this._url(`/v2/logout?${P(Object.assign({clientId:e.clientId},i))}`)+r}async logout(e={}){var n;const o=ye(e),{openUrl:i}=o,r=t(o,["openUrl"]);null===e.clientId?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@"),await(null===(n=this.dpop)||void 0===n?void 0:n.clear());const a=this._buildLogoutUrl(r);i?await i(a):!1!==i&&window.location.assign(a)}async _getTokenFromIFrame(e){const t=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),n=this.cookieStorage.get(this.orgHintCookieName);n&&!t.organization&&(t.organization=n);const{url:o,state:i,nonce:r,code_verifier:a,redirect_uri:s,scope:c,audience:u}=await this._prepareAuthorizeUrl(t,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new l("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const n=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds;let d;try{d=new URL(this.domainUrl).origin}catch(e){d=this.domainUrl}const h=await((e,t,n=60)=>new Promise((o,i)=>{const r=window.document.createElement("iframe");r.setAttribute("width","0"),r.setAttribute("height","0"),r.style.display="none";const a=()=>{window.document.body.contains(r)&&(window.document.body.removeChild(r),window.removeEventListener("message",s,!1))};let s;const c=setTimeout(()=>{i(new p),a()},1e3*n);s=function(e){if(e.origin!=t)return;if(!e.data||"authorization_response"!==e.data.type)return;const n=e.source;n&&n.close(),e.data.response.error?i(l.fromPayload(e.data.response)):o(e.data.response),clearTimeout(c),window.removeEventListener("message",s,!1),setTimeout(a,2e3)},window.addEventListener("message",s,!1),window.document.body.appendChild(r),r.setAttribute("src",e)}))(o,d,n);if(i!==h.state)throw new l("state_mismatch","Invalid state");const f=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:a,code:h.code,grant_type:"authorization_code",redirect_uri:s,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:r,organization:t.organization});return Object.assign(Object.assign({},f),{scope:c,oauthTokenScope:f.scope,audience:u})}catch(e){throw"login_required"===e.error&&this.logout({openUrl:!1}),e}}async _getTokenUsingRefreshToken(e){const t=await this.cacheManager.get(new B({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}),void 0,this.options.useMrrt);if(!(t&&t.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new g(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const n=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o="number"==typeof e.timeoutInSeconds?1e3*e.timeoutInSeconds:null,i=((e,t,n,o)=>{var i;if(e&&n&&o){if(t.audience!==n)return t.scope;const e=o.split(" "),r=(null===(i=t.scope)||void 0===i?void 0:i.split(" "))||[],a=r.every(t=>e.includes(t));return e.length>=r.length&&a?o:t.scope}return t.scope})(this.options.useMrrt,e.authorizationParams,null==t?void 0:t.audience,null==t?void 0:t.scope);try{const u=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:n}),o&&{timeout:o}),{scopesToRequest:i});if(u.refresh_token&&this.options.useMrrt&&(null==t?void 0:t.refresh_token)&&await this.cacheManager.updateEntry(t.refresh_token,u.refresh_token),this.options.useMrrt&&(r=null==t?void 0:t.audience,a=null==t?void 0:t.scope,s=e.authorizationParams.audience,c=e.authorizationParams.scope,!(r===s&&ge(c,a)||ge(i,u.scope)))){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);await this.cacheManager.remove(this.options.clientId,e.authorizationParams.audience,e.authorizationParams.scope);const t=((e,t)=>{const n=(null==e?void 0:e.split(" "))||[],o=(null==t?void 0:t.split(" "))||[];return n.filter(e=>-1==o.indexOf(e)).join(",")})(i,u.scope);throw new v(e.authorizationParams.audience||"default",t)}return Object.assign(Object.assign({},u),{scope:e.authorizationParams.scope,oauthTokenScope:u.scope,audience:e.authorizationParams.audience||"default"})}catch(t){if((t.message.indexOf("Missing Refresh Token")>-1||t.message&&t.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw t}var r,a,s,c}async _saveEntryInCache(e){const{id_token:n,decodedToken:o}=e,i=t(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:n,decodedToken:o}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(i)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",t=this.scope[e],n=await this.cacheManager.getIdToken(new B({clientId:this.options.clientId,audience:e,scope:t})),o=this.userCache.get("@@user@@");return n&&n.id_token===(null==o?void 0:o.id_token)?o:(this.userCache.set("@@user@@",n),n)}async _getEntryFromCache({scope:e,audience:t,clientId:n,cacheMode:o}){const i=await this.cacheManager.get(new B({scope:e,audience:t,clientId:n}),60,this.options.useMrrt,o);if(i&&i.access_token){const{token_type:e,access_token:t,oauthTokenScope:n,expires_in:o}=i,r=await this._getIdTokenFromCache();return r&&Object.assign(Object.assign({id_token:r.id_token,token_type:e||"Bearer",access_token:t},n?{scope:n}:null),{expires_in:o})}}async _requestToken(e,t){const{nonceIn:n,organization:o,scopesToRequest:i}=t||{},r=await J(Object.assign(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs,useMrrt:this.options.useMrrt,dpop:this.dpop},e),{scope:i||e.scope}),this.worker),a=await this._verifyIdToken(r.id_token,n,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},r),{decodedToken:a,scope:e.scope,audience:e.audience||"default"}),r.scope?{oauthTokenScope:r.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||a.claims.org_id),Object.assign(Object.assign({},r),{decodedToken:a})}async exchangeToken(e){return this._requestToken({grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",subject_token:e.subject_token,subject_token_type:e.subject_token_type,scope:M(this.scope,e.scope,e.audience||this.options.authorizationParams.audience),audience:e.audience||this.options.authorizationParams.audience})}_assertDpop(e){if(!e)throw new Error("`useDpop` option must be enabled before using DPoP.")}getDpopNonce(e){return this._assertDpop(this.dpop),this.dpop.getNonce(e)}setDpopNonce(e,t){return this._assertDpop(this.dpop),this.dpop.setNonce(e,t)}generateDpopProof(e){return this._assertDpop(this.dpop),this.dpop.generateProof(e)}createFetcher(e={}){return new _e(e,{isDpopEnabled:()=>!!this.options.useDpop,getAccessToken:e=>{var t;return this.getTokenSilently({authorizationParams:{scope:null===(t=null==e?void 0:e.scope)||void 0===t?void 0:t.join(" "),audience:null==e?void 0:e.audience},detailedResponse:!0})},getDpopNonce:()=>this.getDpopNonce(e.dpopNonceId),setDpopNonce:t=>this.setDpopNonce(t,e.dpopNonceId),generateDpopProof:e=>this.generateDpopProof(e)})}async connectAccountWithRedirect(e){const{openUrl:t,appState:n,connection:o,scopes:i,authorization_params:r,redirectUri:a=this.options.authorizationParams.redirect_uri||window.location.origin}=e;if(!o)throw new Error("connection is required");const s=S(_()),c=_(),u=await T(c),l=C(u),{connect_uri:d,connect_params:h,auth_session:p}=await this.myAccountApi.connectAccount({connection:o,scopes:i,redirect_uri:a,state:s,code_challenge:l,code_challenge_method:"S256",authorization_params:r});this.transactionManager.create({state:s,code_verifier:c,auth_session:p,redirect_uri:a,appState:n,connection:o,response_type:ue.ConnectCode});const f=new URL(d);f.searchParams.set("ticket",h.ticket),t?await t(f.toString()):window.location.assign(f)}}async function Te(e){const t=new Pe(e);return await t.checkSession(),t}function je(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function r(n,o,i,r){var c=o&&o.prototype instanceof s?o:s,u=Object.create(c.prototype);return Ce(u,"_invoke",function(n,o,i){var r,s,c,u=0,l=i||[],d=!1,h={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return r=t,s=0,c=e,h.n=n,a}};function p(n,o){for(s=n,c=o,t=0;!d&&u&&!i&&t<l.length;t++){var i,r=l[t],p=h.p,f=r[2];n>3?(i=f===o)&&(c=r[(s=r[4])?5:(s=3,3)],r[4]=r[5]=e):r[0]<=p&&((i=n<2&&p<r[1])?(s=0,h.v=o,h.n=r[1]):p<f&&(i=n<3||r[0]>o||o>f)&&(r[4]=n,r[5]=o,h.n=f,s=0))}if(i||n>1)return a;throw d=!0,o}return function(i,l,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,f),s=l,c=f;(t=s<2?e:c)||!d;){r||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,r){if(s||(i="next"),t=r[i]){if(!(t=t.call(r,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=r.return)&&t.call(r),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);r=e}else if((t=(d=h.n<0)?c:n.call(o,h))!==a)break}catch(t){r=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,i,r),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][o]?t(t([][o]())):(Ce(t={},o,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Ce(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,Ce(d,"constructor",u),Ce(u,"constructor",c),c.displayName="GeneratorFunction",Ce(u,i,"GeneratorFunction"),Ce(d),Ce(d,i,"Generator"),Ce(d,o,function(){return this}),Ce(d,"toString",function(){return"[object Generator]"}),(je=function(){return{w:r,m:h}})()}function Ce(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Ce=function(e,t,n,o){function r(t,n){Ce(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(r("next",0),r("throw",1),r("return",2))},Ce(e,t,n,o)}function Ee(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function xe(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function a(e){Ee(r,o,i,a,s,"next",e)}function s(e){Ee(r,o,i,a,s,"throw",e)}a(void 0)})}}var ze=null,Ke=function(){var e=xe(je().m(function e(){return je().w(function(e){for(;;)switch(e.n){case 0:return console.log(" Auth0 Config Check:"),console.log("   Domain:","dev-qzgo4nchcoytqnho.us.auth0.com"),console.log("   Client ID:","Set "),console.log("   Audience:","https://recipe.site.app/api"),e.n=1,Te({domain:"dev-qzgo4nchcoytqnho.us.auth0.com",clientId:"ze8V3sIFi0HA8tdSyceJIyjYgJVVFBaC",authorizationParams:{redirect_uri:window.location.origin,audience:"https://recipe.site.app/api",scope:"openid profile email"}});case 1:return ze=e.v,e.n=2,Ne();case 2:return e.n=3,Ue();case 3:return e.a(2,ze)}},e)}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=xe(je().m(function e(){var t,n;return je().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(t=window.location.search).includes("code=")||!t.includes("state=")){e.n=4;break}return e.p=1,e.n=2,ze.handleRedirectCallback();case 2:window.history.replaceState({},document.title,"/"),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error handling callback:",n);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=xe(je().m(function e(){var t,n,o,i,r,a,s;return je().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ze.isAuthenticated();case 1:if(!e.v){e.n=4;break}return e.n=2,ze.getUser();case 2:return t=e.v,n=document.getElementById("login-btn"),o=document.getElementById("logout-btn"),i=document.getElementById("user-profile"),n&&(n.style.display="none"),o&&(o.style.display="block"),i&&(i.textContent="Welcome, ".concat(t.name)),e.n=3,Ae();case 3:e.v&&console.log("User authenticated with token"),e.n=5;break;case 4:r=document.getElementById("login-btn"),a=document.getElementById("logout-btn"),s=document.getElementById("user-profile"),r&&(r.style.display="block"),a&&(a.style.display="none"),s&&(s.textContent="");case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=xe(je().m(function e(){return je().w(function(e){for(;;)switch(e.n){case 0:if(ze){e.n=1;break}throw new Error("Auth0 client not initialized. Call initAuth0() first.");case 1:return e.n=2,ze.isAuthenticated();case 2:return e.a(2,e.v)}},e)}));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=xe(je().m(function e(){var t;return je().w(function(e){for(;;)switch(e.p=e.n){case 0:if(ze){e.n=1;break}throw new Error("Auth0 client not initialized. Call initAuth0() first.");case 1:return e.p=1,e.n=2,ze.getTokenSilently();case 2:return e.a(2,e.v);case 3:return e.p=3,t=e.v,console.error("Error getting token:",t),e.a(2,null)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Le(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function r(n,o,i,r){var c=o&&o.prototype instanceof s?o:s,u=Object.create(c.prototype);return Ze(u,"_invoke",function(n,o,i){var r,s,c,u=0,l=i||[],d=!1,h={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return r=t,s=0,c=e,h.n=n,a}};function p(n,o){for(s=n,c=o,t=0;!d&&u&&!i&&t<l.length;t++){var i,r=l[t],p=h.p,f=r[2];n>3?(i=f===o)&&(c=r[(s=r[4])?5:(s=3,3)],r[4]=r[5]=e):r[0]<=p&&((i=n<2&&p<r[1])?(s=0,h.v=o,h.n=r[1]):p<f&&(i=n<3||r[0]>o||o>f)&&(r[4]=n,r[5]=o,h.n=f,s=0))}if(i||n>1)return a;throw d=!0,o}return function(i,l,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,f),s=l,c=f;(t=s<2?e:c)||!d;){r||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,r){if(s||(i="next"),t=r[i]){if(!(t=t.call(r,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=r.return)&&t.call(r),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);r=e}else if((t=(d=h.n<0)?c:n.call(o,h))!==a)break}catch(t){r=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,i,r),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][o]?t(t([][o]())):(Ze(t={},o,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Ze(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,Ze(d,"constructor",u),Ze(u,"constructor",c),c.displayName="GeneratorFunction",Ze(u,i,"GeneratorFunction"),Ze(d),Ze(d,i,"Generator"),Ze(d,o,function(){return this}),Ze(d,"toString",function(){return"[object Generator]"}),(Le=function(){return{w:r,m:h}})()}function Ze(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Ze=function(e,t,n,o){function r(t,n){Ze(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(r("next",0),r("throw",1),r("return",2))},Ze(e,t,n,o)}function We(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function Fe(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function a(e){We(r,o,i,a,s,"next",e)}function s(e){We(r,o,i,a,s,"throw",e)}a(void 0)})}}function He(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ge(o.key),o)}}function Ge(e){var t=function(e){if("object"!=De(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==De(t)?t:t+""}var Ve=function(){return function(e,t){return t&&He(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectedRating=0,this.usernameAvailable=!1,this.usernameChecking=!1,this.checkUsernameTimeout=null,this.render(),this.attachEventListeners(),this.show()},[{key:"render",value:function(){document.body.insertAdjacentHTML("beforeend",'\n      <dialog id="profile-setup-dialog" class="profile-setup-dialog">\n        <div class="dialog-content">\n          <div class="dialog-header">\n            <h2>Welcome! Set up your profile</h2>\n            <p class="dialog-subtitle">Choose how you\'ll appear on Recipe Me</p>\n          </div>\n\n          <form id="profile-setup-form" method="dialog">\n            \x3c!-- Username --\x3e\n            <div class="form-field">\n              <label for="username">\n                Username <span class="required" aria-label="required">*</span>\n              </label>\n              <div class="input-wrapper">\n                <input\n                  type="text"\n                  id="username"\n                  name="username"\n                  class="form-input"\n                  placeholder="chef_caleb"\n                  required\n                  autocomplete="off"\n                  autocapitalize="off"\n                  spellcheck="false"\n                  minlength="3"\n                  maxlength="20"\n                  aria-describedby="username-help username-validation"\n                />\n                <span id="username-validation" class="validation-msg" role="alert"></span>\n              </div>\n              <p id="username-help" class="field-help">3-20 characters: lowercase letters, numbers, underscores</p>\n            </div>\n\n            \x3c!-- Display Name --\x3e\n            <div class="form-field">\n              <label for="displayName">\n                Display Name <span class="required" aria-label="required">*</span>\n              </label>\n              <input\n                type="text"\n                id="displayName"\n                name="displayName"\n                class="form-input"\n                placeholder="Chef Caleb"\n                required\n                maxlength="50"\n                aria-describedby="displayname-help"\n              />\n              <p id="displayname-help" class="field-help">Your name as it appears in reviews and recipes</p>\n            </div>\n\n            \x3c!-- Avatar Preview --\x3e\n            <div class="form-field">\n              <label>Avatar Preview</label>\n              <div class="avatar-preview-section">\n                <div class="avatar-preview-large" id="avatar-preview" aria-live="polite">\n                  <span class="initials" id="initials-display">??</span>\n                </div>\n                <p class="avatar-help">Your initials will be used as your avatar</p>\n              </div>\n            </div>\n\n            \x3c!-- Submit --\x3e\n            <div class="form-actions">\n              <button\n                type="submit"\n                class="btn-submit"\n                id="submit-btn"\n                disabled\n                aria-busy="false"\n              >\n                Complete Setup\n              </button>\n            </div>\n          </form>\n        </div>\n      </dialog>\n    '),this.dialog=document.getElementById("profile-setup-dialog"),this.injectCSS()}},{key:"show",value:function(){var e=this;this.dialog&&(this.dialog.showModal(),this.dialog.addEventListener("cancel",function(e){e.preventDefault()}),this.dialog.addEventListener("click",function(t){t.target===e.dialog&&t.preventDefault()}))}},{key:"attachEventListeners",value:function(){var e=this,t=document.getElementById("profile-setup-form"),n=document.getElementById("username"),o=document.getElementById("displayName");document.getElementById("submit-btn"),n.addEventListener("input",function(t){var n=t.target.value;return n=n.toLowerCase().replace(/[^a-z0-9_]/g,""),t.target.value=n,clearTimeout(e.checkUsernameTimeout),e.updateInitialsPreview(o.value),0===n.length?(e.showUsernameValidation("","neutral"),e.usernameAvailable=!1,void e.checkFormValidity()):n.length<3?(e.showUsernameValidation("Too short (min 3 characters)","error"),e.usernameAvailable=!1,void e.checkFormValidity()):(e.showUsernameValidation("Checking availability...","checking"),e.usernameChecking=!0,void(e.checkUsernameTimeout=setTimeout(function(){e.checkUsername(n)},500)))}),o.addEventListener("input",function(t){e.updateInitialsPreview(t.target.value),e.checkFormValidity()}),t.addEventListener("submit",function(){var t=Fe(Le().m(function t(n){return Le().w(function(t){for(;;)switch(t.n){case 0:return n.preventDefault(),t.n=1,e.handleSubmit();case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"checkUsername",value:(t=Fe(Le().m(function e(t){var n,o,i;return Le().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/.netlify/functions/check-username?username=".concat(encodeURIComponent(t)));case 1:if((n=e.v).ok){e.n=2;break}throw new Error("Failed to check username");case 2:return e.n=3,n.json();case 3:o=e.v,this.usernameChecking=!1,o.available?(this.showUsernameValidation(" Available","success"),this.usernameAvailable=!0):(this.showUsernameValidation(o.reason||" Username taken","error"),this.usernameAvailable=!1),this.checkFormValidity(),e.n=5;break;case 4:e.p=4,i=e.v,console.error("Username check error:",i),this.usernameChecking=!1,this.showUsernameValidation("Unable to verify, try a different username","error"),this.usernameAvailable=!1,this.checkFormValidity();case 5:return e.a(2)}},e,this,[[0,4]])})),function(e){return t.apply(this,arguments)})},{key:"showUsernameValidation",value:function(e,t){var n=document.getElementById("username-validation");n&&(n.textContent=e,n.className="validation-msg ".concat(t))}},{key:"updateInitialsPreview",value:function(e){var t=document.getElementById("initials-display");if(t)if(e&&""!==e.trim()){var n,o=e.trim().split(/\s+/);n=1===o.length?o[0].substring(0,2).toUpperCase():(o[0][0]+o[o.length-1][0]).toUpperCase(),t.textContent=n}else t.textContent="??"}},{key:"checkFormValidity",value:function(){var e=document.getElementById("username"),t=document.getElementById("displayName"),n=document.getElementById("submit-btn");if(e&&t&&n){var o=e.value.length>=3&&this.usernameAvailable&&!this.usernameChecking&&t.value.trim().length>0;n.disabled=!o}}},{key:"handleSubmit",value:(e=Fe(Le().m(function e(){var t,n,o,i,r,a,s,c;return Le().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.getElementById("username").value,n=document.getElementById("displayName").value,o=document.getElementById("submit-btn"),document.getElementById("initials-display"),o){e.n=1;break}return e.a(2);case 1:return o.disabled=!0,o.setAttribute("aria-busy","true"),o.textContent="Creating profile...",e.p=2,e.n=3,Ae();case 3:return i=e.v,e.n=4,fetch("/.netlify/functions/user-profile",{method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({username:t.trim(),displayName:n.trim(),avatarType:"initials"})});case 4:if((r=e.v).ok){e.n=6;break}return e.n=5,r.json();case 5:throw a=e.v,new Error(a.error||"Failed to create profile");case 6:return e.n=7,r.json();case 7:s=e.v,localStorage.setItem("userProfile",JSON.stringify(s)),this.close(),window.location.reload(),e.n=9;break;case 8:e.p=8,c=e.v,console.error("Profile setup error:",c),alert("Failed to create profile: ".concat(c.message,"\n\nPlease try again.")),o.disabled=!1,o.setAttribute("aria-busy","false"),o.textContent="Complete Setup";case 9:return e.a(2)}},e,this,[[2,8]])})),function(){return e.apply(this,arguments)})},{key:"close",value:function(){this.dialog&&(this.dialog.close(),this.dialog.remove())}}]);var e,t}();function Je(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function r(n,o,i,r){var c=o&&o.prototype instanceof s?o:s,u=Object.create(c.prototype);return Xe(u,"_invoke",function(n,o,i){var r,s,c,u=0,l=i||[],d=!1,h={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return r=t,s=0,c=e,h.n=n,a}};function p(n,o){for(s=n,c=o,t=0;!d&&u&&!i&&t<l.length;t++){var i,r=l[t],p=h.p,f=r[2];n>3?(i=f===o)&&(c=r[(s=r[4])?5:(s=3,3)],r[4]=r[5]=e):r[0]<=p&&((i=n<2&&p<r[1])?(s=0,h.v=o,h.n=r[1]):p<f&&(i=n<3||r[0]>o||o>f)&&(r[4]=n,r[5]=o,h.n=f,s=0))}if(i||n>1)return a;throw d=!0,o}return function(i,l,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,f),s=l,c=f;(t=s<2?e:c)||!d;){r||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,r){if(s||(i="next"),t=r[i]){if(!(t=t.call(r,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=r.return)&&t.call(r),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);r=e}else if((t=(d=h.n<0)?c:n.call(o,h))!==a)break}catch(t){r=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,i,r),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][o]?t(t([][o]())):(Xe(t={},o,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Xe(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,Xe(d,"constructor",u),Xe(u,"constructor",c),c.displayName="GeneratorFunction",Xe(u,i,"GeneratorFunction"),Xe(d),Xe(d,i,"Generator"),Xe(d,o,function(){return this}),Xe(d,"toString",function(){return"[object Generator]"}),(Je=function(){return{w:r,m:h}})()}function Xe(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Xe=function(e,t,n,o){function r(t,n){Xe(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(r("next",0),r("throw",1),r("return",2))},Xe(e,t,n,o)}function Me(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}var Be=null;function Ye(){return qe.apply(this,arguments)}function qe(){return(qe=function(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function a(e){Me(r,o,i,a,s,"next",e)}function s(e){Me(r,o,i,a,s,"throw",e)}a(void 0)})}}(Je().m(function e(){var t,n,o,i,r;return Je().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Re();case 1:if(e.v){e.n=2;break}return Be=null,localStorage.removeItem("userProfile"),e.a(2,null);case 2:return(t=localStorage.getItem("userProfile"))&&(Be=JSON.parse(t)),e.n=3,Ae();case 3:return n=e.v,e.n=4,fetch("/.netlify/functions/user-profile",{headers:{Authorization:"Bearer ".concat(n)}});case 4:if(404!==(o=e.v).status){e.n=6;break}return e.n=5,o.json();case 5:if(!e.v.needsSetup){e.n=6;break}return console.log(" First-time user - showing profile setup"),new Ve,e.a(2,null);case 6:if(o.ok){e.n=7;break}throw new Error("Failed to load profile");case 7:return e.n=8,o.json();case 8:return i=e.v,Be=i,localStorage.setItem("userProfile",JSON.stringify(i)),console.log(" User profile loaded:",i.username),e.a(2,i);case 9:return e.p=9,r=e.v,console.error("Error loading user profile:",r),e.a(2,null)}},e,null,[[0,9]])}))).apply(this,arguments)}function $e(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function r(n,o,i,r){var c=o&&o.prototype instanceof s?o:s,u=Object.create(c.prototype);return Qe(u,"_invoke",function(n,o,i){var r,s,c,u=0,l=i||[],d=!1,h={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return r=t,s=0,c=e,h.n=n,a}};function p(n,o){for(s=n,c=o,t=0;!d&&u&&!i&&t<l.length;t++){var i,r=l[t],p=h.p,f=r[2];n>3?(i=f===o)&&(c=r[(s=r[4])?5:(s=3,3)],r[4]=r[5]=e):r[0]<=p&&((i=n<2&&p<r[1])?(s=0,h.v=o,h.n=r[1]):p<f&&(i=n<3||r[0]>o||o>f)&&(r[4]=n,r[5]=o,h.n=f,s=0))}if(i||n>1)return a;throw d=!0,o}return function(i,l,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,f),s=l,c=f;(t=s<2?e:c)||!d;){r||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,r){if(s||(i="next"),t=r[i]){if(!(t=t.call(r,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=r.return)&&t.call(r),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);r=e}else if((t=(d=h.n<0)?c:n.call(o,h))!==a)break}catch(t){r=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,i,r),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][o]?t(t([][o]())):(Qe(t={},o,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Qe(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,Qe(d,"constructor",u),Qe(u,"constructor",c),c.displayName="GeneratorFunction",Qe(u,i,"GeneratorFunction"),Qe(d),Qe(d,i,"Generator"),Qe(d,o,function(){return this}),Qe(d,"toString",function(){return"[object Generator]"}),($e=function(){return{w:r,m:h}})()}function Qe(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Qe=function(e,t,n,o){function r(t,n){Qe(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(r("next",0),r("throw",1),r("return",2))},Qe(e,t,n,o)}function et(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,i)}function tt(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function a(e){et(r,o,i,a,s,"next",e)}function s(e){et(r,o,i,a,s,"throw",e)}a(void 0)})}}function nt(){return(nt=tt($e().m(function e(){var t,n;return $e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ke();case 1:return e.n=2,Ye();case 2:if(t=new URLSearchParams(window.location.search),n=t.get("username")){e.n=3;break}return at("No username provided"),e.a(2);case 3:return e.n=4,ot(n);case 4:return e.a(2)}},e)}))).apply(this,arguments)}function ot(e){return it.apply(this,arguments)}function it(){return(it=tt($e().m(function e(t){var n,o;return $e().w(function(e){for(;;)switch(e.p=e.n){case 0:return document.getElementById("profile-container"),e.p=1,e.n=2,fetch("/.netlify/functions/user-profile-public?username=".concat(encodeURIComponent(t)));case 2:if((n=e.v).ok){e.n=3;break}return 404===n.status?at("User not found"):at("Failed to load profile"),e.a(2);case 3:return e.n=4,n.json();case 4:rt(e.v),e.n=6;break;case 5:e.p=5,o=e.v,console.error("Error loading profile:",o),at("Failed to load profile");case 6:return e.a(2)}},e,null,[[1,5]])}))).apply(this,arguments)}function rt(e){var t=document.getElementById("profile-container"),n=(null==Be?void 0:Be.username)===e.username,o=function(e,t){return"initials"===e.type?'<div class="avatar-initials">'.concat(e.initials,"</div>"):e.url?'<img src="'.concat(e.url,'" alt="').concat(st(t),'" />'):'<div class="avatar-initials">??</div>'}(e.avatar,e.profile.displayName);t.innerHTML='\n    <div class="profile-card">\n      <div class="profile-header">\n        <div class="profile-avatar-large">\n          '.concat(o,'\n        </div>\n        <div class="profile-info">\n          <h1 class="profile-display-name">').concat(st(e.profile.displayName),'</h1>\n          <p class="profile-username">@').concat(st(e.username),"</p>\n          ").concat(e.profile.location?'\n            <p class="profile-location"> '.concat(st(e.profile.location),"</p>\n          "):"","\n          ").concat(n?'\n            <button class="btn-edit-profile" onclick="editProfile()">Edit Profile</button>\n          ':"","\n        </div>\n      </div>\n\n      ").concat(e.profile.bio?'\n        <div class="profile-bio">\n          <h2>About</h2>\n          <p>'.concat(st(e.profile.bio),"</p>\n        </div>\n      "):"","\n\n      ").concat(e.profile.website?'\n        <div class="profile-website">\n          <a href="'.concat(st(e.profile.website),'" target="_blank" rel="noopener noreferrer">\n             ').concat(st(e.profile.website),"\n          </a>\n        </div>\n      "):"",'\n\n      <div class="profile-stats">\n        <div class="stat">\n          <div class="stat-value">').concat(e.stats.recipesCreated,'</div>\n          <div class="stat-label">Recipes</div>\n        </div>\n        <div class="stat">\n          <div class="stat-value">').concat(e.stats.reviewsWritten,'</div>\n          <div class="stat-label">Reviews</div>\n        </div>\n        <div class="stat">\n          <div class="stat-value">').concat(e.stats.likesReceived,'</div>\n          <div class="stat-label">Likes</div>\n        </div>\n      </div>\n\n      ').concat(e.recentReviews&&e.recentReviews.length>0?'\n        <div class="profile-section">\n          <h2>Recent Reviews</h2>\n          <div class="recent-reviews">\n            '.concat(e.recentReviews.map(function(e){return'\n              <div class="review-item">\n                <div class="review-rating">'.concat("".repeat(e.rating),'</div>\n                <a href="/article.html#').concat(e.recipeId,'" class="review-recipe">\n                  ').concat(st(e.recipeName||"Recipe"),'\n                </a>\n                <p class="review-comment">').concat(st(e.comment).substring(0,150)).concat(e.comment.length>150?"...":"","</p>\n              </div>\n            ")}).join(""),"\n          </div>\n        </div>\n      "):"","\n    </div>\n  ")}function at(e){document.getElementById("profile-container").innerHTML='\n    <div class="error-message">\n      <h2> '.concat(e,'</h2>\n      <p><a href="/">Go back home</a></p>\n    </div>\n  ')}function st(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}window.editProfile=function(){alert("Edit profile modal coming soon!")},function(){nt.apply(this,arguments)}();
//# sourceMappingURL=profile-bundle.js.map