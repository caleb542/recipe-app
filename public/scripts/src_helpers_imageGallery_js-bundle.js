/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
export const __webpack_esm_id__ = "src_helpers_imageGallery_js";
export const __webpack_esm_ids__ = ["src_helpers_imageGallery_js"];
export const __webpack_esm_modules__ = {

/***/ "./src/helpers/duplicateCheck.js":
/*!***************************************!*\
  !*** ./src/helpers/duplicateCheck.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkDuplicateByFilename: () => (/* binding */ checkDuplicateByFilename),\n/* harmony export */   checkForDuplicate: () => (/* binding */ checkForDuplicate),\n/* harmony export */   generateFileHash: () => (/* binding */ generateFileHash)\n/* harmony export */ });\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// src/helpers/duplicateCheck.js\n\n/**\r\n * Generate hash from file for duplicate detection\r\n * @param {File|Blob} file\r\n * @returns {Promise<string>} - Hash string\r\n */\nfunction generateFileHash(_x) {\n  return _generateFileHash.apply(this, arguments);\n}\n\n/**\r\n * Check if image already uploaded\r\n * @param {File|Blob} file\r\n * @param {Array} existingImages - Recipe's images array\r\n * @returns {Promise<Object|null>} - Existing image if found, null otherwise\r\n */\nfunction _generateFileHash() {\n  _generateFileHash = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(file) {\n    var arrayBuffer, hashBuffer, hashArray, hashHex;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          _context.n = 1;\n          return file.arrayBuffer();\n        case 1:\n          arrayBuffer = _context.v;\n          _context.n = 2;\n          return crypto.subtle.digest('SHA-256', arrayBuffer);\n        case 2:\n          hashBuffer = _context.v;\n          hashArray = Array.from(new Uint8Array(hashBuffer));\n          hashHex = hashArray.map(function (b) {\n            return b.toString(16).padStart(2, '0');\n          }).join('');\n          return _context.a(2, hashHex);\n      }\n    }, _callee);\n  }));\n  return _generateFileHash.apply(this, arguments);\n}\nfunction checkForDuplicate(_x2, _x3) {\n  return _checkForDuplicate.apply(this, arguments);\n}\n\n/**\r\n * Check by filename (simpler but less accurate)\r\n * @param {string} filename\r\n * @param {Array} existingImages\r\n * @returns {Object|null}\r\n */\nfunction _checkForDuplicate() {\n  _checkForDuplicate = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(file, existingImages) {\n    var fileHash, duplicate;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          if (!(!existingImages || existingImages.length === 0)) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, null);\n        case 1:\n          _context2.n = 2;\n          return generateFileHash(file);\n        case 2:\n          fileHash = _context2.v;\n          // Check if any existing image has this hash\n          duplicate = existingImages.find(function (img) {\n            return img.fileHash === fileHash;\n          });\n          return _context2.a(2, duplicate || null);\n      }\n    }, _callee2);\n  }));\n  return _checkForDuplicate.apply(this, arguments);\n}\nfunction checkDuplicateByFilename(filename, existingImages) {\n  if (!existingImages || existingImages.length === 0) {\n    return null;\n  }\n\n  // Normalize filename (remove path, spaces, special chars)\n  var normalizedName = filename.toLowerCase().trim().replace(/\\s+/g, '-');\n  var duplicate = existingImages.find(function (img) {\n    var _img$metadata;\n    if ((_img$metadata = img.metadata) !== null && _img$metadata !== void 0 && _img$metadata.originalFilename) {\n      var existingName = img.metadata.originalFilename.toLowerCase().trim().replace(/\\s+/g, '-');\n      return existingName === normalizedName;\n    }\n    return false;\n  });\n  return duplicate || null;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHO1lBQUEsT0FBSUEsR0FBRyxDQUFDSixRQUFRLEtBQUtBLFFBQVE7VUFBQSxFQUFDO1VBQUEsT0FBQUUsU0FBQSxDQUFBOUQsQ0FBQSxJQUVoRTZELFNBQVMsSUFBSSxJQUFJO01BQUE7SUFBQSxHQUFBSCxRQUFBO0VBQUEsQ0FDekI7RUFBQSxPQUFBRCxrQkFBQSxDQUFBM0IsS0FBQSxPQUFBRCxTQUFBO0FBQUE7QUFRTSxTQUFTb0Msd0JBQXdCQSxDQUFDQyxRQUFRLEVBQUVQLGNBQWMsRUFBRTtFQUNqRSxJQUFJLENBQUNBLGNBQWMsSUFBSUEsY0FBYyxDQUFDeEQsTUFBTSxLQUFLLENBQUMsRUFBRTtJQUNsRCxPQUFPLElBQUk7RUFDYjs7RUFFQTtFQUNBLElBQU1nRSxjQUFjLEdBQUdELFFBQVEsQ0FBQ0UsV0FBVyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7RUFFekUsSUFBTVQsU0FBUyxHQUFHRixjQUFjLENBQUNJLElBQUksQ0FBQyxVQUFBQyxHQUFHLEVBQUk7SUFBQSxJQUFBTyxhQUFBO0lBQzNDLEtBQUFBLGFBQUEsR0FBSVAsR0FBRyxDQUFDUSxRQUFRLGNBQUFELGFBQUEsZUFBWkEsYUFBQSxDQUFjRSxnQkFBZ0IsRUFBRTtNQUNsQyxJQUFNQyxZQUFZLEdBQUdWLEdBQUcsQ0FBQ1EsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQ0wsV0FBVyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7TUFDNUYsT0FBT0ksWUFBWSxLQUFLUCxjQUFjO0lBQ3hDO0lBQ0EsT0FBTyxLQUFLO0VBQ2QsQ0FBQyxDQUFDO0VBRUYsT0FBT04sU0FBUyxJQUFJLElBQUk7QUFDMUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWNpcGUtbWUtd2VicGFjazUvLi9zcmMvaGVscGVycy9kdXBsaWNhdGVDaGVjay5qcz8wYzZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9oZWxwZXJzL2R1cGxpY2F0ZUNoZWNrLmpzXHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgaGFzaCBmcm9tIGZpbGUgZm9yIGR1cGxpY2F0ZSBkZXRlY3Rpb25cclxuICogQHBhcmFtIHtGaWxlfEJsb2J9IGZpbGVcclxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBIYXNoIHN0cmluZ1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlRmlsZUhhc2goZmlsZSkge1xyXG4gIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xyXG4gIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGFycmF5QnVmZmVyKTtcclxuICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcclxuICBjb25zdCBoYXNoSGV4ID0gaGFzaEFycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xyXG4gIHJldHVybiBoYXNoSGV4O1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgaW1hZ2UgYWxyZWFkeSB1cGxvYWRlZFxyXG4gKiBAcGFyYW0ge0ZpbGV8QmxvYn0gZmlsZVxyXG4gKiBAcGFyYW0ge0FycmF5fSBleGlzdGluZ0ltYWdlcyAtIFJlY2lwZSdzIGltYWdlcyBhcnJheVxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IC0gRXhpc3RpbmcgaW1hZ2UgaWYgZm91bmQsIG51bGwgb3RoZXJ3aXNlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tGb3JEdXBsaWNhdGUoZmlsZSwgZXhpc3RpbmdJbWFnZXMpIHtcclxuICBpZiAoIWV4aXN0aW5nSW1hZ2VzIHx8IGV4aXN0aW5nSW1hZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCBmaWxlSGFzaCA9IGF3YWl0IGdlbmVyYXRlRmlsZUhhc2goZmlsZSk7XHJcbiAgXHJcbiAgLy8gQ2hlY2sgaWYgYW55IGV4aXN0aW5nIGltYWdlIGhhcyB0aGlzIGhhc2hcclxuICBjb25zdCBkdXBsaWNhdGUgPSBleGlzdGluZ0ltYWdlcy5maW5kKGltZyA9PiBpbWcuZmlsZUhhc2ggPT09IGZpbGVIYXNoKTtcclxuICBcclxuICByZXR1cm4gZHVwbGljYXRlIHx8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBieSBmaWxlbmFtZSAoc2ltcGxlciBidXQgbGVzcyBhY2N1cmF0ZSlcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVuYW1lXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGV4aXN0aW5nSW1hZ2VzXHJcbiAqIEByZXR1cm5zIHtPYmplY3R8bnVsbH1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0R1cGxpY2F0ZUJ5RmlsZW5hbWUoZmlsZW5hbWUsIGV4aXN0aW5nSW1hZ2VzKSB7XHJcbiAgaWYgKCFleGlzdGluZ0ltYWdlcyB8fCBleGlzdGluZ0ltYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy8gTm9ybWFsaXplIGZpbGVuYW1lIChyZW1vdmUgcGF0aCwgc3BhY2VzLCBzcGVjaWFsIGNoYXJzKVxyXG4gIGNvbnN0IG5vcm1hbGl6ZWROYW1lID0gZmlsZW5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xyXG4gIFxyXG4gIGNvbnN0IGR1cGxpY2F0ZSA9IGV4aXN0aW5nSW1hZ2VzLmZpbmQoaW1nID0+IHtcclxuICAgIGlmIChpbWcubWV0YWRhdGE/Lm9yaWdpbmFsRmlsZW5hbWUpIHtcclxuICAgICAgY29uc3QgZXhpc3RpbmdOYW1lID0gaW1nLm1ldGFkYXRhLm9yaWdpbmFsRmlsZW5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xyXG4gICAgICByZXR1cm4gZXhpc3RpbmdOYW1lID09PSBub3JtYWxpemVkTmFtZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9KTtcclxuICBcclxuICByZXR1cm4gZHVwbGljYXRlIHx8IG51bGw7XHJcbn0iXSwibmFtZXMiOlsiZSIsInQiLCJyIiwiU3ltYm9sIiwibiIsIml0ZXJhdG9yIiwibyIsInRvU3RyaW5nVGFnIiwiaSIsImMiLCJwcm90b3R5cGUiLCJHZW5lcmF0b3IiLCJ1IiwiT2JqZWN0IiwiY3JlYXRlIiwiX3JlZ2VuZXJhdG9yRGVmaW5lMiIsImYiLCJwIiwieSIsIkciLCJ2IiwiYSIsImQiLCJiaW5kIiwibGVuZ3RoIiwibCIsIlR5cGVFcnJvciIsImNhbGwiLCJkb25lIiwidmFsdWUiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImRpc3BsYXlOYW1lIiwiX3JlZ2VuZXJhdG9yIiwidyIsIm0iLCJkZWZpbmVQcm9wZXJ0eSIsIl9yZWdlbmVyYXRvckRlZmluZSIsIl9pbnZva2UiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJfYXN5bmNUb0dlbmVyYXRvciIsImFyZ3VtZW50cyIsImFwcGx5IiwiX25leHQiLCJfdGhyb3ciLCJnZW5lcmF0ZUZpbGVIYXNoIiwiX3giLCJfZ2VuZXJhdGVGaWxlSGFzaCIsIl9jYWxsZWUiLCJmaWxlIiwiYXJyYXlCdWZmZXIiLCJoYXNoQnVmZmVyIiwiaGFzaEFycmF5IiwiaGFzaEhleCIsIl9jb250ZXh0IiwiY3J5cHRvIiwic3VidGxlIiwiZGlnZXN0IiwiQXJyYXkiLCJmcm9tIiwiVWludDhBcnJheSIsIm1hcCIsImIiLCJ0b1N0cmluZyIsInBhZFN0YXJ0Iiwiam9pbiIsImNoZWNrRm9yRHVwbGljYXRlIiwiX3gyIiwiX3gzIiwiX2NoZWNrRm9yRHVwbGljYXRlIiwiX2NhbGxlZTIiLCJleGlzdGluZ0ltYWdlcyIsImZpbGVIYXNoIiwiZHVwbGljYXRlIiwiX2NvbnRleHQyIiwiZmluZCIsImltZyIsImNoZWNrRHVwbGljYXRlQnlGaWxlbmFtZSIsImZpbGVuYW1lIiwibm9ybWFsaXplZE5hbWUiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJyZXBsYWNlIiwiX2ltZyRtZXRhZGF0YSIsIm1ldGFkYXRhIiwib3JpZ2luYWxGaWxlbmFtZSIsImV4aXN0aW5nTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/helpers/duplicateCheck.js\n\n}");

/***/ }),

/***/ "./src/helpers/globalImageRegistry.js":
/*!********************************************!*\
  !*** ./src/helpers/globalImageRegistry.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanupOrphanedImages: () => (/* binding */ cleanupOrphanedImages),\n/* harmony export */   findExistingImage: () => (/* binding */ findExistingImage),\n/* harmony export */   getImageRegistry: () => (/* binding */ getImageRegistry),\n/* harmony export */   getImageStats: () => (/* binding */ getImageStats),\n/* harmony export */   registerImage: () => (/* binding */ registerImage),\n/* harmony export */   saveImageRegistry: () => (/* binding */ saveImageRegistry),\n/* harmony export */   unregisterImageFromRecipe: () => (/* binding */ unregisterImageFromRecipe)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// src/helpers/globalImageRegistry.js\n\n/**\r\n * Global image registry for deduplication across all recipes\r\n * Structure:\r\n * {\r\n *   \"hash123\": {\r\n *     url: \"https://cloudinary.com/.../image.jpg\",\r\n *     cloudinaryPublicId: \"recipes/abc123\",\r\n *     uploadedAt: \"2025-12-18T10:30:00Z\",\r\n *     usedByRecipes: [\"recipe-1\", \"recipe-2\"],\r\n *     metadata: { originalFilename: \"placeholder.jpg\", size: 524288 }\r\n *   }\r\n * }\r\n */\n\nvar REGISTRY_KEY = 'imageRegistry';\n\n/**\r\n * Get the global image registry\r\n */\nfunction getImageRegistry() {\n  try {\n    var data = localStorage.getItem(REGISTRY_KEY);\n    return data ? JSON.parse(data) : {};\n  } catch (error) {\n    console.error('Failed to load image registry:', error);\n    return {};\n  }\n}\n\n/**\r\n * Save the global image registry\r\n */\nfunction saveImageRegistry(registry) {\n  try {\n    localStorage.setItem(REGISTRY_KEY, JSON.stringify(registry));\n  } catch (error) {\n    console.error('Failed to save image registry:', error);\n  }\n}\n\n/**\r\n * Check if image already exists globally (across all recipes)\r\n * @param {string} fileHash - SHA-256 hash of file\r\n * @returns {Object|null} - Image data if exists, null otherwise\r\n */\nfunction findExistingImage(fileHash) {\n  var registry = getImageRegistry();\n  return registry[fileHash] || null;\n}\n\n/**\r\n * Register a new uploaded image\r\n * @param {string} fileHash - SHA-256 hash of file\r\n * @param {Object} imageData - Image data (url, cloudinaryPublicId, etc.)\r\n * @param {string} recipeId - Recipe ID using this image\r\n */\nfunction registerImage(fileHash, imageData, recipeId) {\n  var registry = getImageRegistry();\n  if (registry[fileHash]) {\n    // Image already exists, add this recipe to usage list\n    if (!registry[fileHash].usedByRecipes.includes(recipeId)) {\n      registry[fileHash].usedByRecipes.push(recipeId);\n      registry[fileHash].lastUsedAt = new Date().toISOString();\n    }\n  } else {\n    // New image, register it\n    registry[fileHash] = _objectSpread(_objectSpread({}, imageData), {}, {\n      uploadedAt: new Date().toISOString(),\n      lastUsedAt: new Date().toISOString(),\n      usedByRecipes: [recipeId]\n    });\n  }\n  saveImageRegistry(registry);\n}\n\n/**\r\n * Remove recipe from image usage (when image removed from recipe)\r\n * @param {string} fileHash - SHA-256 hash of file\r\n * @param {string} recipeId - Recipe ID to remove\r\n */\nfunction unregisterImageFromRecipe(fileHash, recipeId) {\n  var registry = getImageRegistry();\n  if (registry[fileHash]) {\n    registry[fileHash].usedByRecipes = registry[fileHash].usedByRecipes.filter(function (id) {\n      return id !== recipeId;\n    });\n\n    // If no recipes use this image anymore, you could optionally delete from Cloudinary\n    // (but keeping it is safer in case of orphaned references)\n\n    saveImageRegistry(registry);\n  }\n}\n\n/**\r\n * Get statistics about global image usage\r\n */\nfunction getImageStats() {\n  var registry = getImageRegistry();\n  var images = Object.values(registry);\n  return {\n    totalImages: images.length,\n    totalUsage: images.reduce(function (sum, img) {\n      return sum + img.usedByRecipes.length;\n    }, 0),\n    sharedImages: images.filter(function (img) {\n      return img.usedByRecipes.length > 1;\n    }).length,\n    orphanedImages: images.filter(function (img) {\n      return img.usedByRecipes.length === 0;\n    }).length\n  };\n}\n\n/**\r\n * Clean up orphaned images (not used by any recipe)\r\n */\nfunction cleanupOrphanedImages() {\n  var registry = getImageRegistry();\n  var cleaned = {};\n  Object.entries(registry).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      hash = _ref2[0],\n      imageData = _ref2[1];\n    if (imageData.usedByRecipes.length > 0) {\n      cleaned[hash] = imageData;\n    } else {\n      var _imageData$metadata;\n      console.log('ðŸ—‘ï¸ Orphaned image:', (_imageData$metadata = imageData.metadata) === null || _imageData$metadata === void 0 ? void 0 : _imageData$metadata.originalFilename);\n    }\n  });\n  saveImageRegistry(cleaned);\n  return {\n    before: Object.keys(registry).length,\n    after: Object.keys(cleaned).length,\n    removed: Object.keys(registry).length - Object.keys(cleaned).length\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFBO01BQXJCRyxJQUFJLEdBQUFGLEtBQUE7TUFBRTlCLFNBQVMsR0FBQThCLEtBQUE7SUFDaEQsSUFBSTlCLFNBQVMsQ0FBQ0UsYUFBYSxDQUFDZ0IsTUFBTSxHQUFHLENBQUMsRUFBRTtNQUN0Q1EsT0FBTyxDQUFDTSxJQUFJLENBQUMsR0FBR2hDLFNBQVM7SUFDM0IsQ0FBQyxNQUFNO01BQUEsSUFBQWlDLG1CQUFBO01BQ0x6QyxPQUFPLENBQUMwQyxHQUFHLENBQUMscUJBQXFCLEdBQUFELG1CQUFBLEdBQUVqQyxTQUFTLENBQUNtQyxRQUFRLGNBQUFGLG1CQUFBLHVCQUFsQkEsbUJBQUEsQ0FBb0JHLGdCQUFnQixDQUFDO0lBQzFFO0VBQ0YsQ0FBQyxDQUFDO0VBRUYzQyxpQkFBaUIsQ0FBQ2lDLE9BQU8sQ0FBQztFQUUxQixPQUFPO0lBQ0xXLE1BQU0sRUFBRXRCLE1BQU0sQ0FBQ3VCLElBQUksQ0FBQzVDLFFBQVEsQ0FBQyxDQUFDd0IsTUFBTTtJQUNwQ3FCLEtBQUssRUFBRXhCLE1BQU0sQ0FBQ3VCLElBQUksQ0FBQ1osT0FBTyxDQUFDLENBQUNSLE1BQU07SUFDbENzQixPQUFPLEVBQUV6QixNQUFNLENBQUN1QixJQUFJLENBQUM1QyxRQUFRLENBQUMsQ0FBQ3dCLE1BQU0sR0FBR0gsTUFBTSxDQUFDdUIsSUFBSSxDQUFDWixPQUFPLENBQUMsQ0FBQ1I7RUFDL0QsQ0FBQztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVjaXBlLW1lLXdlYnBhY2s1Ly4vc3JjL2hlbHBlcnMvZ2xvYmFsSW1hZ2VSZWdpc3RyeS5qcz9mMDZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9oZWxwZXJzL2dsb2JhbEltYWdlUmVnaXN0cnkuanNcclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgaW1hZ2UgcmVnaXN0cnkgZm9yIGRlZHVwbGljYXRpb24gYWNyb3NzIGFsbCByZWNpcGVzXHJcbiAqIFN0cnVjdHVyZTpcclxuICoge1xyXG4gKiAgIFwiaGFzaDEyM1wiOiB7XHJcbiAqICAgICB1cmw6IFwiaHR0cHM6Ly9jbG91ZGluYXJ5LmNvbS8uLi4vaW1hZ2UuanBnXCIsXHJcbiAqICAgICBjbG91ZGluYXJ5UHVibGljSWQ6IFwicmVjaXBlcy9hYmMxMjNcIixcclxuICogICAgIHVwbG9hZGVkQXQ6IFwiMjAyNS0xMi0xOFQxMDozMDowMFpcIixcclxuICogICAgIHVzZWRCeVJlY2lwZXM6IFtcInJlY2lwZS0xXCIsIFwicmVjaXBlLTJcIl0sXHJcbiAqICAgICBtZXRhZGF0YTogeyBvcmlnaW5hbEZpbGVuYW1lOiBcInBsYWNlaG9sZGVyLmpwZ1wiLCBzaXplOiA1MjQyODggfVxyXG4gKiAgIH1cclxuICogfVxyXG4gKi9cclxuXHJcbmNvbnN0IFJFR0lTVFJZX0tFWSA9ICdpbWFnZVJlZ2lzdHJ5JztcclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIGdsb2JhbCBpbWFnZSByZWdpc3RyeVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEltYWdlUmVnaXN0cnkoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShSRUdJU1RSWV9LRVkpO1xyXG4gICAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDoge307XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGltYWdlIHJlZ2lzdHJ5OicsIGVycm9yKTtcclxuICAgIHJldHVybiB7fTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTYXZlIHRoZSBnbG9iYWwgaW1hZ2UgcmVnaXN0cnlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlSW1hZ2VSZWdpc3RyeShyZWdpc3RyeSkge1xyXG4gIHRyeSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShSRUdJU1RSWV9LRVksIEpTT04uc3RyaW5naWZ5KHJlZ2lzdHJ5KSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGltYWdlIHJlZ2lzdHJ5OicsIGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBpbWFnZSBhbHJlYWR5IGV4aXN0cyBnbG9iYWxseSAoYWNyb3NzIGFsbCByZWNpcGVzKVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZUhhc2ggLSBTSEEtMjU2IGhhc2ggb2YgZmlsZVxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fG51bGx9IC0gSW1hZ2UgZGF0YSBpZiBleGlzdHMsIG51bGwgb3RoZXJ3aXNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZmluZEV4aXN0aW5nSW1hZ2UoZmlsZUhhc2gpIHtcclxuICBjb25zdCByZWdpc3RyeSA9IGdldEltYWdlUmVnaXN0cnkoKTtcclxuICByZXR1cm4gcmVnaXN0cnlbZmlsZUhhc2hdIHx8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWdpc3RlciBhIG5ldyB1cGxvYWRlZCBpbWFnZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZUhhc2ggLSBTSEEtMjU2IGhhc2ggb2YgZmlsZVxyXG4gKiBAcGFyYW0ge09iamVjdH0gaW1hZ2VEYXRhIC0gSW1hZ2UgZGF0YSAodXJsLCBjbG91ZGluYXJ5UHVibGljSWQsIGV0Yy4pXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWNpcGVJZCAtIFJlY2lwZSBJRCB1c2luZyB0aGlzIGltYWdlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJJbWFnZShmaWxlSGFzaCwgaW1hZ2VEYXRhLCByZWNpcGVJZCkge1xyXG4gIGNvbnN0IHJlZ2lzdHJ5ID0gZ2V0SW1hZ2VSZWdpc3RyeSgpO1xyXG4gIFxyXG4gIGlmIChyZWdpc3RyeVtmaWxlSGFzaF0pIHtcclxuICAgIC8vIEltYWdlIGFscmVhZHkgZXhpc3RzLCBhZGQgdGhpcyByZWNpcGUgdG8gdXNhZ2UgbGlzdFxyXG4gICAgaWYgKCFyZWdpc3RyeVtmaWxlSGFzaF0udXNlZEJ5UmVjaXBlcy5pbmNsdWRlcyhyZWNpcGVJZCkpIHtcclxuICAgICAgcmVnaXN0cnlbZmlsZUhhc2hdLnVzZWRCeVJlY2lwZXMucHVzaChyZWNpcGVJZCk7XHJcbiAgICAgIHJlZ2lzdHJ5W2ZpbGVIYXNoXS5sYXN0VXNlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBOZXcgaW1hZ2UsIHJlZ2lzdGVyIGl0XHJcbiAgICByZWdpc3RyeVtmaWxlSGFzaF0gPSB7XHJcbiAgICAgIC4uLmltYWdlRGF0YSxcclxuICAgICAgdXBsb2FkZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBsYXN0VXNlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHVzZWRCeVJlY2lwZXM6IFtyZWNpcGVJZF1cclxuICAgIH07XHJcbiAgfVxyXG4gIFxyXG4gIHNhdmVJbWFnZVJlZ2lzdHJ5KHJlZ2lzdHJ5KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSByZWNpcGUgZnJvbSBpbWFnZSB1c2FnZSAod2hlbiBpbWFnZSByZW1vdmVkIGZyb20gcmVjaXBlKVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZUhhc2ggLSBTSEEtMjU2IGhhc2ggb2YgZmlsZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVjaXBlSWQgLSBSZWNpcGUgSUQgdG8gcmVtb3ZlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdW5yZWdpc3RlckltYWdlRnJvbVJlY2lwZShmaWxlSGFzaCwgcmVjaXBlSWQpIHtcclxuICBjb25zdCByZWdpc3RyeSA9IGdldEltYWdlUmVnaXN0cnkoKTtcclxuICBcclxuICBpZiAocmVnaXN0cnlbZmlsZUhhc2hdKSB7XHJcbiAgICByZWdpc3RyeVtmaWxlSGFzaF0udXNlZEJ5UmVjaXBlcyA9IHJlZ2lzdHJ5W2ZpbGVIYXNoXS51c2VkQnlSZWNpcGVzLmZpbHRlcihcclxuICAgICAgaWQgPT4gaWQgIT09IHJlY2lwZUlkXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyBJZiBubyByZWNpcGVzIHVzZSB0aGlzIGltYWdlIGFueW1vcmUsIHlvdSBjb3VsZCBvcHRpb25hbGx5IGRlbGV0ZSBmcm9tIENsb3VkaW5hcnlcclxuICAgIC8vIChidXQga2VlcGluZyBpdCBpcyBzYWZlciBpbiBjYXNlIG9mIG9ycGhhbmVkIHJlZmVyZW5jZXMpXHJcbiAgICBcclxuICAgIHNhdmVJbWFnZVJlZ2lzdHJ5KHJlZ2lzdHJ5KTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgc3RhdGlzdGljcyBhYm91dCBnbG9iYWwgaW1hZ2UgdXNhZ2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRJbWFnZVN0YXRzKCkge1xyXG4gIGNvbnN0IHJlZ2lzdHJ5ID0gZ2V0SW1hZ2VSZWdpc3RyeSgpO1xyXG4gIGNvbnN0IGltYWdlcyA9IE9iamVjdC52YWx1ZXMocmVnaXN0cnkpO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICB0b3RhbEltYWdlczogaW1hZ2VzLmxlbmd0aCxcclxuICAgIHRvdGFsVXNhZ2U6IGltYWdlcy5yZWR1Y2UoKHN1bSwgaW1nKSA9PiBzdW0gKyBpbWcudXNlZEJ5UmVjaXBlcy5sZW5ndGgsIDApLFxyXG4gICAgc2hhcmVkSW1hZ2VzOiBpbWFnZXMuZmlsdGVyKGltZyA9PiBpbWcudXNlZEJ5UmVjaXBlcy5sZW5ndGggPiAxKS5sZW5ndGgsXHJcbiAgICBvcnBoYW5lZEltYWdlczogaW1hZ2VzLmZpbHRlcihpbWcgPT4gaW1nLnVzZWRCeVJlY2lwZXMubGVuZ3RoID09PSAwKS5sZW5ndGhcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ2xlYW4gdXAgb3JwaGFuZWQgaW1hZ2VzIChub3QgdXNlZCBieSBhbnkgcmVjaXBlKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFudXBPcnBoYW5lZEltYWdlcygpIHtcclxuICBjb25zdCByZWdpc3RyeSA9IGdldEltYWdlUmVnaXN0cnkoKTtcclxuICBjb25zdCBjbGVhbmVkID0ge307XHJcbiAgXHJcbiAgT2JqZWN0LmVudHJpZXMocmVnaXN0cnkpLmZvckVhY2goKFtoYXNoLCBpbWFnZURhdGFdKSA9PiB7XHJcbiAgICBpZiAoaW1hZ2VEYXRhLnVzZWRCeVJlY2lwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjbGVhbmVkW2hhc2hdID0gaW1hZ2VEYXRhO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gT3JwaGFuZWQgaW1hZ2U6JywgaW1hZ2VEYXRhLm1ldGFkYXRhPy5vcmlnaW5hbEZpbGVuYW1lKTtcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICBzYXZlSW1hZ2VSZWdpc3RyeShjbGVhbmVkKTtcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgYmVmb3JlOiBPYmplY3Qua2V5cyhyZWdpc3RyeSkubGVuZ3RoLFxyXG4gICAgYWZ0ZXI6IE9iamVjdC5rZXlzKGNsZWFuZWQpLmxlbmd0aCxcclxuICAgIHJlbW92ZWQ6IE9iamVjdC5rZXlzKHJlZ2lzdHJ5KS5sZW5ndGggLSBPYmplY3Qua2V5cyhjbGVhbmVkKS5sZW5ndGhcclxuICB9O1xyXG59Il0sIm5hbWVzIjpbIlJFR0lTVFJZX0tFWSIsImdldEltYWdlUmVnaXN0cnkiLCJkYXRhIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsInNhdmVJbWFnZVJlZ2lzdHJ5IiwicmVnaXN0cnkiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZmluZEV4aXN0aW5nSW1hZ2UiLCJmaWxlSGFzaCIsInJlZ2lzdGVySW1hZ2UiLCJpbWFnZURhdGEiLCJyZWNpcGVJZCIsInVzZWRCeVJlY2lwZXMiLCJpbmNsdWRlcyIsInB1c2giLCJsYXN0VXNlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiX29iamVjdFNwcmVhZCIsInVwbG9hZGVkQXQiLCJ1bnJlZ2lzdGVySW1hZ2VGcm9tUmVjaXBlIiwiZmlsdGVyIiwiaWQiLCJnZXRJbWFnZVN0YXRzIiwiaW1hZ2VzIiwiT2JqZWN0IiwidmFsdWVzIiwidG90YWxJbWFnZXMiLCJsZW5ndGgiLCJ0b3RhbFVzYWdlIiwicmVkdWNlIiwic3VtIiwiaW1nIiwic2hhcmVkSW1hZ2VzIiwib3JwaGFuZWRJbWFnZXMiLCJjbGVhbnVwT3JwaGFuZWRJbWFnZXMiLCJjbGVhbmVkIiwiZW50cmllcyIsImZvckVhY2giLCJfcmVmIiwiX3JlZjIiLCJfc2xpY2VkVG9BcnJheSIsImhhc2giLCJfaW1hZ2VEYXRhJG1ldGFkYXRhIiwibG9nIiwibWV0YWRhdGEiLCJvcmlnaW5hbEZpbGVuYW1lIiwiYmVmb3JlIiwia2V5cyIsImFmdGVyIiwicmVtb3ZlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/helpers/globalImageRegistry.js\n\n}");

/***/ }),

/***/ "./src/helpers/imageGallery.js":
/*!*************************************!*\
  !*** ./src/helpers/imageGallery.js ***!
  \*************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addUnsplashImage: () => (/* binding */ addUnsplashImage),\n/* harmony export */   renderImageGallery: () => (/* binding */ renderImageGallery),\n/* harmony export */   setupImageGallery: () => (/* binding */ setupImageGallery)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _functions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../functions.js */ \"./src/functions.js\");\n/* harmony import */ var _imageOptimizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./imageOptimizer.js */ \"./src/helpers/imageOptimizer.js\");\n/* harmony import */ var _duplicateCheck_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./duplicateCheck.js */ \"./src/helpers/duplicateCheck.js\");\n/* harmony import */ var _globalImageRegistry_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./globalImageRegistry.js */ \"./src/helpers/globalImageRegistry.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_functions_js__WEBPACK_IMPORTED_MODULE_1__]);\nvar __webpack_async_dependencies_result__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n_functions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_async_dependencies_result__[0];\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// src/helpers/imageGallery.js\n\n\n\n\n\nvar CLOUDINARY_CLOUD_NAME = 'day1f5nz8';\nvar CLOUDINARY_UPLOAD_PRESET = 'recipe_images';\n\n/**\r\n * Setup image gallery with upload, ordering, and feature selection\r\n * @param {string} recipeId - Current recipe ID\r\n */\nfunction setupImageGallery(recipeId) {\n  var uploadInput = document.getElementById('cloudinary-upload');\n  if (!uploadInput) {\n    console.warn('Image upload input not found');\n    return;\n  }\n\n  // Handle Cloudinary upload\n  uploadInput.addEventListener('change', /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(e) {\n      var file, optimizedBlob, fileHash, existingImage, _existingImage$metada, usedInRecipes, shouldReuse, _existingImage$metada2, _imageData, recipes, recipe, duplicateByName, shouldContinue, originalSize, optimizedSize, savings, _yield$uploadToCloudi, url, publicId, imageData, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.p = _context.n) {\n          case 0:\n            file = e.target.files[0];\n            if (file) {\n              _context.n = 1;\n              break;\n            }\n            return _context.a(2);\n          case 1:\n            if (!file.type.startsWith('video/')) {\n              _context.n = 2;\n              break;\n            }\n            showUploadStatus('âŒ Video files not supported. Please upload to YouTube and paste the link instead.', 'error');\n            uploadInput.value = '';\n            return _context.a(2);\n          case 2:\n            if (file.type.startsWith('image/')) {\n              _context.n = 3;\n              break;\n            }\n            showUploadStatus('Please select an image file', 'error');\n            uploadInput.value = '';\n            return _context.a(2);\n          case 3:\n            if (!(file.size > 20 * 1024 * 1024)) {\n              _context.n = 4;\n              break;\n            }\n            showUploadStatus('Image must be smaller than 20MB', 'error');\n            return _context.a(2);\n          case 4:\n            _context.p = 4;\n            showUploadStatus('Checking for duplicates...', 'uploading');\n\n            // Optimize first (so hash matches what's stored)\n            _context.n = 5;\n            return (0,_imageOptimizer_js__WEBPACK_IMPORTED_MODULE_2__.optimizeImage)(file, _imageOptimizer_js__WEBPACK_IMPORTED_MODULE_2__.IMAGE_PRESETS.recipeHero);\n          case 5:\n            optimizedBlob = _context.v;\n            _context.n = 6;\n            return (0,_duplicateCheck_js__WEBPACK_IMPORTED_MODULE_3__.generateFileHash)(optimizedBlob);\n          case 6:\n            fileHash = _context.v;\n            // âœ… Check GLOBAL registry (all recipes)\n            existingImage = (0,_globalImageRegistry_js__WEBPACK_IMPORTED_MODULE_4__.findExistingImage)(fileHash);\n            if (!existingImage) {\n              _context.n = 9;\n              break;\n            }\n            usedInRecipes = existingImage.usedByRecipes.length;\n            shouldReuse = confirm(\"\\u2705 This image already exists!\\n\\n\" + \"File: \".concat(((_existingImage$metada = existingImage.metadata) === null || _existingImage$metada === void 0 ? void 0 : _existingImage$metada.originalFilename) || 'Unknown', \"\\n\") + \"Used in: \".concat(usedInRecipes, \" recipe(s)\\n\") + \"Uploaded: \".concat(new Date(existingImage.uploadedAt).toLocaleDateString(), \"\\n\\n\") + \"Reuse existing image? (Saves bandwidth & storage)\");\n            if (!shouldReuse) {\n              _context.n = 9;\n              break;\n            }\n            // âœ… Reuse existing image\n            console.log('â™»ï¸ Reusing existing image:', existingImage.url);\n            _imageData = {\n              url: existingImage.url,\n              source: 'user-upload',\n              cloudinaryPublicId: existingImage.cloudinaryPublicId,\n              fileHash: fileHash,\n              attribution: null,\n              metadata: {\n                uploadedAt: existingImage.uploadedAt,\n                originalFilename: file.name,\n                reusedFrom: (_existingImage$metada2 = existingImage.metadata) === null || _existingImage$metada2 === void 0 ? void 0 : _existingImage$metada2.originalFilename,\n                originalSize: file.size,\n                optimizedSize: optimizedBlob.size\n              }\n            };\n            _context.n = 7;\n            return addImageToRecipe(recipeId, _imageData);\n          case 7:\n            // Register this recipe as using the image\n            (0,_globalImageRegistry_js__WEBPACK_IMPORTED_MODULE_4__.registerImage)(fileHash, existingImage, recipeId);\n            _context.n = 8;\n            return renderImageGallery(recipeId);\n          case 8:\n            showUploadStatus('âœ“ Image reused! (No upload needed)', 'success');\n            uploadInput.value = '';\n            return _context.a(2);\n          case 9:\n            _context.n = 10;\n            return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n          case 10:\n            recipes = _context.v;\n            recipe = recipes.find(function (r) {\n              return r.id === recipeId;\n            });\n            if (!(recipe && recipe.images)) {\n              _context.n = 11;\n              break;\n            }\n            duplicateByName = (0,_duplicateCheck_js__WEBPACK_IMPORTED_MODULE_3__.checkDuplicateByFilename)(file.name, recipe.images);\n            if (!duplicateByName) {\n              _context.n = 11;\n              break;\n            }\n            shouldContinue = confirm(\"\\u26A0\\uFE0F An image named \\\"\".concat(file.name, \"\\\" already exists in this recipe.\\n\\n\") + \"Do you want to upload it anyway?\");\n            if (shouldContinue) {\n              _context.n = 11;\n              break;\n            }\n            uploadInput.value = '';\n            showUploadStatus('Upload cancelled - duplicate detected', 'error');\n            return _context.a(2);\n          case 11:\n            // Proceed with new upload\n            originalSize = (file.size / 1024).toFixed(0);\n            optimizedSize = (optimizedBlob.size / 1024).toFixed(0);\n            savings = Math.round((1 - optimizedBlob.size / file.size) * 100);\n            console.log(\"\\uD83D\\uDCC9 Size reduction: \".concat(originalSize, \"KB \\u2192 \").concat(optimizedSize, \"KB (\").concat(savings, \"% smaller)\"));\n            showUploadStatus('Uploading optimized image...', 'uploading');\n\n            // Upload to Cloudinary\n            _context.n = 12;\n            return uploadToCloudinary(optimizedBlob, file.name);\n          case 12:\n            _yield$uploadToCloudi = _context.v;\n            url = _yield$uploadToCloudi.url;\n            publicId = _yield$uploadToCloudi.publicId;\n            imageData = {\n              url: url,\n              source: 'user-upload',\n              cloudinaryPublicId: publicId,\n              fileHash: fileHash,\n              attribution: null,\n              metadata: {\n                uploadedAt: new Date().toISOString(),\n                originalFilename: file.name,\n                originalSize: file.size,\n                optimizedSize: optimizedBlob.size\n              }\n            }; // âœ… Register in global registry\n            (0,_globalImageRegistry_js__WEBPACK_IMPORTED_MODULE_4__.registerImage)(fileHash, imageData, recipeId);\n\n            // Add to recipe\n            _context.n = 13;\n            return addImageToRecipe(recipeId, imageData);\n          case 13:\n            _context.n = 14;\n            return renderImageGallery(recipeId);\n          case 14:\n            showUploadStatus(\"\\u2713 Image added! (Saved \".concat(savings, \"% bandwidth)\"), 'success');\n            uploadInput.value = '';\n            _context.n = 16;\n            break;\n          case 15:\n            _context.p = 15;\n            _t = _context.v;\n            console.error('Upload failed:', _t);\n            showUploadStatus(\"\\u2717 Upload failed: \".concat(_t.message), 'error');\n          case 16:\n            return _context.a(2);\n        }\n      }, _callee, null, [[4, 15]]);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n\n  // Initial render\n  renderImageGallery(recipeId);\n}\n\n/**\r\n * Add image from Unsplash (called from featureImage.js)\r\n * ALWAYS includes attribution (Unsplash requirement)\r\n * @param {string} recipeId \r\n * @param {Object} imageData \r\n */\nfunction addUnsplashImage(_x2, _x3) {\n  return _addUnsplashImage.apply(this, arguments);\n}\n\n/**\r\n * Upload to Cloudinary - returns URL and publicId\r\n */\nfunction _addUnsplashImage() {\n  _addUnsplashImage = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(recipeId, imageData) {\n    return _regenerator().w(function (_context8) {\n      while (1) switch (_context8.n) {\n        case 0:\n          _context8.n = 1;\n          return addImageToRecipe(recipeId, {\n            url: imageData.url,\n            source: 'unsplash',\n            cloudinaryPublicId: null,\n            attribution: {\n              photographer: imageData.photographer,\n              photographerUrl: imageData.photographerLink,\n              // Includes UTM params\n              requiresAttribution: true,\n              canEdit: false // Cannot edit/remove Unsplash attribution\n            }\n          });\n        case 1:\n          _context8.n = 2;\n          return renderImageGallery(recipeId);\n        case 2:\n          return _context8.a(2);\n      }\n    }, _callee8);\n  }));\n  return _addUnsplashImage.apply(this, arguments);\n}\nfunction uploadToCloudinary(_x4) {\n  return _uploadToCloudinary.apply(this, arguments);\n}\n/**\r\n * Add image to recipe\r\n */\nfunction _uploadToCloudinary() {\n  _uploadToCloudinary = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee9(fileOrBlob) {\n    var filename,\n      formData,\n      file,\n      response,\n      _error$error,\n      error,\n      data,\n      _args9 = arguments;\n    return _regenerator().w(function (_context9) {\n      while (1) switch (_context9.n) {\n        case 0:\n          filename = _args9.length > 1 && _args9[1] !== undefined ? _args9[1] : 'image.jpg';\n          formData = new FormData(); // Convert blob to file with proper name\n          if (fileOrBlob instanceof Blob && !(fileOrBlob instanceof File)) {\n            file = new File([fileOrBlob], filename, {\n              type: fileOrBlob.type\n            });\n            formData.append('file', file);\n          } else {\n            formData.append('file', fileOrBlob);\n          }\n          formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);\n          formData.append('folder', 'recipes');\n          _context9.n = 1;\n          return fetch(\"https://api.cloudinary.com/v1_1/\".concat(CLOUDINARY_CLOUD_NAME, \"/image/upload\"), {\n            method: 'POST',\n            body: formData\n          });\n        case 1:\n          response = _context9.v;\n          if (response.ok) {\n            _context9.n = 3;\n            break;\n          }\n          _context9.n = 2;\n          return response.json();\n        case 2:\n          error = _context9.v;\n          throw new Error(((_error$error = error.error) === null || _error$error === void 0 ? void 0 : _error$error.message) || 'Upload failed');\n        case 3:\n          _context9.n = 4;\n          return response.json();\n        case 4:\n          data = _context9.v;\n          return _context9.a(2, {\n            url: data.secure_url.replace('/upload/', '/upload/q_auto,f_auto/'),\n            publicId: data.public_id\n          });\n      }\n    }, _callee9);\n  }));\n  return _uploadToCloudinary.apply(this, arguments);\n}\nfunction addImageToRecipe(_x5, _x6) {\n  return _addImageToRecipe.apply(this, arguments);\n}\n/**\r\n * Render the image gallery\r\n */\nfunction _addImageToRecipe() {\n  _addImageToRecipe = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee0(recipeId, imageData) {\n    var recipes, recipe, newImage;\n    return _regenerator().w(function (_context0) {\n      while (1) switch (_context0.n) {\n        case 0:\n          _context0.n = 1;\n          return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n        case 1:\n          recipes = _context0.v;\n          recipe = recipes.find(function (r) {\n            return r.id === recipeId;\n          });\n          if (recipe) {\n            _context0.n = 2;\n            break;\n          }\n          return _context0.a(2);\n        case 2:\n          // Initialize images array if needed\n          if (!recipe.images) {\n            recipe.images = [];\n          }\n\n          // Create new image object\n          newImage = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            url: imageData.url,\n            source: imageData.source,\n            isFeatured: recipe.images.length === 0,\n            // First image is featured\n            order: recipe.images.length,\n            cloudinaryPublicId: imageData.cloudinaryPublicId || null,\n            fileHash: imageData.fileHash || null,\n            attribution: imageData.attribution || null,\n            metadata: imageData.metadata || null\n          };\n          recipe.images.push(newImage);\n          recipe.updatedAt = new Date().toISOString();\n          (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.saveRecipes)(recipes);\n          localStorage.setItem('editingRecipe', JSON.stringify(recipe));\n        case 3:\n          return _context0.a(2);\n      }\n    }, _callee0);\n  }));\n  return _addImageToRecipe.apply(this, arguments);\n}\nfunction renderImageGallery(_x7) {\n  return _renderImageGallery.apply(this, arguments);\n}\n\n/**\r\n * Format attribution for display (Unsplash-compliant)\r\n */\nfunction _renderImageGallery() {\n  _renderImageGallery = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee1(recipeId) {\n    var recipes, recipe, gallery, noImagesMsg, sortedImages;\n    return _regenerator().w(function (_context1) {\n      while (1) switch (_context1.n) {\n        case 0:\n          _context1.n = 1;\n          return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n        case 1:\n          recipes = _context1.v;\n          recipe = recipes.find(function (r) {\n            return r.id === recipeId;\n          });\n          gallery = document.getElementById('image-gallery');\n          noImagesMsg = gallery === null || gallery === void 0 ? void 0 : gallery.querySelector('.no-images');\n          if (!(!recipe || !gallery)) {\n            _context1.n = 2;\n            break;\n          }\n          return _context1.a(2);\n        case 2:\n          if (!(!recipe.images || recipe.images.length === 0)) {\n            _context1.n = 3;\n            break;\n          }\n          if (noImagesMsg) noImagesMsg.style.display = 'block';\n          gallery.innerHTML = '<p class=\"no-images\">No images yet. Upload or search to add images.</p>';\n          return _context1.a(2);\n        case 3:\n          if (noImagesMsg) noImagesMsg.style.display = 'none';\n\n          // Sort images by order\n          sortedImages = _toConsumableArray(recipe.images).sort(function (a, b) {\n            return a.order - b.order;\n          });\n          gallery.innerHTML = \"\\n    \".concat(sortedImages.map(function (img) {\n            var _img$metadata;\n            return \"\\n      <div class=\\\"image-card\\\" data-image-id=\\\"\".concat(img.id, \"\\\" draggable=\\\"true\\\">\\n        <div class=\\\"image-preview\\\">\\n          <img src=\\\"\").concat(img.url, \"\\\" alt=\\\"Recipe image\\\">\\n          \").concat(img.isFeatured ? '<div class=\"featured-badge\"><i class=\"fa-solid fa-star\"></i> Featured</div>' : '', \"\\n          \\n          \").concat(img.source === 'unsplash' ? \"\\n            <div class=\\\"source-badge unsplash-badge\\\" title=\\\"From Unsplash\\\">\\n              <i class=\\\"fa-solid fa-image\\\"></i> Unsplash\\n            </div>\\n          \" : img.attribution ? \"\\n            <div class=\\\"source-badge attribution-badge\\\" title=\\\"\".concat(formatAttributionText(img), \"\\\">\\n              <i class=\\\"fa-solid fa-copyright\\\"></i> Credit\\n            </div>\\n          \") : (_img$metadata = img.metadata) !== null && _img$metadata !== void 0 && _img$metadata.reusedFrom ? \"\\n            <div class=\\\"source-badge reused-badge\\\" title=\\\"Reused from: \".concat(img.metadata.reusedFrom, \"\\\">\\n              <i class=\\\"fa-solid fa-recycle\\\"></i> Reused\\n            </div>\\n          \") : '', \"\\n        </div>\\n        \\n        <div class=\\\"image-actions\\\">\\n          <button \\n            class=\\\"btn-small \").concat(img.isFeatured ? 'active' : '', \"\\\" \\n            onclick=\\\"window.setFeaturedImage('\").concat(recipeId, \"', '\").concat(img.id, \"')\\\"\\n            title=\\\"Set as featured image\\\"\\n          >\\n            <i class=\\\"fa-solid fa-star\\\"></i>\\n          </button>\\n          \\n          <button \\n            class=\\\"btn-small\\\" \\n            onclick=\\\"window.moveImageUp('\").concat(recipeId, \"', '\").concat(img.id, \"')\\\"\\n            title=\\\"Move up\\\"\\n            \").concat(img.order === 0 ? 'disabled' : '', \"\\n          >\\n            <i class=\\\"fa-solid fa-arrow-up\\\"></i>\\n          </button>\\n          \\n          <button \\n            class=\\\"btn-small\\\" \\n            onclick=\\\"window.moveImageDown('\").concat(recipeId, \"', '\").concat(img.id, \"')\\\"\\n            title=\\\"Move down\\\"\\n            \").concat(img.order === sortedImages.length - 1 ? 'disabled' : '', \"\\n          >\\n            <i class=\\\"fa-solid fa-arrow-down\\\"></i>\\n          </button>\\n          \\n          <button \\n            class=\\\"btn-small \").concat(img.attribution ? 'has-attribution' : '', \"\\\" \\n            onclick=\\\"window.editAttribution('\").concat(recipeId, \"', '\").concat(img.id, \"')\\\"\\n            title=\\\"\").concat(img.source === 'unsplash' ? 'Unsplash attribution (required)' : img.attribution ? 'Edit attribution' : 'Add attribution', \"\\\"\\n            \").concat(img.source === 'unsplash' ? 'disabled' : '', \"\\n          >\\n            <i class=\\\"fa-solid fa-\").concat(img.source === 'unsplash' ? 'lock' : 'copyright', \"\\\"></i>\\n          </button>\\n          \\n          <button \\n            class=\\\"btn-small btn-danger\\\" \\n            onclick=\\\"window.removeImage('\").concat(recipeId, \"', '\").concat(img.id, \"')\\\"\\n            title=\\\"Remove image\\\"\\n          >\\n            <i class=\\\"fa-solid fa-trash\\\"></i>\\n          </button>\\n        </div>\\n        \\n        \").concat(img.source === 'unsplash' || img.attribution ? \"\\n          <div class=\\\"image-credit \".concat(img.source === 'unsplash' ? 'unsplash-credit' : '', \"\\\">\\n            \").concat(formatAttribution(img), \"\\n          </div>\\n        \") : '', \"\\n      </div>\\n    \");\n          }).join(''), \"\\n  \");\n\n          // Setup drag-and-drop for reordering\n          setupDragAndDrop(recipeId);\n        case 4:\n          return _context1.a(2);\n      }\n    }, _callee1);\n  }));\n  return _renderImageGallery.apply(this, arguments);\n}\nfunction formatAttribution(image) {\n  if (!image.attribution) return '';\n  var attr = image.attribution;\n\n  // Unsplash-specific format (required by their guidelines)\n  if (image.source === 'unsplash') {\n    return \"Photo by <a href=\\\"\".concat(attr.photographerUrl, \"\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">\").concat(attr.photographer, \"</a> on <a href=\\\"https://unsplash.com/?utm_source=recipe_me&utm_medium=referral\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Unsplash</a>\");\n  }\n\n  // User-added attribution\n  if (attr.customCredit) {\n    return attr.customCredit;\n  }\n  var text = \"Photo by \".concat(attr.photographer);\n  if (attr.photographerUrl) {\n    text = \"<a href=\\\"\".concat(attr.photographerUrl, \"\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">\").concat(text, \"</a>\");\n  }\n  return text;\n}\n\n/**\r\n * Format attribution as plain text (for title attribute)\r\n */\nfunction formatAttributionText(image) {\n  if (!image.attribution) return '';\n  var attr = image.attribution;\n  if (image.source === 'unsplash') {\n    return \"Photo by \".concat(attr.photographer, \" on Unsplash\");\n  }\n  if (attr.customCredit) {\n    return attr.customCredit;\n  }\n  return \"Photo by \".concat(attr.photographer);\n}\n\n/**\r\n * Edit attribution (only for user uploads, not Unsplash)\r\n */\nwindow.editAttribution = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(recipeId, imageId) {\n    var _recipe$images;\n    var recipes, recipe, image, attribution;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          _context2.n = 1;\n          return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n        case 1:\n          recipes = _context2.v;\n          recipe = recipes.find(function (r) {\n            return r.id === recipeId;\n          });\n          image = recipe === null || recipe === void 0 || (_recipe$images = recipe.images) === null || _recipe$images === void 0 ? void 0 : _recipe$images.find(function (img) {\n            return img.id === imageId;\n          });\n          if (image) {\n            _context2.n = 2;\n            break;\n          }\n          return _context2.a(2);\n        case 2:\n          if (!(image.source === 'unsplash')) {\n            _context2.n = 3;\n            break;\n          }\n          alert('Unsplash attribution cannot be edited or removed per their terms of use.');\n          return _context2.a(2);\n        case 3:\n          _context2.n = 4;\n          return showAttributionDialog(image.attribution);\n        case 4:\n          attribution = _context2.v;\n          if (!(attribution !== undefined)) {\n            _context2.n = 5;\n            break;\n          }\n          // undefined = cancelled\n          image.attribution = attribution;\n          recipe.updatedAt = new Date().toISOString();\n          (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.saveRecipes)(recipes);\n          localStorage.setItem('editingRecipe', JSON.stringify(recipe));\n          _context2.n = 5;\n          return renderImageGallery(recipeId);\n        case 5:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x8, _x9) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n/**\r\n * Show attribution dialog\r\n */\nfunction showAttributionDialog(currentAttribution) {\n  return new Promise(function (resolve) {\n    var dialog = document.createElement('dialog');\n    dialog.className = 'attribution-dialog modal-dialog';\n    var hasAttribution = currentAttribution && currentAttribution.photographer;\n    dialog.innerHTML = \"\\n      <form id=\\\"attribution-form\\\">\\n        <h3>\".concat(hasAttribution ? 'Edit' : 'Add', \" Image Attribution</h3>\\n        <p class=\\\"hint\\\">Optional - add credit if this photo is from a photographer or requires attribution.</p>\\n        \\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"photographer-name\\\">Photographer/Source Name:</label>\\n          <input \\n            type=\\\"text\\\" \\n            id=\\\"photographer-name\\\" \\n            placeholder=\\\"e.g., Jane Smith Photography\\\"\\n            value=\\\"\").concat((currentAttribution === null || currentAttribution === void 0 ? void 0 : currentAttribution.photographer) || '', \"\\\"\\n          >\\n        </div>\\n        \\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"photographer-url\\\">Website/URL (optional):</label>\\n          <input \\n            type=\\\"url\\\" \\n            id=\\\"photographer-url\\\" \\n            placeholder=\\\"https://janesmith.com\\\"\\n            value=\\\"\").concat((currentAttribution === null || currentAttribution === void 0 ? void 0 : currentAttribution.photographerUrl) || '', \"\\\"\\n          >\\n        </div>\\n        \\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"custom-credit\\\">Custom Credit Line (optional):</label>\\n          <input \\n            type=\\\"text\\\" \\n            id=\\\"custom-credit\\\" \\n            placeholder=\\\"e.g., Photography by Jane Smith\\\"\\n            value=\\\"\").concat((currentAttribution === null || currentAttribution === void 0 ? void 0 : currentAttribution.customCredit) || '', \"\\\"\\n          >\\n          <small>If blank, will auto-generate from photographer name</small>\\n        </div>\\n        \\n        <div class=\\\"button-group\\\">\\n          \").concat(hasAttribution ? \"\\n            <button type=\\\"button\\\" id=\\\"remove-attribution-btn\\\" class=\\\"btn-secondary\\\">\\n              Remove Attribution\\n            </button>\\n          \" : '', \"\\n          <button type=\\\"button\\\" id=\\\"cancel-btn\\\" class=\\\"btn-secondary\\\">\\n            Cancel\\n          </button>\\n          <button type=\\\"submit\\\" class=\\\"btn-primary\\\">\\n            Save\\n          </button>\\n        </div>\\n      </form>\\n    \");\n    document.body.appendChild(dialog);\n    dialog.showModal();\n    var form = dialog.querySelector('#attribution-form');\n    var photographerInput = dialog.querySelector('#photographer-name');\n    var urlInput = dialog.querySelector('#photographer-url');\n    var creditInput = dialog.querySelector('#custom-credit');\n    var cancelBtn = dialog.querySelector('#cancel-btn');\n    var removeBtn = dialog.querySelector('#remove-attribution-btn');\n    photographerInput.focus();\n    cancelBtn.addEventListener('click', function () {\n      dialog.close();\n      dialog.remove();\n      resolve(undefined); // undefined = cancelled\n    });\n    if (removeBtn) {\n      removeBtn.addEventListener('click', function () {\n        if (confirm('Remove attribution from this image?')) {\n          dialog.close();\n          dialog.remove();\n          resolve(null); // null = remove attribution\n        }\n      });\n    }\n    dialog.addEventListener('click', function (e) {\n      if (e.target === dialog) {\n        dialog.close();\n        dialog.remove();\n        resolve(undefined);\n      }\n    });\n    form.addEventListener('submit', function (e) {\n      e.preventDefault();\n      var photographer = photographerInput.value.trim();\n      var url = urlInput.value.trim();\n      var customCredit = creditInput.value.trim();\n      if (!photographer) {\n        dialog.close();\n        dialog.remove();\n        resolve(null); // No photographer = remove attribution\n        return;\n      }\n      var attribution = {\n        photographer: photographer,\n        photographerUrl: url || null,\n        customCredit: customCredit || null,\n        requiresAttribution: true,\n        canEdit: true\n      };\n      dialog.close();\n      dialog.remove();\n      resolve(attribution);\n    });\n  });\n}\n\n/**\r\n * Set featured image\r\n */\nwindow.setFeaturedImage = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(recipeId, imageId) {\n    var recipes, recipe, image;\n    return _regenerator().w(function (_context3) {\n      while (1) switch (_context3.n) {\n        case 0:\n          _context3.n = 1;\n          return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n        case 1:\n          recipes = _context3.v;\n          recipe = recipes.find(function (r) {\n            return r.id === recipeId;\n          });\n          if (!(!recipe || !recipe.images)) {\n            _context3.n = 2;\n            break;\n          }\n          return _context3.a(2);\n        case 2:\n          recipe.images.forEach(function (img) {\n            return img.isFeatured = false;\n          });\n          image = recipe.images.find(function (img) {\n            return img.id === imageId;\n          });\n          if (image) image.isFeatured = true;\n          recipe.updatedAt = new Date().toISOString();\n          (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.saveRecipes)(recipes);\n          localStorage.setItem('editingRecipe', JSON.stringify(recipe));\n          _context3.n = 3;\n          return renderImageGallery(recipeId);\n        case 3:\n          return _context3.a(2);\n      }\n    }, _callee3);\n  }));\n  return function (_x0, _x1) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n/**\r\n * Move image up\r\n */\nwindow.moveImageUp = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(recipeId, imageId) {\n    var recipes, recipe, index, temp;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          _context4.n = 1;\n          return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n        case 1:\n          recipes = _context4.v;\n          recipe = recipes.find(function (r) {\n            return r.id === recipeId;\n          });\n          if (!(!recipe || !recipe.images)) {\n            _context4.n = 2;\n            break;\n          }\n          return _context4.a(2);\n        case 2:\n          index = recipe.images.findIndex(function (img) {\n            return img.id === imageId;\n          });\n          if (!(index <= 0)) {\n            _context4.n = 3;\n            break;\n          }\n          return _context4.a(2);\n        case 3:\n          temp = recipe.images[index].order;\n          recipe.images[index].order = recipe.images[index - 1].order;\n          recipe.images[index - 1].order = temp;\n          recipe.updatedAt = new Date().toISOString();\n          (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.saveRecipes)(recipes);\n          localStorage.setItem('editingRecipe', JSON.stringify(recipe));\n          _context4.n = 4;\n          return renderImageGallery(recipeId);\n        case 4:\n          return _context4.a(2);\n      }\n    }, _callee4);\n  }));\n  return function (_x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\n/**\r\n * Move image down\r\n */\nwindow.moveImageDown = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(recipeId, imageId) {\n    var recipes, recipe, index, temp;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          _context5.n = 1;\n          return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n        case 1:\n          recipes = _context5.v;\n          recipe = recipes.find(function (r) {\n            return r.id === recipeId;\n          });\n          if (!(!recipe || !recipe.images)) {\n            _context5.n = 2;\n            break;\n          }\n          return _context5.a(2);\n        case 2:\n          index = recipe.images.findIndex(function (img) {\n            return img.id === imageId;\n          });\n          if (!(index === -1 || index >= recipe.images.length - 1)) {\n            _context5.n = 3;\n            break;\n          }\n          return _context5.a(2);\n        case 3:\n          temp = recipe.images[index].order;\n          recipe.images[index].order = recipe.images[index + 1].order;\n          recipe.images[index + 1].order = temp;\n          recipe.updatedAt = new Date().toISOString();\n          (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.saveRecipes)(recipes);\n          localStorage.setItem('editingRecipe', JSON.stringify(recipe));\n          _context5.n = 4;\n          return renderImageGallery(recipeId);\n        case 4:\n          return _context5.a(2);\n      }\n    }, _callee5);\n  }));\n  return function (_x12, _x13) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\n/**\r\n * Remove image\r\n */\nwindow.removeImage = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(recipeId, imageId) {\n    var recipes, recipe, imageToRemove, registry, imageData, stillInUse, shouldDelete;\n    return _regenerator().w(function (_context6) {\n      while (1) switch (_context6.n) {\n        case 0:\n          if (confirm('Remove this image? This cannot be undone.')) {\n            _context6.n = 1;\n            break;\n          }\n          return _context6.a(2);\n        case 1:\n          _context6.n = 2;\n          return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n        case 2:\n          recipes = _context6.v;\n          recipe = recipes.find(function (r) {\n            return r.id === recipeId;\n          });\n          if (!(!recipe || !recipe.images)) {\n            _context6.n = 3;\n            break;\n          }\n          return _context6.a(2);\n        case 3:\n          imageToRemove = recipe.images.find(function (img) {\n            return img.id === imageId;\n          }); // âœ… Unregister from global registry\n          if (imageToRemove !== null && imageToRemove !== void 0 && imageToRemove.fileHash) {\n            (0,_globalImageRegistry_js__WEBPACK_IMPORTED_MODULE_4__.unregisterImageFromRecipe)(imageToRemove.fileHash, recipeId);\n          }\n\n          // Check if other recipes still use this image\n          registry = (0,_globalImageRegistry_js__WEBPACK_IMPORTED_MODULE_4__.getImageRegistry)();\n          imageData = registry[imageToRemove === null || imageToRemove === void 0 ? void 0 : imageToRemove.fileHash];\n          stillInUse = (imageData === null || imageData === void 0 ? void 0 : imageData.usedByRecipes.length) > 0; // Only delete from Cloudinary if no other recipe uses it\n          if (!stillInUse && (imageToRemove === null || imageToRemove === void 0 ? void 0 : imageToRemove.source) === 'user-upload' && imageToRemove.cloudinaryPublicId) {\n            shouldDelete = confirm('This image is not used by any other recipe.\\n\\n' + 'Delete from Cloudinary? (Saves storage)');\n            if (shouldDelete) {\n              showUploadStatus('Deleting from Cloudinary...', 'uploading');\n              // TODO: Implement Cloudinary deletion\n              // await deleteFromCloudinary(imageToRemove.cloudinaryPublicId);\n              console.log('ðŸ—‘ï¸ Would delete:', imageToRemove.cloudinaryPublicId);\n            }\n          } else if (stillInUse) {\n            console.log(\"\\u267B\\uFE0F Image still used by \".concat(imageData.usedByRecipes.length, \" recipe(s), keeping in Cloudinary\"));\n          }\n\n          // Remove from recipe\n          recipe.images = recipe.images.filter(function (img) {\n            return img.id !== imageId;\n          });\n\n          // Reorder remaining images\n          recipe.images.sort(function (a, b) {\n            return a.order - b.order;\n          });\n          recipe.images.forEach(function (img, index) {\n            return img.order = index;\n          });\n\n          // If removed image was featured, set first image as featured\n          if (recipe.images.length > 0 && !recipe.images.some(function (img) {\n            return img.isFeatured;\n          })) {\n            recipe.images[0].isFeatured = true;\n          }\n          recipe.updatedAt = new Date().toISOString();\n          (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.saveRecipes)(recipes);\n          localStorage.setItem('editingRecipe', JSON.stringify(recipe));\n          _context6.n = 4;\n          return renderImageGallery(recipeId);\n        case 4:\n          showUploadStatus('Image removed', 'success');\n        case 5:\n          return _context6.a(2);\n      }\n    }, _callee6);\n  }));\n  return function (_x14, _x15) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\n/**\r\n * Setup drag-and-drop reordering\r\n */\nfunction setupDragAndDrop(recipeId) {\n  var imageCards = document.querySelectorAll('.image-card');\n  var draggedElement = null;\n  imageCards.forEach(function (card) {\n    card.addEventListener('dragstart', function (e) {\n      draggedElement = card;\n      card.classList.add('dragging');\n    });\n    card.addEventListener('dragend', function () {\n      card.classList.remove('dragging');\n    });\n    card.addEventListener('dragover', function (e) {\n      e.preventDefault();\n      var afterElement = getDragAfterElement(card.parentElement, e.clientY);\n      if (afterElement == null) {\n        card.parentElement.appendChild(draggedElement);\n      } else {\n        card.parentElement.insertBefore(draggedElement, afterElement);\n      }\n    });\n    card.addEventListener('drop', /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(e) {\n        return _regenerator().w(function (_context7) {\n          while (1) switch (_context7.n) {\n            case 0:\n              e.preventDefault();\n              _context7.n = 1;\n              return reorderImagesAfterDrag(recipeId);\n            case 1:\n              return _context7.a(2);\n          }\n        }, _callee7);\n      }));\n      return function (_x16) {\n        return _ref7.apply(this, arguments);\n      };\n    }());\n  });\n}\n\n/**\r\n * Get element to insert dragged item after\r\n */\nfunction getDragAfterElement(container, y) {\n  var draggableElements = _toConsumableArray(container.querySelectorAll('.image-card:not(.dragging)'));\n  return draggableElements.reduce(function (closest, child) {\n    var box = child.getBoundingClientRect();\n    var offset = y - box.top - box.height / 2;\n    if (offset < 0 && offset > closest.offset) {\n      return {\n        offset: offset,\n        element: child\n      };\n    } else {\n      return closest;\n    }\n  }, {\n    offset: Number.NEGATIVE_INFINITY\n  }).element;\n}\n\n/**\r\n * Save new order after drag-and-drop\r\n */\nfunction reorderImagesAfterDrag(_x17) {\n  return _reorderImagesAfterDrag.apply(this, arguments);\n}\n/**\r\n * Show upload status\r\n */\nfunction _reorderImagesAfterDrag() {\n  _reorderImagesAfterDrag = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee10(recipeId) {\n    var recipes, recipe, imageCards, newOrder;\n    return _regenerator().w(function (_context10) {\n      while (1) switch (_context10.n) {\n        case 0:\n          _context10.n = 1;\n          return (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.loadRecipes)();\n        case 1:\n          recipes = _context10.v;\n          recipe = recipes.find(function (r) {\n            return r.id === recipeId;\n          });\n          if (!(!recipe || !recipe.images)) {\n            _context10.n = 2;\n            break;\n          }\n          return _context10.a(2);\n        case 2:\n          imageCards = document.querySelectorAll('.image-card');\n          newOrder = Array.from(imageCards).map(function (card) {\n            return card.dataset.imageId;\n          });\n          newOrder.forEach(function (imageId, index) {\n            var img = recipe.images.find(function (i) {\n              return i.id === imageId;\n            });\n            if (img) img.order = index;\n          });\n          recipe.updatedAt = new Date().toISOString();\n          (0,_functions_js__WEBPACK_IMPORTED_MODULE_1__.saveRecipes)(recipes);\n          localStorage.setItem('editingRecipe', JSON.stringify(recipe));\n        case 3:\n          return _context10.a(2);\n      }\n    }, _callee10);\n  }));\n  return _reorderImagesAfterDrag.apply(this, arguments);\n}\nfunction showUploadStatus(message, type) {\n  var statusDiv = document.getElementById('upload-status');\n  if (!statusDiv) return;\n  statusDiv.textContent = message;\n  statusDiv.className = \"upload-status-\".concat(type);\n  if (type === 'success' || type === 'error') {\n    setTimeout(function () {\n      statusDiv.textContent = '';\n      statusDiv.className = '';\n    }, 3000);\n  }\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLGVBQWUsRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUMvRixNQUFNLENBQUMsQ0FBQztRQUFDO1VBQUEsT0FBQXlOLFVBQUEsQ0FBQTVSLENBQUE7TUFBQTtJQUFBLEdBQUEwUixTQUFBO0VBQUEsQ0FDL0Q7RUFBQSxPQUFBRCx1QkFBQSxDQUFBM1AsS0FBQSxPQUFBRCxTQUFBO0FBQUE7QUFLRCxTQUFTc0QsZ0JBQWdCQSxDQUFDNEIsT0FBTyxFQUFFOUIsSUFBSSxFQUFFO0VBQ3ZDLElBQU0rTSxTQUFTLEdBQUc5TyxRQUFRLENBQUNDLGNBQWMsQ0FBQyxlQUFlLENBQUM7RUFDMUQsSUFBSSxDQUFDNk8sU0FBUyxFQUFFO0VBRWhCQSxTQUFTLENBQUNDLFdBQVcsR0FBR2xMLE9BQU87RUFDL0JpTCxTQUFTLENBQUN0RixTQUFTLG9CQUFBbEgsTUFBQSxDQUFvQlAsSUFBSSxDQUFFO0VBRTdDLElBQUlBLElBQUksS0FBSyxTQUFTLElBQUlBLElBQUksS0FBSyxPQUFPLEVBQUU7SUFDMUNpTixVQUFVLENBQUMsWUFBTTtNQUNmRixTQUFTLENBQUNDLFdBQVcsR0FBRyxFQUFFO01BQzFCRCxTQUFTLENBQUN0RixTQUFTLEdBQUcsRUFBRTtJQUMxQixDQUFDLEVBQUUsSUFBSSxDQUFDO0VBQ1Y7QUFDRixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVjaXBlLW1lLXdlYnBhY2s1Ly4vc3JjL2hlbHBlcnMvaW1hZ2VHYWxsZXJ5LmpzPzA3NDYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2hlbHBlcnMvaW1hZ2VHYWxsZXJ5LmpzXHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xyXG5pbXBvcnQgeyBsb2FkUmVjaXBlcywgc2F2ZVJlY2lwZXMgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xyXG5pbXBvcnQgeyBvcHRpbWl6ZUltYWdlLCBJTUFHRV9QUkVTRVRTIH0gZnJvbSAnLi9pbWFnZU9wdGltaXplci5qcyc7XHJcbmltcG9ydCB7IGdlbmVyYXRlRmlsZUhhc2gsIGNoZWNrRHVwbGljYXRlQnlGaWxlbmFtZSB9IGZyb20gJy4vZHVwbGljYXRlQ2hlY2suanMnO1xyXG5pbXBvcnQgeyBmaW5kRXhpc3RpbmdJbWFnZSwgcmVnaXN0ZXJJbWFnZSwgdW5yZWdpc3RlckltYWdlRnJvbVJlY2lwZSwgZ2V0SW1hZ2VSZWdpc3RyeSB9IGZyb20gJy4vZ2xvYmFsSW1hZ2VSZWdpc3RyeS5qcyc7XHJcblxyXG5jb25zdCBDTE9VRElOQVJZX0NMT1VEX05BTUUgPSAnZGF5MWY1bno4JztcclxuY29uc3QgQ0xPVURJTkFSWV9VUExPQURfUFJFU0VUID0gJ3JlY2lwZV9pbWFnZXMnO1xyXG5cclxuLyoqXHJcbiAqIFNldHVwIGltYWdlIGdhbGxlcnkgd2l0aCB1cGxvYWQsIG9yZGVyaW5nLCBhbmQgZmVhdHVyZSBzZWxlY3Rpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IHJlY2lwZUlkIC0gQ3VycmVudCByZWNpcGUgSURcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cEltYWdlR2FsbGVyeShyZWNpcGVJZCkge1xyXG4gIGNvbnN0IHVwbG9hZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3VkaW5hcnktdXBsb2FkJyk7XHJcbiAgXHJcbiAgaWYgKCF1cGxvYWRJbnB1dCkge1xyXG4gICAgY29uc29sZS53YXJuKCdJbWFnZSB1cGxvYWQgaW5wdXQgbm90IGZvdW5kJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgQ2xvdWRpbmFyeSB1cGxvYWRcclxuICB1cGxvYWRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoZSkgPT4ge1xyXG4gICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xyXG4gICAgaWYgKCFmaWxlKSByZXR1cm47XHJcblxyXG4gICAgLy8g4p2MIEJsb2NrIHZpZGVvIGZpbGUgdXBsb2Fkc1xyXG4gICAgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkge1xyXG4gICAgICBzaG93VXBsb2FkU3RhdHVzKCfinYwgVmlkZW8gZmlsZXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIHVwbG9hZCB0byBZb3VUdWJlIGFuZCBwYXN0ZSB0aGUgbGluayBpbnN0ZWFkLicsICdlcnJvcicpO1xyXG4gICAgICB1cGxvYWRJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgaW1hZ2UgdHlwZVxyXG4gICAgaWYgKCFmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcclxuICAgICAgc2hvd1VwbG9hZFN0YXR1cygnUGxlYXNlIHNlbGVjdCBhbiBpbWFnZSBmaWxlJywgJ2Vycm9yJyk7XHJcbiAgICAgIHVwbG9hZElucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBvcmlnaW5hbCBmaWxlIHNpemUgKGFsbG93IHVwIHRvIDIwTUIgb3JpZ2luYWxzKVxyXG4gICAgaWYgKGZpbGUuc2l6ZSA+IDIwICogMTAyNCAqIDEwMjQpIHtcclxuICAgICAgc2hvd1VwbG9hZFN0YXR1cygnSW1hZ2UgbXVzdCBiZSBzbWFsbGVyIHRoYW4gMjBNQicsICdlcnJvcicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc2hvd1VwbG9hZFN0YXR1cygnQ2hlY2tpbmcgZm9yIGR1cGxpY2F0ZXMuLi4nLCAndXBsb2FkaW5nJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBPcHRpbWl6ZSBmaXJzdCAoc28gaGFzaCBtYXRjaGVzIHdoYXQncyBzdG9yZWQpXHJcbiAgICAgIGNvbnN0IG9wdGltaXplZEJsb2IgPSBhd2FpdCBvcHRpbWl6ZUltYWdlKGZpbGUsIElNQUdFX1BSRVNFVFMucmVjaXBlSGVybyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDinIUgR2VuZXJhdGUgaGFzaCBvZiBvcHRpbWl6ZWQgaW1hZ2VcclxuICAgICAgY29uc3QgZmlsZUhhc2ggPSBhd2FpdCBnZW5lcmF0ZUZpbGVIYXNoKG9wdGltaXplZEJsb2IpO1xyXG4gICAgICBcclxuICAgICAgLy8g4pyFIENoZWNrIEdMT0JBTCByZWdpc3RyeSAoYWxsIHJlY2lwZXMpXHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nSW1hZ2UgPSBmaW5kRXhpc3RpbmdJbWFnZShmaWxlSGFzaCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZXhpc3RpbmdJbWFnZSkge1xyXG4gICAgICAgIGNvbnN0IHVzZWRJblJlY2lwZXMgPSBleGlzdGluZ0ltYWdlLnVzZWRCeVJlY2lwZXMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHNob3VsZFJldXNlID0gY29uZmlybShcclxuICAgICAgICAgIGDinIUgVGhpcyBpbWFnZSBhbHJlYWR5IGV4aXN0cyFcXG5cXG5gICtcclxuICAgICAgICAgIGBGaWxlOiAke2V4aXN0aW5nSW1hZ2UubWV0YWRhdGE/Lm9yaWdpbmFsRmlsZW5hbWUgfHwgJ1Vua25vd24nfVxcbmAgK1xyXG4gICAgICAgICAgYFVzZWQgaW46ICR7dXNlZEluUmVjaXBlc30gcmVjaXBlKHMpXFxuYCArXHJcbiAgICAgICAgICBgVXBsb2FkZWQ6ICR7bmV3IERhdGUoZXhpc3RpbmdJbWFnZS51cGxvYWRlZEF0KS50b0xvY2FsZURhdGVTdHJpbmcoKX1cXG5cXG5gICtcclxuICAgICAgICAgIGBSZXVzZSBleGlzdGluZyBpbWFnZT8gKFNhdmVzIGJhbmR3aWR0aCAmIHN0b3JhZ2UpYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHNob3VsZFJldXNlKSB7XHJcbiAgICAgICAgICAvLyDinIUgUmV1c2UgZXhpc3RpbmcgaW1hZ2VcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfimbvvuI8gUmV1c2luZyBleGlzdGluZyBpbWFnZTonLCBleGlzdGluZ0ltYWdlLnVybCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHtcclxuICAgICAgICAgICAgdXJsOiBleGlzdGluZ0ltYWdlLnVybCxcclxuICAgICAgICAgICAgc291cmNlOiAndXNlci11cGxvYWQnLFxyXG4gICAgICAgICAgICBjbG91ZGluYXJ5UHVibGljSWQ6IGV4aXN0aW5nSW1hZ2UuY2xvdWRpbmFyeVB1YmxpY0lkLFxyXG4gICAgICAgICAgICBmaWxlSGFzaDogZmlsZUhhc2gsXHJcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uOiBudWxsLFxyXG4gICAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICAgIHVwbG9hZGVkQXQ6IGV4aXN0aW5nSW1hZ2UudXBsb2FkZWRBdCxcclxuICAgICAgICAgICAgICBvcmlnaW5hbEZpbGVuYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgICAgICAgcmV1c2VkRnJvbTogZXhpc3RpbmdJbWFnZS5tZXRhZGF0YT8ub3JpZ2luYWxGaWxlbmFtZSxcclxuICAgICAgICAgICAgICBvcmlnaW5hbFNpemU6IGZpbGUuc2l6ZSxcclxuICAgICAgICAgICAgICBvcHRpbWl6ZWRTaXplOiBvcHRpbWl6ZWRCbG9iLnNpemVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgYXdhaXQgYWRkSW1hZ2VUb1JlY2lwZShyZWNpcGVJZCwgaW1hZ2VEYXRhKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gUmVnaXN0ZXIgdGhpcyByZWNpcGUgYXMgdXNpbmcgdGhlIGltYWdlXHJcbiAgICAgICAgICByZWdpc3RlckltYWdlKGZpbGVIYXNoLCBleGlzdGluZ0ltYWdlLCByZWNpcGVJZCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGF3YWl0IHJlbmRlckltYWdlR2FsbGVyeShyZWNpcGVJZCk7XHJcbiAgICAgICAgICBzaG93VXBsb2FkU3RhdHVzKCfinJMgSW1hZ2UgcmV1c2VkISAoTm8gdXBsb2FkIG5lZWRlZCknLCAnc3VjY2VzcycpO1xyXG4gICAgICAgICAgdXBsb2FkSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIE5vdCByZXVzaW5nLCBjaGVjayBmb3IgZHVwbGljYXRlIGJ5IGZpbGVuYW1lIHdpdGhpbiB0aGlzIHJlY2lwZVxyXG4gICAgICBjb25zdCByZWNpcGVzID0gYXdhaXQgbG9hZFJlY2lwZXMoKTtcclxuICAgICAgY29uc3QgcmVjaXBlID0gcmVjaXBlcy5maW5kKHIgPT4gci5pZCA9PT0gcmVjaXBlSWQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKHJlY2lwZSAmJiByZWNpcGUuaW1hZ2VzKSB7XHJcbiAgICAgICAgY29uc3QgZHVwbGljYXRlQnlOYW1lID0gY2hlY2tEdXBsaWNhdGVCeUZpbGVuYW1lKGZpbGUubmFtZSwgcmVjaXBlLmltYWdlcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGR1cGxpY2F0ZUJ5TmFtZSkge1xyXG4gICAgICAgICAgY29uc3Qgc2hvdWxkQ29udGludWUgPSBjb25maXJtKFxyXG4gICAgICAgICAgICBg4pqg77iPIEFuIGltYWdlIG5hbWVkIFwiJHtmaWxlLm5hbWV9XCIgYWxyZWFkeSBleGlzdHMgaW4gdGhpcyByZWNpcGUuXFxuXFxuYCArXHJcbiAgICAgICAgICAgIGBEbyB5b3Ugd2FudCB0byB1cGxvYWQgaXQgYW55d2F5P2BcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmICghc2hvdWxkQ29udGludWUpIHtcclxuICAgICAgICAgICAgdXBsb2FkSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgc2hvd1VwbG9hZFN0YXR1cygnVXBsb2FkIGNhbmNlbGxlZCAtIGR1cGxpY2F0ZSBkZXRlY3RlZCcsICdlcnJvcicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBQcm9jZWVkIHdpdGggbmV3IHVwbG9hZFxyXG4gICAgICBjb25zdCBvcmlnaW5hbFNpemUgPSAoZmlsZS5zaXplIC8gMTAyNCkudG9GaXhlZCgwKTtcclxuICAgICAgY29uc3Qgb3B0aW1pemVkU2l6ZSA9IChvcHRpbWl6ZWRCbG9iLnNpemUgLyAxMDI0KS50b0ZpeGVkKDApO1xyXG4gICAgICBjb25zdCBzYXZpbmdzID0gTWF0aC5yb3VuZCgoMSAtIG9wdGltaXplZEJsb2Iuc2l6ZSAvIGZpbGUuc2l6ZSkgKiAxMDApO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYPCfk4kgU2l6ZSByZWR1Y3Rpb246ICR7b3JpZ2luYWxTaXplfUtCIOKGkiAke29wdGltaXplZFNpemV9S0IgKCR7c2F2aW5nc30lIHNtYWxsZXIpYCk7XHJcbiAgICAgIFxyXG4gICAgICBzaG93VXBsb2FkU3RhdHVzKCdVcGxvYWRpbmcgb3B0aW1pemVkIGltYWdlLi4uJywgJ3VwbG9hZGluZycpO1xyXG4gICAgICBcclxuICAgICAgLy8gVXBsb2FkIHRvIENsb3VkaW5hcnlcclxuICAgICAgY29uc3QgeyB1cmwsIHB1YmxpY0lkIH0gPSBhd2FpdCB1cGxvYWRUb0Nsb3VkaW5hcnkob3B0aW1pemVkQmxvYiwgZmlsZS5uYW1lKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHtcclxuICAgICAgICB1cmwsXHJcbiAgICAgICAgc291cmNlOiAndXNlci11cGxvYWQnLFxyXG4gICAgICAgIGNsb3VkaW5hcnlQdWJsaWNJZDogcHVibGljSWQsXHJcbiAgICAgICAgZmlsZUhhc2g6IGZpbGVIYXNoLFxyXG4gICAgICAgIGF0dHJpYnV0aW9uOiBudWxsLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICB1cGxvYWRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICBvcmlnaW5hbEZpbGVuYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgICBvcmlnaW5hbFNpemU6IGZpbGUuc2l6ZSxcclxuICAgICAgICAgIG9wdGltaXplZFNpemU6IG9wdGltaXplZEJsb2Iuc2l6ZVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIC8vIOKchSBSZWdpc3RlciBpbiBnbG9iYWwgcmVnaXN0cnlcclxuICAgICAgcmVnaXN0ZXJJbWFnZShmaWxlSGFzaCwgaW1hZ2VEYXRhLCByZWNpcGVJZCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBBZGQgdG8gcmVjaXBlXHJcbiAgICAgIGF3YWl0IGFkZEltYWdlVG9SZWNpcGUocmVjaXBlSWQsIGltYWdlRGF0YSk7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCByZW5kZXJJbWFnZUdhbGxlcnkocmVjaXBlSWQpO1xyXG4gICAgICBzaG93VXBsb2FkU3RhdHVzKGDinJMgSW1hZ2UgYWRkZWQhIChTYXZlZCAke3NhdmluZ3N9JSBiYW5kd2lkdGgpYCwgJ3N1Y2Nlc3MnKTtcclxuICAgICAgdXBsb2FkSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgc2hvd1VwbG9hZFN0YXR1cyhg4pyXIFVwbG9hZCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gLCAnZXJyb3InKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gSW5pdGlhbCByZW5kZXJcclxuICByZW5kZXJJbWFnZUdhbGxlcnkocmVjaXBlSWQpO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIGltYWdlIGZyb20gVW5zcGxhc2ggKGNhbGxlZCBmcm9tIGZlYXR1cmVJbWFnZS5qcylcclxuICogQUxXQVlTIGluY2x1ZGVzIGF0dHJpYnV0aW9uIChVbnNwbGFzaCByZXF1aXJlbWVudClcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlY2lwZUlkIFxyXG4gKiBAcGFyYW0ge09iamVjdH0gaW1hZ2VEYXRhIFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFVuc3BsYXNoSW1hZ2UocmVjaXBlSWQsIGltYWdlRGF0YSkge1xyXG4gIGF3YWl0IGFkZEltYWdlVG9SZWNpcGUocmVjaXBlSWQsIHtcclxuICAgIHVybDogaW1hZ2VEYXRhLnVybCxcclxuICAgIHNvdXJjZTogJ3Vuc3BsYXNoJyxcclxuICAgIGNsb3VkaW5hcnlQdWJsaWNJZDogbnVsbCxcclxuICAgIGF0dHJpYnV0aW9uOiB7XHJcbiAgICAgIHBob3RvZ3JhcGhlcjogaW1hZ2VEYXRhLnBob3RvZ3JhcGhlcixcclxuICAgICAgcGhvdG9ncmFwaGVyVXJsOiBpbWFnZURhdGEucGhvdG9ncmFwaGVyTGluaywgLy8gSW5jbHVkZXMgVVRNIHBhcmFtc1xyXG4gICAgICByZXF1aXJlc0F0dHJpYnV0aW9uOiB0cnVlLFxyXG4gICAgICBjYW5FZGl0OiBmYWxzZSAvLyBDYW5ub3QgZWRpdC9yZW1vdmUgVW5zcGxhc2ggYXR0cmlidXRpb25cclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICBhd2FpdCByZW5kZXJJbWFnZUdhbGxlcnkocmVjaXBlSWQpO1xyXG59XHJcblxyXG4vKipcclxuICogVXBsb2FkIHRvIENsb3VkaW5hcnkgLSByZXR1cm5zIFVSTCBhbmQgcHVibGljSWRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwbG9hZFRvQ2xvdWRpbmFyeShmaWxlT3JCbG9iLCBmaWxlbmFtZSA9ICdpbWFnZS5qcGcnKSB7XHJcbiAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICBcclxuICAvLyBDb252ZXJ0IGJsb2IgdG8gZmlsZSB3aXRoIHByb3BlciBuYW1lXHJcbiAgaWYgKGZpbGVPckJsb2IgaW5zdGFuY2VvZiBCbG9iICYmICEoZmlsZU9yQmxvYiBpbnN0YW5jZW9mIEZpbGUpKSB7XHJcbiAgICBjb25zdCBmaWxlID0gbmV3IEZpbGUoW2ZpbGVPckJsb2JdLCBmaWxlbmFtZSwgeyB0eXBlOiBmaWxlT3JCbG9iLnR5cGUgfSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZU9yQmxvYik7XHJcbiAgfVxyXG4gIFxyXG4gIGZvcm1EYXRhLmFwcGVuZCgndXBsb2FkX3ByZXNldCcsIENMT1VESU5BUllfVVBMT0FEX1BSRVNFVCk7XHJcbiAgZm9ybURhdGEuYXBwZW5kKCdmb2xkZXInLCAncmVjaXBlcycpO1xyXG5cclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgYGh0dHBzOi8vYXBpLmNsb3VkaW5hcnkuY29tL3YxXzEvJHtDTE9VRElOQVJZX0NMT1VEX05BTUV9L2ltYWdlL3VwbG9hZGAsXHJcbiAgICB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBib2R5OiBmb3JtRGF0YVxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLmVycm9yPy5tZXNzYWdlIHx8ICdVcGxvYWQgZmFpbGVkJyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICB1cmw6IGRhdGEuc2VjdXJlX3VybC5yZXBsYWNlKCcvdXBsb2FkLycsICcvdXBsb2FkL3FfYXV0byxmX2F1dG8vJyksXHJcbiAgICBwdWJsaWNJZDogZGF0YS5wdWJsaWNfaWRcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIGltYWdlIHRvIHJlY2lwZVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYWRkSW1hZ2VUb1JlY2lwZShyZWNpcGVJZCwgaW1hZ2VEYXRhKSB7XHJcbiAgY29uc3QgcmVjaXBlcyA9IGF3YWl0IGxvYWRSZWNpcGVzKCk7XHJcbiAgY29uc3QgcmVjaXBlID0gcmVjaXBlcy5maW5kKHIgPT4gci5pZCA9PT0gcmVjaXBlSWQpO1xyXG4gIGlmICghcmVjaXBlKSByZXR1cm47XHJcblxyXG4gIC8vIEluaXRpYWxpemUgaW1hZ2VzIGFycmF5IGlmIG5lZWRlZFxyXG4gIGlmICghcmVjaXBlLmltYWdlcykge1xyXG4gICAgcmVjaXBlLmltYWdlcyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIG5ldyBpbWFnZSBvYmplY3RcclxuICBjb25zdCBuZXdJbWFnZSA9IHtcclxuICAgIGlkOiB1dWlkdjQoKSxcclxuICAgIHVybDogaW1hZ2VEYXRhLnVybCxcclxuICAgIHNvdXJjZTogaW1hZ2VEYXRhLnNvdXJjZSxcclxuICAgIGlzRmVhdHVyZWQ6IHJlY2lwZS5pbWFnZXMubGVuZ3RoID09PSAwLCAvLyBGaXJzdCBpbWFnZSBpcyBmZWF0dXJlZFxyXG4gICAgb3JkZXI6IHJlY2lwZS5pbWFnZXMubGVuZ3RoLFxyXG4gICAgY2xvdWRpbmFyeVB1YmxpY0lkOiBpbWFnZURhdGEuY2xvdWRpbmFyeVB1YmxpY0lkIHx8IG51bGwsXHJcbiAgICBmaWxlSGFzaDogaW1hZ2VEYXRhLmZpbGVIYXNoIHx8IG51bGwsXHJcbiAgICBhdHRyaWJ1dGlvbjogaW1hZ2VEYXRhLmF0dHJpYnV0aW9uIHx8IG51bGwsXHJcbiAgICBtZXRhZGF0YTogaW1hZ2VEYXRhLm1ldGFkYXRhIHx8IG51bGxcclxuICB9O1xyXG5cclxuICByZWNpcGUuaW1hZ2VzLnB1c2gobmV3SW1hZ2UpO1xyXG4gIHJlY2lwZS51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgXHJcbiAgc2F2ZVJlY2lwZXMocmVjaXBlcyk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VkaXRpbmdSZWNpcGUnLCBKU09OLnN0cmluZ2lmeShyZWNpcGUpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbmRlciB0aGUgaW1hZ2UgZ2FsbGVyeVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmRlckltYWdlR2FsbGVyeShyZWNpcGVJZCkge1xyXG4gIGNvbnN0IHJlY2lwZXMgPSBhd2FpdCBsb2FkUmVjaXBlcygpO1xyXG4gIGNvbnN0IHJlY2lwZSA9IHJlY2lwZXMuZmluZChyID0+IHIuaWQgPT09IHJlY2lwZUlkKTtcclxuICBjb25zdCBnYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlLWdhbGxlcnknKTtcclxuICBjb25zdCBub0ltYWdlc01zZyA9IGdhbGxlcnk/LnF1ZXJ5U2VsZWN0b3IoJy5uby1pbWFnZXMnKTtcclxuICBcclxuICBpZiAoIXJlY2lwZSB8fCAhZ2FsbGVyeSkgcmV0dXJuO1xyXG5cclxuICAvLyBTaG93L2hpZGUgbm8gaW1hZ2VzIG1lc3NhZ2VcclxuICBpZiAoIXJlY2lwZS5pbWFnZXMgfHwgcmVjaXBlLmltYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgIGlmIChub0ltYWdlc01zZykgbm9JbWFnZXNNc2cuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICBnYWxsZXJ5LmlubmVySFRNTCA9ICc8cCBjbGFzcz1cIm5vLWltYWdlc1wiPk5vIGltYWdlcyB5ZXQuIFVwbG9hZCBvciBzZWFyY2ggdG8gYWRkIGltYWdlcy48L3A+JztcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmIChub0ltYWdlc01zZykgbm9JbWFnZXNNc2cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgLy8gU29ydCBpbWFnZXMgYnkgb3JkZXJcclxuICBjb25zdCBzb3J0ZWRJbWFnZXMgPSBbLi4ucmVjaXBlLmltYWdlc10uc29ydCgoYSwgYikgPT4gYS5vcmRlciAtIGIub3JkZXIpO1xyXG5cclxuICBnYWxsZXJ5LmlubmVySFRNTCA9IGBcclxuICAgICR7c29ydGVkSW1hZ2VzLm1hcChpbWcgPT4gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiaW1hZ2UtY2FyZFwiIGRhdGEtaW1hZ2UtaWQ9XCIke2ltZy5pZH1cIiBkcmFnZ2FibGU9XCJ0cnVlXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImltYWdlLXByZXZpZXdcIj5cclxuICAgICAgICAgIDxpbWcgc3JjPVwiJHtpbWcudXJsfVwiIGFsdD1cIlJlY2lwZSBpbWFnZVwiPlxyXG4gICAgICAgICAgJHtpbWcuaXNGZWF0dXJlZCA/ICc8ZGl2IGNsYXNzPVwiZmVhdHVyZWQtYmFkZ2VcIj48aSBjbGFzcz1cImZhLXNvbGlkIGZhLXN0YXJcIj48L2k+IEZlYXR1cmVkPC9kaXY+JyA6ICcnfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAke2ltZy5zb3VyY2UgPT09ICd1bnNwbGFzaCcgPyBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzb3VyY2UtYmFkZ2UgdW5zcGxhc2gtYmFkZ2VcIiB0aXRsZT1cIkZyb20gVW5zcGxhc2hcIj5cclxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWltYWdlXCI+PC9pPiBVbnNwbGFzaFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIGAgOiBpbWcuYXR0cmlidXRpb24gPyBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzb3VyY2UtYmFkZ2UgYXR0cmlidXRpb24tYmFkZ2VcIiB0aXRsZT1cIiR7Zm9ybWF0QXR0cmlidXRpb25UZXh0KGltZyl9XCI+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jb3B5cmlnaHRcIj48L2k+IENyZWRpdFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIGAgOiBpbWcubWV0YWRhdGE/LnJldXNlZEZyb20gPyBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzb3VyY2UtYmFkZ2UgcmV1c2VkLWJhZGdlXCIgdGl0bGU9XCJSZXVzZWQgZnJvbTogJHtpbWcubWV0YWRhdGEucmV1c2VkRnJvbX1cIj5cclxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXJlY3ljbGVcIj48L2k+IFJldXNlZFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIGAgOiAnJ31cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW1hZ2UtYWN0aW9uc1wiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBcclxuICAgICAgICAgICAgY2xhc3M9XCJidG4tc21hbGwgJHtpbWcuaXNGZWF0dXJlZCA/ICdhY3RpdmUnIDogJyd9XCIgXHJcbiAgICAgICAgICAgIG9uY2xpY2s9XCJ3aW5kb3cuc2V0RmVhdHVyZWRJbWFnZSgnJHtyZWNpcGVJZH0nLCAnJHtpbWcuaWR9JylcIlxyXG4gICAgICAgICAgICB0aXRsZT1cIlNldCBhcyBmZWF0dXJlZCBpbWFnZVwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtc3RhclwiPjwvaT5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgICBjbGFzcz1cImJ0bi1zbWFsbFwiIFxyXG4gICAgICAgICAgICBvbmNsaWNrPVwid2luZG93Lm1vdmVJbWFnZVVwKCcke3JlY2lwZUlkfScsICcke2ltZy5pZH0nKVwiXHJcbiAgICAgICAgICAgIHRpdGxlPVwiTW92ZSB1cFwiXHJcbiAgICAgICAgICAgICR7aW1nLm9yZGVyID09PSAwID8gJ2Rpc2FibGVkJyA6ICcnfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWFycm93LXVwXCI+PC9pPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICAgIGNsYXNzPVwiYnRuLXNtYWxsXCIgXHJcbiAgICAgICAgICAgIG9uY2xpY2s9XCJ3aW5kb3cubW92ZUltYWdlRG93bignJHtyZWNpcGVJZH0nLCAnJHtpbWcuaWR9JylcIlxyXG4gICAgICAgICAgICB0aXRsZT1cIk1vdmUgZG93blwiXHJcbiAgICAgICAgICAgICR7aW1nLm9yZGVyID09PSBzb3J0ZWRJbWFnZXMubGVuZ3RoIC0gMSA/ICdkaXNhYmxlZCcgOiAnJ31cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1hcnJvdy1kb3duXCI+PC9pPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICAgIGNsYXNzPVwiYnRuLXNtYWxsICR7aW1nLmF0dHJpYnV0aW9uID8gJ2hhcy1hdHRyaWJ1dGlvbicgOiAnJ31cIiBcclxuICAgICAgICAgICAgb25jbGljaz1cIndpbmRvdy5lZGl0QXR0cmlidXRpb24oJyR7cmVjaXBlSWR9JywgJyR7aW1nLmlkfScpXCJcclxuICAgICAgICAgICAgdGl0bGU9XCIke2ltZy5zb3VyY2UgPT09ICd1bnNwbGFzaCcgPyAnVW5zcGxhc2ggYXR0cmlidXRpb24gKHJlcXVpcmVkKScgOiBpbWcuYXR0cmlidXRpb24gPyAnRWRpdCBhdHRyaWJ1dGlvbicgOiAnQWRkIGF0dHJpYnV0aW9uJ31cIlxyXG4gICAgICAgICAgICAke2ltZy5zb3VyY2UgPT09ICd1bnNwbGFzaCcgPyAnZGlzYWJsZWQnIDogJyd9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtJHtpbWcuc291cmNlID09PSAndW5zcGxhc2gnID8gJ2xvY2snIDogJ2NvcHlyaWdodCd9XCI+PC9pPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICAgIGNsYXNzPVwiYnRuLXNtYWxsIGJ0bi1kYW5nZXJcIiBcclxuICAgICAgICAgICAgb25jbGljaz1cIndpbmRvdy5yZW1vdmVJbWFnZSgnJHtyZWNpcGVJZH0nLCAnJHtpbWcuaWR9JylcIlxyXG4gICAgICAgICAgICB0aXRsZT1cIlJlbW92ZSBpbWFnZVwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2hcIj48L2k+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICAke2ltZy5zb3VyY2UgPT09ICd1bnNwbGFzaCcgfHwgaW1nLmF0dHJpYnV0aW9uID8gYFxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImltYWdlLWNyZWRpdCAke2ltZy5zb3VyY2UgPT09ICd1bnNwbGFzaCcgPyAndW5zcGxhc2gtY3JlZGl0JyA6ICcnfVwiPlxyXG4gICAgICAgICAgICAke2Zvcm1hdEF0dHJpYnV0aW9uKGltZyl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgIDogJyd9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYCkuam9pbignJyl9XHJcbiAgYDtcclxuXHJcbiAgLy8gU2V0dXAgZHJhZy1hbmQtZHJvcCBmb3IgcmVvcmRlcmluZ1xyXG4gIHNldHVwRHJhZ0FuZERyb3AocmVjaXBlSWQpO1xyXG59XHJcblxyXG4vKipcclxuICogRm9ybWF0IGF0dHJpYnV0aW9uIGZvciBkaXNwbGF5IChVbnNwbGFzaC1jb21wbGlhbnQpXHJcbiAqL1xyXG5mdW5jdGlvbiBmb3JtYXRBdHRyaWJ1dGlvbihpbWFnZSkge1xyXG4gIGlmICghaW1hZ2UuYXR0cmlidXRpb24pIHJldHVybiAnJztcclxuICBcclxuICBjb25zdCBhdHRyID0gaW1hZ2UuYXR0cmlidXRpb247XHJcbiAgXHJcbiAgLy8gVW5zcGxhc2gtc3BlY2lmaWMgZm9ybWF0IChyZXF1aXJlZCBieSB0aGVpciBndWlkZWxpbmVzKVxyXG4gIGlmIChpbWFnZS5zb3VyY2UgPT09ICd1bnNwbGFzaCcpIHtcclxuICAgIHJldHVybiBgUGhvdG8gYnkgPGEgaHJlZj1cIiR7YXR0ci5waG90b2dyYXBoZXJVcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXJcIj4ke2F0dHIucGhvdG9ncmFwaGVyfTwvYT4gb24gPGEgaHJlZj1cImh0dHBzOi8vdW5zcGxhc2guY29tLz91dG1fc291cmNlPXJlY2lwZV9tZSZ1dG1fbWVkaXVtPXJlZmVycmFsXCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXJcIj5VbnNwbGFzaDwvYT5gO1xyXG4gIH1cclxuICBcclxuICAvLyBVc2VyLWFkZGVkIGF0dHJpYnV0aW9uXHJcbiAgaWYgKGF0dHIuY3VzdG9tQ3JlZGl0KSB7XHJcbiAgICByZXR1cm4gYXR0ci5jdXN0b21DcmVkaXQ7XHJcbiAgfVxyXG4gIFxyXG4gIGxldCB0ZXh0ID0gYFBob3RvIGJ5ICR7YXR0ci5waG90b2dyYXBoZXJ9YDtcclxuICBcclxuICBpZiAoYXR0ci5waG90b2dyYXBoZXJVcmwpIHtcclxuICAgIHRleHQgPSBgPGEgaHJlZj1cIiR7YXR0ci5waG90b2dyYXBoZXJVcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXJcIj4ke3RleHR9PC9hPmA7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB0ZXh0O1xyXG59XHJcblxyXG4vKipcclxuICogRm9ybWF0IGF0dHJpYnV0aW9uIGFzIHBsYWluIHRleHQgKGZvciB0aXRsZSBhdHRyaWJ1dGUpXHJcbiAqL1xyXG5mdW5jdGlvbiBmb3JtYXRBdHRyaWJ1dGlvblRleHQoaW1hZ2UpIHtcclxuICBpZiAoIWltYWdlLmF0dHJpYnV0aW9uKSByZXR1cm4gJyc7XHJcbiAgXHJcbiAgY29uc3QgYXR0ciA9IGltYWdlLmF0dHJpYnV0aW9uO1xyXG4gIFxyXG4gIGlmIChpbWFnZS5zb3VyY2UgPT09ICd1bnNwbGFzaCcpIHtcclxuICAgIHJldHVybiBgUGhvdG8gYnkgJHthdHRyLnBob3RvZ3JhcGhlcn0gb24gVW5zcGxhc2hgO1xyXG4gIH1cclxuICBcclxuICBpZiAoYXR0ci5jdXN0b21DcmVkaXQpIHtcclxuICAgIHJldHVybiBhdHRyLmN1c3RvbUNyZWRpdDtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGBQaG90byBieSAke2F0dHIucGhvdG9ncmFwaGVyfWA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFZGl0IGF0dHJpYnV0aW9uIChvbmx5IGZvciB1c2VyIHVwbG9hZHMsIG5vdCBVbnNwbGFzaClcclxuICovXHJcbndpbmRvdy5lZGl0QXR0cmlidXRpb24gPSBhc3luYyBmdW5jdGlvbihyZWNpcGVJZCwgaW1hZ2VJZCkge1xyXG4gIGNvbnN0IHJlY2lwZXMgPSBhd2FpdCBsb2FkUmVjaXBlcygpO1xyXG4gIGNvbnN0IHJlY2lwZSA9IHJlY2lwZXMuZmluZChyID0+IHIuaWQgPT09IHJlY2lwZUlkKTtcclxuICBjb25zdCBpbWFnZSA9IHJlY2lwZT8uaW1hZ2VzPy5maW5kKGltZyA9PiBpbWcuaWQgPT09IGltYWdlSWQpO1xyXG4gIFxyXG4gIGlmICghaW1hZ2UpIHJldHVybjtcclxuICBcclxuICAvLyBCbG9jayBlZGl0aW5nIFVuc3BsYXNoIGF0dHJpYnV0aW9uXHJcbiAgaWYgKGltYWdlLnNvdXJjZSA9PT0gJ3Vuc3BsYXNoJykge1xyXG4gICAgYWxlcnQoJ1Vuc3BsYXNoIGF0dHJpYnV0aW9uIGNhbm5vdCBiZSBlZGl0ZWQgb3IgcmVtb3ZlZCBwZXIgdGhlaXIgdGVybXMgb2YgdXNlLicpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBcclxuICBjb25zdCBhdHRyaWJ1dGlvbiA9IGF3YWl0IHNob3dBdHRyaWJ1dGlvbkRpYWxvZyhpbWFnZS5hdHRyaWJ1dGlvbik7XHJcbiAgXHJcbiAgaWYgKGF0dHJpYnV0aW9uICE9PSB1bmRlZmluZWQpIHsgLy8gdW5kZWZpbmVkID0gY2FuY2VsbGVkXHJcbiAgICBpbWFnZS5hdHRyaWJ1dGlvbiA9IGF0dHJpYnV0aW9uO1xyXG4gICAgcmVjaXBlLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIHNhdmVSZWNpcGVzKHJlY2lwZXMpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VkaXRpbmdSZWNpcGUnLCBKU09OLnN0cmluZ2lmeShyZWNpcGUpKTtcclxuICAgIGF3YWl0IHJlbmRlckltYWdlR2FsbGVyeShyZWNpcGVJZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNob3cgYXR0cmlidXRpb24gZGlhbG9nXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93QXR0cmlidXRpb25EaWFsb2coY3VycmVudEF0dHJpYnV0aW9uKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaWFsb2cnKTtcclxuICAgIGRpYWxvZy5jbGFzc05hbWUgPSAnYXR0cmlidXRpb24tZGlhbG9nIG1vZGFsLWRpYWxvZyc7XHJcbiAgICBcclxuICAgIGNvbnN0IGhhc0F0dHJpYnV0aW9uID0gY3VycmVudEF0dHJpYnV0aW9uICYmIGN1cnJlbnRBdHRyaWJ1dGlvbi5waG90b2dyYXBoZXI7XHJcbiAgICBcclxuICAgIGRpYWxvZy5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxmb3JtIGlkPVwiYXR0cmlidXRpb24tZm9ybVwiPlxyXG4gICAgICAgIDxoMz4ke2hhc0F0dHJpYnV0aW9uID8gJ0VkaXQnIDogJ0FkZCd9IEltYWdlIEF0dHJpYnV0aW9uPC9oMz5cclxuICAgICAgICA8cCBjbGFzcz1cImhpbnRcIj5PcHRpb25hbCAtIGFkZCBjcmVkaXQgaWYgdGhpcyBwaG90byBpcyBmcm9tIGEgcGhvdG9ncmFwaGVyIG9yIHJlcXVpcmVzIGF0dHJpYnV0aW9uLjwvcD5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgPGxhYmVsIGZvcj1cInBob3RvZ3JhcGhlci1uYW1lXCI+UGhvdG9ncmFwaGVyL1NvdXJjZSBOYW1lOjwvbGFiZWw+XHJcbiAgICAgICAgICA8aW5wdXQgXHJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCIgXHJcbiAgICAgICAgICAgIGlkPVwicGhvdG9ncmFwaGVyLW5hbWVcIiBcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJlLmcuLCBKYW5lIFNtaXRoIFBob3RvZ3JhcGh5XCJcclxuICAgICAgICAgICAgdmFsdWU9XCIke2N1cnJlbnRBdHRyaWJ1dGlvbj8ucGhvdG9ncmFwaGVyIHx8ICcnfVwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgIDxsYWJlbCBmb3I9XCJwaG90b2dyYXBoZXItdXJsXCI+V2Vic2l0ZS9VUkwgKG9wdGlvbmFsKTo8L2xhYmVsPlxyXG4gICAgICAgICAgPGlucHV0IFxyXG4gICAgICAgICAgICB0eXBlPVwidXJsXCIgXHJcbiAgICAgICAgICAgIGlkPVwicGhvdG9ncmFwaGVyLXVybFwiIFxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cImh0dHBzOi8vamFuZXNtaXRoLmNvbVwiXHJcbiAgICAgICAgICAgIHZhbHVlPVwiJHtjdXJyZW50QXR0cmlidXRpb24/LnBob3RvZ3JhcGhlclVybCB8fCAnJ31cIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICA8bGFiZWwgZm9yPVwiY3VzdG9tLWNyZWRpdFwiPkN1c3RvbSBDcmVkaXQgTGluZSAob3B0aW9uYWwpOjwvbGFiZWw+XHJcbiAgICAgICAgICA8aW5wdXQgXHJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCIgXHJcbiAgICAgICAgICAgIGlkPVwiY3VzdG9tLWNyZWRpdFwiIFxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cImUuZy4sIFBob3RvZ3JhcGh5IGJ5IEphbmUgU21pdGhcIlxyXG4gICAgICAgICAgICB2YWx1ZT1cIiR7Y3VycmVudEF0dHJpYnV0aW9uPy5jdXN0b21DcmVkaXQgfHwgJyd9XCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgIDxzbWFsbD5JZiBibGFuaywgd2lsbCBhdXRvLWdlbmVyYXRlIGZyb20gcGhvdG9ncmFwaGVyIG5hbWU8L3NtYWxsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJidXR0b24tZ3JvdXBcIj5cclxuICAgICAgICAgICR7aGFzQXR0cmlidXRpb24gPyBgXHJcbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGlkPVwicmVtb3ZlLWF0dHJpYnV0aW9uLWJ0blwiIGNsYXNzPVwiYnRuLXNlY29uZGFyeVwiPlxyXG4gICAgICAgICAgICAgIFJlbW92ZSBBdHRyaWJ1dGlvblxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIGAgOiAnJ31cclxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGlkPVwiY2FuY2VsLWJ0blwiIGNsYXNzPVwiYnRuLXNlY29uZGFyeVwiPlxyXG4gICAgICAgICAgICBDYW5jZWxcclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4tcHJpbWFyeVwiPlxyXG4gICAgICAgICAgICBTYXZlXHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9mb3JtPlxyXG4gICAgYDtcclxuICAgIFxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaWFsb2cpO1xyXG4gICAgZGlhbG9nLnNob3dNb2RhbCgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBmb3JtID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNhdHRyaWJ1dGlvbi1mb3JtJyk7XHJcbiAgICBjb25zdCBwaG90b2dyYXBoZXJJbnB1dCA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcjcGhvdG9ncmFwaGVyLW5hbWUnKTtcclxuICAgIGNvbnN0IHVybElucHV0ID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNwaG90b2dyYXBoZXItdXJsJyk7XHJcbiAgICBjb25zdCBjcmVkaXRJbnB1dCA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcjY3VzdG9tLWNyZWRpdCcpO1xyXG4gICAgY29uc3QgY2FuY2VsQnRuID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNjYW5jZWwtYnRuJyk7XHJcbiAgICBjb25zdCByZW1vdmVCdG4gPSBkaWFsb2cucXVlcnlTZWxlY3RvcignI3JlbW92ZS1hdHRyaWJ1dGlvbi1idG4nKTtcclxuICAgIFxyXG4gICAgcGhvdG9ncmFwaGVySW5wdXQuZm9jdXMoKTtcclxuICAgIFxyXG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgZGlhbG9nLnJlbW92ZSgpO1xyXG4gICAgICByZXNvbHZlKHVuZGVmaW5lZCk7IC8vIHVuZGVmaW5lZCA9IGNhbmNlbGxlZFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGlmIChyZW1vdmVCdG4pIHtcclxuICAgICAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChjb25maXJtKCdSZW1vdmUgYXR0cmlidXRpb24gZnJvbSB0aGlzIGltYWdlPycpKSB7XHJcbiAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgIGRpYWxvZy5yZW1vdmUoKTtcclxuICAgICAgICAgIHJlc29sdmUobnVsbCk7IC8vIG51bGwgPSByZW1vdmUgYXR0cmlidXRpb25cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBkaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQgPT09IGRpYWxvZykge1xyXG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgIGRpYWxvZy5yZW1vdmUoKTtcclxuICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHBob3RvZ3JhcGhlciA9IHBob3RvZ3JhcGhlcklucHV0LnZhbHVlLnRyaW0oKTtcclxuICAgICAgY29uc3QgdXJsID0gdXJsSW5wdXQudmFsdWUudHJpbSgpO1xyXG4gICAgICBjb25zdCBjdXN0b21DcmVkaXQgPSBjcmVkaXRJbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXBob3RvZ3JhcGhlcikge1xyXG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgIGRpYWxvZy5yZW1vdmUoKTtcclxuICAgICAgICByZXNvbHZlKG51bGwpOyAvLyBObyBwaG90b2dyYXBoZXIgPSByZW1vdmUgYXR0cmlidXRpb25cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGF0dHJpYnV0aW9uID0ge1xyXG4gICAgICAgIHBob3RvZ3JhcGhlcixcclxuICAgICAgICBwaG90b2dyYXBoZXJVcmw6IHVybCB8fCBudWxsLFxyXG4gICAgICAgIGN1c3RvbUNyZWRpdDogY3VzdG9tQ3JlZGl0IHx8IG51bGwsXHJcbiAgICAgICAgcmVxdWlyZXNBdHRyaWJ1dGlvbjogdHJ1ZSxcclxuICAgICAgICBjYW5FZGl0OiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgZGlhbG9nLnJlbW92ZSgpO1xyXG4gICAgICByZXNvbHZlKGF0dHJpYnV0aW9uKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGZlYXR1cmVkIGltYWdlXHJcbiAqL1xyXG53aW5kb3cuc2V0RmVhdHVyZWRJbWFnZSA9IGFzeW5jIGZ1bmN0aW9uKHJlY2lwZUlkLCBpbWFnZUlkKSB7XHJcbiAgY29uc3QgcmVjaXBlcyA9IGF3YWl0IGxvYWRSZWNpcGVzKCk7XHJcbiAgY29uc3QgcmVjaXBlID0gcmVjaXBlcy5maW5kKHIgPT4gci5pZCA9PT0gcmVjaXBlSWQpO1xyXG4gIGlmICghcmVjaXBlIHx8ICFyZWNpcGUuaW1hZ2VzKSByZXR1cm47XHJcblxyXG4gIHJlY2lwZS5pbWFnZXMuZm9yRWFjaChpbWcgPT4gaW1nLmlzRmVhdHVyZWQgPSBmYWxzZSk7XHJcbiAgY29uc3QgaW1hZ2UgPSByZWNpcGUuaW1hZ2VzLmZpbmQoaW1nID0+IGltZy5pZCA9PT0gaW1hZ2VJZCk7XHJcbiAgaWYgKGltYWdlKSBpbWFnZS5pc0ZlYXR1cmVkID0gdHJ1ZTtcclxuXHJcbiAgcmVjaXBlLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICBzYXZlUmVjaXBlcyhyZWNpcGVzKTtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWRpdGluZ1JlY2lwZScsIEpTT04uc3RyaW5naWZ5KHJlY2lwZSkpO1xyXG4gIFxyXG4gIGF3YWl0IHJlbmRlckltYWdlR2FsbGVyeShyZWNpcGVJZCk7XHJcbn07XHJcblxyXG4vKipcclxuICogTW92ZSBpbWFnZSB1cFxyXG4gKi9cclxud2luZG93Lm1vdmVJbWFnZVVwID0gYXN5bmMgZnVuY3Rpb24ocmVjaXBlSWQsIGltYWdlSWQpIHtcclxuICBjb25zdCByZWNpcGVzID0gYXdhaXQgbG9hZFJlY2lwZXMoKTtcclxuICBjb25zdCByZWNpcGUgPSByZWNpcGVzLmZpbmQociA9PiByLmlkID09PSByZWNpcGVJZCk7XHJcbiAgaWYgKCFyZWNpcGUgfHwgIXJlY2lwZS5pbWFnZXMpIHJldHVybjtcclxuXHJcbiAgY29uc3QgaW5kZXggPSByZWNpcGUuaW1hZ2VzLmZpbmRJbmRleChpbWcgPT4gaW1nLmlkID09PSBpbWFnZUlkKTtcclxuICBpZiAoaW5kZXggPD0gMCkgcmV0dXJuO1xyXG5cclxuICBjb25zdCB0ZW1wID0gcmVjaXBlLmltYWdlc1tpbmRleF0ub3JkZXI7XHJcbiAgcmVjaXBlLmltYWdlc1tpbmRleF0ub3JkZXIgPSByZWNpcGUuaW1hZ2VzW2luZGV4IC0gMV0ub3JkZXI7XHJcbiAgcmVjaXBlLmltYWdlc1tpbmRleCAtIDFdLm9yZGVyID0gdGVtcDtcclxuXHJcbiAgcmVjaXBlLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICBzYXZlUmVjaXBlcyhyZWNpcGVzKTtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWRpdGluZ1JlY2lwZScsIEpTT04uc3RyaW5naWZ5KHJlY2lwZSkpO1xyXG4gIFxyXG4gIGF3YWl0IHJlbmRlckltYWdlR2FsbGVyeShyZWNpcGVJZCk7XHJcbn07XHJcblxyXG4vKipcclxuICogTW92ZSBpbWFnZSBkb3duXHJcbiAqL1xyXG53aW5kb3cubW92ZUltYWdlRG93biA9IGFzeW5jIGZ1bmN0aW9uKHJlY2lwZUlkLCBpbWFnZUlkKSB7XHJcbiAgY29uc3QgcmVjaXBlcyA9IGF3YWl0IGxvYWRSZWNpcGVzKCk7XHJcbiAgY29uc3QgcmVjaXBlID0gcmVjaXBlcy5maW5kKHIgPT4gci5pZCA9PT0gcmVjaXBlSWQpO1xyXG4gIGlmICghcmVjaXBlIHx8ICFyZWNpcGUuaW1hZ2VzKSByZXR1cm47XHJcblxyXG4gIGNvbnN0IGluZGV4ID0gcmVjaXBlLmltYWdlcy5maW5kSW5kZXgoaW1nID0+IGltZy5pZCA9PT0gaW1hZ2VJZCk7XHJcbiAgaWYgKGluZGV4ID09PSAtMSB8fCBpbmRleCA+PSByZWNpcGUuaW1hZ2VzLmxlbmd0aCAtIDEpIHJldHVybjtcclxuXHJcbiAgY29uc3QgdGVtcCA9IHJlY2lwZS5pbWFnZXNbaW5kZXhdLm9yZGVyO1xyXG4gIHJlY2lwZS5pbWFnZXNbaW5kZXhdLm9yZGVyID0gcmVjaXBlLmltYWdlc1tpbmRleCArIDFdLm9yZGVyO1xyXG4gIHJlY2lwZS5pbWFnZXNbaW5kZXggKyAxXS5vcmRlciA9IHRlbXA7XHJcblxyXG4gIHJlY2lwZS51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgc2F2ZVJlY2lwZXMocmVjaXBlcyk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VkaXRpbmdSZWNpcGUnLCBKU09OLnN0cmluZ2lmeShyZWNpcGUpKTtcclxuICBcclxuICBhd2FpdCByZW5kZXJJbWFnZUdhbGxlcnkocmVjaXBlSWQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSBpbWFnZVxyXG4gKi9cclxud2luZG93LnJlbW92ZUltYWdlID0gYXN5bmMgZnVuY3Rpb24ocmVjaXBlSWQsIGltYWdlSWQpIHtcclxuICBpZiAoIWNvbmZpcm0oJ1JlbW92ZSB0aGlzIGltYWdlPyBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuJykpIHJldHVybjtcclxuXHJcbiAgY29uc3QgcmVjaXBlcyA9IGF3YWl0IGxvYWRSZWNpcGVzKCk7XHJcbiAgY29uc3QgcmVjaXBlID0gcmVjaXBlcy5maW5kKHIgPT4gci5pZCA9PT0gcmVjaXBlSWQpO1xyXG4gIGlmICghcmVjaXBlIHx8ICFyZWNpcGUuaW1hZ2VzKSByZXR1cm47XHJcblxyXG4gIGNvbnN0IGltYWdlVG9SZW1vdmUgPSByZWNpcGUuaW1hZ2VzLmZpbmQoaW1nID0+IGltZy5pZCA9PT0gaW1hZ2VJZCk7XHJcbiAgXHJcbiAgLy8g4pyFIFVucmVnaXN0ZXIgZnJvbSBnbG9iYWwgcmVnaXN0cnlcclxuICBpZiAoaW1hZ2VUb1JlbW92ZT8uZmlsZUhhc2gpIHtcclxuICAgIHVucmVnaXN0ZXJJbWFnZUZyb21SZWNpcGUoaW1hZ2VUb1JlbW92ZS5maWxlSGFzaCwgcmVjaXBlSWQpO1xyXG4gIH1cclxuICBcclxuICAvLyBDaGVjayBpZiBvdGhlciByZWNpcGVzIHN0aWxsIHVzZSB0aGlzIGltYWdlXHJcbiAgY29uc3QgcmVnaXN0cnkgPSBnZXRJbWFnZVJlZ2lzdHJ5KCk7XHJcbiAgY29uc3QgaW1hZ2VEYXRhID0gcmVnaXN0cnlbaW1hZ2VUb1JlbW92ZT8uZmlsZUhhc2hdO1xyXG4gIGNvbnN0IHN0aWxsSW5Vc2UgPSBpbWFnZURhdGE/LnVzZWRCeVJlY2lwZXMubGVuZ3RoID4gMDtcclxuICBcclxuICAvLyBPbmx5IGRlbGV0ZSBmcm9tIENsb3VkaW5hcnkgaWYgbm8gb3RoZXIgcmVjaXBlIHVzZXMgaXRcclxuICBpZiAoIXN0aWxsSW5Vc2UgJiYgaW1hZ2VUb1JlbW92ZT8uc291cmNlID09PSAndXNlci11cGxvYWQnICYmIGltYWdlVG9SZW1vdmUuY2xvdWRpbmFyeVB1YmxpY0lkKSB7XHJcbiAgICBjb25zdCBzaG91bGREZWxldGUgPSBjb25maXJtKFxyXG4gICAgICAnVGhpcyBpbWFnZSBpcyBub3QgdXNlZCBieSBhbnkgb3RoZXIgcmVjaXBlLlxcblxcbicgK1xyXG4gICAgICAnRGVsZXRlIGZyb20gQ2xvdWRpbmFyeT8gKFNhdmVzIHN0b3JhZ2UpJ1xyXG4gICAgKTtcclxuICAgIFxyXG4gICAgaWYgKHNob3VsZERlbGV0ZSkge1xyXG4gICAgICBzaG93VXBsb2FkU3RhdHVzKCdEZWxldGluZyBmcm9tIENsb3VkaW5hcnkuLi4nLCAndXBsb2FkaW5nJyk7XHJcbiAgICAgIC8vIFRPRE86IEltcGxlbWVudCBDbG91ZGluYXJ5IGRlbGV0aW9uXHJcbiAgICAgIC8vIGF3YWl0IGRlbGV0ZUZyb21DbG91ZGluYXJ5KGltYWdlVG9SZW1vdmUuY2xvdWRpbmFyeVB1YmxpY0lkKTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gV291bGQgZGVsZXRlOicsIGltYWdlVG9SZW1vdmUuY2xvdWRpbmFyeVB1YmxpY0lkKTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKHN0aWxsSW5Vc2UpIHtcclxuICAgIGNvbnNvbGUubG9nKGDimbvvuI8gSW1hZ2Ugc3RpbGwgdXNlZCBieSAke2ltYWdlRGF0YS51c2VkQnlSZWNpcGVzLmxlbmd0aH0gcmVjaXBlKHMpLCBrZWVwaW5nIGluIENsb3VkaW5hcnlgKTtcclxuICB9XHJcblxyXG4gIC8vIFJlbW92ZSBmcm9tIHJlY2lwZVxyXG4gIHJlY2lwZS5pbWFnZXMgPSByZWNpcGUuaW1hZ2VzLmZpbHRlcihpbWcgPT4gaW1nLmlkICE9PSBpbWFnZUlkKTtcclxuICBcclxuICAvLyBSZW9yZGVyIHJlbWFpbmluZyBpbWFnZXNcclxuICByZWNpcGUuaW1hZ2VzLnNvcnQoKGEsIGIpID0+IGEub3JkZXIgLSBiLm9yZGVyKTtcclxuICByZWNpcGUuaW1hZ2VzLmZvckVhY2goKGltZywgaW5kZXgpID0+IGltZy5vcmRlciA9IGluZGV4KTtcclxuXHJcbiAgLy8gSWYgcmVtb3ZlZCBpbWFnZSB3YXMgZmVhdHVyZWQsIHNldCBmaXJzdCBpbWFnZSBhcyBmZWF0dXJlZFxyXG4gIGlmIChyZWNpcGUuaW1hZ2VzLmxlbmd0aCA+IDAgJiYgIXJlY2lwZS5pbWFnZXMuc29tZShpbWcgPT4gaW1nLmlzRmVhdHVyZWQpKSB7XHJcbiAgICByZWNpcGUuaW1hZ2VzWzBdLmlzRmVhdHVyZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcmVjaXBlLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICBzYXZlUmVjaXBlcyhyZWNpcGVzKTtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWRpdGluZ1JlY2lwZScsIEpTT04uc3RyaW5naWZ5KHJlY2lwZSkpO1xyXG4gIFxyXG4gIGF3YWl0IHJlbmRlckltYWdlR2FsbGVyeShyZWNpcGVJZCk7XHJcbiAgc2hvd1VwbG9hZFN0YXR1cygnSW1hZ2UgcmVtb3ZlZCcsICdzdWNjZXNzJyk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0dXAgZHJhZy1hbmQtZHJvcCByZW9yZGVyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXR1cERyYWdBbmREcm9wKHJlY2lwZUlkKSB7XHJcbiAgY29uc3QgaW1hZ2VDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbWFnZS1jYXJkJyk7XHJcbiAgbGV0IGRyYWdnZWRFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgaW1hZ2VDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xyXG4gICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xyXG4gICAgICBkcmFnZ2VkRWxlbWVudCA9IGNhcmQ7XHJcbiAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsICgpID0+IHtcclxuICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgYWZ0ZXJFbGVtZW50ID0gZ2V0RHJhZ0FmdGVyRWxlbWVudChjYXJkLnBhcmVudEVsZW1lbnQsIGUuY2xpZW50WSk7XHJcbiAgICAgIGlmIChhZnRlckVsZW1lbnQgPT0gbnVsbCkge1xyXG4gICAgICAgIGNhcmQucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChkcmFnZ2VkRWxlbWVudCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2FyZC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShkcmFnZ2VkRWxlbWVudCwgYWZ0ZXJFbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBhd2FpdCByZW9yZGVySW1hZ2VzQWZ0ZXJEcmFnKHJlY2lwZUlkKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGVsZW1lbnQgdG8gaW5zZXJ0IGRyYWdnZWQgaXRlbSBhZnRlclxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RHJhZ0FmdGVyRWxlbWVudChjb250YWluZXIsIHkpIHtcclxuICBjb25zdCBkcmFnZ2FibGVFbGVtZW50cyA9IFsuLi5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmltYWdlLWNhcmQ6bm90KC5kcmFnZ2luZyknKV07XHJcblxyXG4gIHJldHVybiBkcmFnZ2FibGVFbGVtZW50cy5yZWR1Y2UoKGNsb3Nlc3QsIGNoaWxkKSA9PiB7XHJcbiAgICBjb25zdCBib3ggPSBjaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IG9mZnNldCA9IHkgLSBib3gudG9wIC0gYm94LmhlaWdodCAvIDI7XHJcblxyXG4gICAgaWYgKG9mZnNldCA8IDAgJiYgb2Zmc2V0ID4gY2xvc2VzdC5vZmZzZXQpIHtcclxuICAgICAgcmV0dXJuIHsgb2Zmc2V0OiBvZmZzZXQsIGVsZW1lbnQ6IGNoaWxkIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gY2xvc2VzdDtcclxuICAgIH1cclxuICB9LCB7IG9mZnNldDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIH0pLmVsZW1lbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTYXZlIG5ldyBvcmRlciBhZnRlciBkcmFnLWFuZC1kcm9wXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZW9yZGVySW1hZ2VzQWZ0ZXJEcmFnKHJlY2lwZUlkKSB7XHJcbiAgY29uc3QgcmVjaXBlcyA9IGF3YWl0IGxvYWRSZWNpcGVzKCk7XHJcbiAgY29uc3QgcmVjaXBlID0gcmVjaXBlcy5maW5kKHIgPT4gci5pZCA9PT0gcmVjaXBlSWQpO1xyXG4gIGlmICghcmVjaXBlIHx8ICFyZWNpcGUuaW1hZ2VzKSByZXR1cm47XHJcblxyXG4gIGNvbnN0IGltYWdlQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW1hZ2UtY2FyZCcpO1xyXG4gIGNvbnN0IG5ld09yZGVyID0gQXJyYXkuZnJvbShpbWFnZUNhcmRzKS5tYXAoY2FyZCA9PiBjYXJkLmRhdGFzZXQuaW1hZ2VJZCk7XHJcblxyXG4gIG5ld09yZGVyLmZvckVhY2goKGltYWdlSWQsIGluZGV4KSA9PiB7XHJcbiAgICBjb25zdCBpbWcgPSByZWNpcGUuaW1hZ2VzLmZpbmQoaSA9PiBpLmlkID09PSBpbWFnZUlkKTtcclxuICAgIGlmIChpbWcpIGltZy5vcmRlciA9IGluZGV4O1xyXG4gIH0pO1xyXG5cclxuICByZWNpcGUudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gIHNhdmVSZWNpcGVzKHJlY2lwZXMpO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlZGl0aW5nUmVjaXBlJywgSlNPTi5zdHJpbmdpZnkocmVjaXBlKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaG93IHVwbG9hZCBzdGF0dXNcclxuICovXHJcbmZ1bmN0aW9uIHNob3dVcGxvYWRTdGF0dXMobWVzc2FnZSwgdHlwZSkge1xyXG4gIGNvbnN0IHN0YXR1c0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWQtc3RhdHVzJyk7XHJcbiAgaWYgKCFzdGF0dXNEaXYpIHJldHVybjtcclxuXHJcbiAgc3RhdHVzRGl2LnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICBzdGF0dXNEaXYuY2xhc3NOYW1lID0gYHVwbG9hZC1zdGF0dXMtJHt0eXBlfWA7XHJcblxyXG4gIGlmICh0eXBlID09PSAnc3VjY2VzcycgfHwgdHlwZSA9PT0gJ2Vycm9yJykge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHN0YXR1c0Rpdi50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICBzdGF0dXNEaXYuY2xhc3NOYW1lID0gJyc7XHJcbiAgICB9LCAzMDAwKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiZSIsInQiLCJyIiwiU3ltYm9sIiwibiIsIml0ZXJhdG9yIiwibyIsInRvU3RyaW5nVGFnIiwiaSIsImMiLCJwcm90b3R5cGUiLCJHZW5lcmF0b3IiLCJ1IiwiT2JqZWN0IiwiY3JlYXRlIiwiX3JlZ2VuZXJhdG9yRGVmaW5lMiIsImYiLCJwIiwieSIsIkciLCJ2IiwiYSIsImQiLCJiaW5kIiwibGVuZ3RoIiwibCIsIlR5cGVFcnJvciIsImNhbGwiLCJkb25lIiwidmFsdWUiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImRpc3BsYXlOYW1lIiwiX3JlZ2VuZXJhdG9yIiwidyIsIm0iLCJkZWZpbmVQcm9wZXJ0eSIsIl9yZWdlbmVyYXRvckRlZmluZSIsIl9pbnZva2UiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJfYXN5bmNUb0dlbmVyYXRvciIsImFyZ3VtZW50cyIsImFwcGx5IiwiX25leHQiLCJfdGhyb3ciLCJ2NCIsInV1aWR2NCIsImxvYWRSZWNpcGVzIiwic2F2ZVJlY2lwZXMiLCJvcHRpbWl6ZUltYWdlIiwiSU1BR0VfUFJFU0VUUyIsImdlbmVyYXRlRmlsZUhhc2giLCJjaGVja0R1cGxpY2F0ZUJ5RmlsZW5hbWUiLCJmaW5kRXhpc3RpbmdJbWFnZSIsInJlZ2lzdGVySW1hZ2UiLCJ1bnJlZ2lzdGVySW1hZ2VGcm9tUmVjaXBlIiwiZ2V0SW1hZ2VSZWdpc3RyeSIsIkNMT1VESU5BUllfQ0xPVURfTkFNRSIsIkNMT1VESU5BUllfVVBMT0FEX1BSRVNFVCIsInNldHVwSW1hZ2VHYWxsZXJ5IiwicmVjaXBlSWQiLCJ1cGxvYWRJbnB1dCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb25zb2xlIiwid2FybiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfcmVmIiwiX2NhbGxlZSIsImZpbGUiLCJvcHRpbWl6ZWRCbG9iIiwiZmlsZUhhc2giLCJleGlzdGluZ0ltYWdlIiwiX2V4aXN0aW5nSW1hZ2UkbWV0YWRhIiwidXNlZEluUmVjaXBlcyIsInNob3VsZFJldXNlIiwiX2V4aXN0aW5nSW1hZ2UkbWV0YWRhMiIsIl9pbWFnZURhdGEiLCJyZWNpcGVzIiwicmVjaXBlIiwiZHVwbGljYXRlQnlOYW1lIiwic2hvdWxkQ29udGludWUiLCJvcmlnaW5hbFNpemUiLCJvcHRpbWl6ZWRTaXplIiwic2F2aW5ncyIsIl95aWVsZCR1cGxvYWRUb0Nsb3VkaSIsInVybCIsInB1YmxpY0lkIiwiaW1hZ2VEYXRhIiwiX3QiLCJfY29udGV4dCIsInRhcmdldCIsImZpbGVzIiwidHlwZSIsInN0YXJ0c1dpdGgiLCJzaG93VXBsb2FkU3RhdHVzIiwic2l6ZSIsInJlY2lwZUhlcm8iLCJ1c2VkQnlSZWNpcGVzIiwiY29uZmlybSIsImNvbmNhdCIsIm1ldGFkYXRhIiwib3JpZ2luYWxGaWxlbmFtZSIsIkRhdGUiLCJ1cGxvYWRlZEF0IiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwibG9nIiwic291cmNlIiwiY2xvdWRpbmFyeVB1YmxpY0lkIiwiYXR0cmlidXRpb24iLCJuYW1lIiwicmV1c2VkRnJvbSIsImFkZEltYWdlVG9SZWNpcGUiLCJyZW5kZXJJbWFnZUdhbGxlcnkiLCJmaW5kIiwiaWQiLCJpbWFnZXMiLCJ0b0ZpeGVkIiwiTWF0aCIsInJvdW5kIiwidXBsb2FkVG9DbG91ZGluYXJ5IiwidG9JU09TdHJpbmciLCJlcnJvciIsIm1lc3NhZ2UiLCJfeCIsImFkZFVuc3BsYXNoSW1hZ2UiLCJfeDIiLCJfeDMiLCJfYWRkVW5zcGxhc2hJbWFnZSIsIl9jYWxsZWU4IiwiX2NvbnRleHQ4IiwicGhvdG9ncmFwaGVyIiwicGhvdG9ncmFwaGVyVXJsIiwicGhvdG9ncmFwaGVyTGluayIsInJlcXVpcmVzQXR0cmlidXRpb24iLCJjYW5FZGl0IiwiX3g0IiwiX3VwbG9hZFRvQ2xvdWRpbmFyeSIsIl9jYWxsZWU5IiwiZmlsZU9yQmxvYiIsImZpbGVuYW1lIiwiZm9ybURhdGEiLCJyZXNwb25zZSIsIl9lcnJvciRlcnJvciIsImRhdGEiLCJfYXJnczkiLCJfY29udGV4dDkiLCJ1bmRlZmluZWQiLCJGb3JtRGF0YSIsIkJsb2IiLCJGaWxlIiwiYXBwZW5kIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5Iiwib2siLCJqc29uIiwiRXJyb3IiLCJzZWN1cmVfdXJsIiwicmVwbGFjZSIsInB1YmxpY19pZCIsIl94NSIsIl94NiIsIl9hZGRJbWFnZVRvUmVjaXBlIiwiX2NhbGxlZTAiLCJuZXdJbWFnZSIsIl9jb250ZXh0MCIsImlzRmVhdHVyZWQiLCJvcmRlciIsInB1c2giLCJ1cGRhdGVkQXQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsIl94NyIsIl9yZW5kZXJJbWFnZUdhbGxlcnkiLCJfY2FsbGVlMSIsImdhbGxlcnkiLCJub0ltYWdlc01zZyIsInNvcnRlZEltYWdlcyIsIl9jb250ZXh0MSIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJpbm5lckhUTUwiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJzb3J0IiwiYiIsIm1hcCIsImltZyIsIl9pbWckbWV0YWRhdGEiLCJmb3JtYXRBdHRyaWJ1dGlvblRleHQiLCJmb3JtYXRBdHRyaWJ1dGlvbiIsImpvaW4iLCJzZXR1cERyYWdBbmREcm9wIiwiaW1hZ2UiLCJhdHRyIiwiY3VzdG9tQ3JlZGl0IiwidGV4dCIsIndpbmRvdyIsImVkaXRBdHRyaWJ1dGlvbiIsIl9yZWYyIiwiX2NhbGxlZTIiLCJpbWFnZUlkIiwiX3JlY2lwZSRpbWFnZXMiLCJfY29udGV4dDIiLCJhbGVydCIsInNob3dBdHRyaWJ1dGlvbkRpYWxvZyIsIl94OCIsIl94OSIsImN1cnJlbnRBdHRyaWJ1dGlvbiIsImRpYWxvZyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJoYXNBdHRyaWJ1dGlvbiIsImFwcGVuZENoaWxkIiwic2hvd01vZGFsIiwiZm9ybSIsInBob3RvZ3JhcGhlcklucHV0IiwidXJsSW5wdXQiLCJjcmVkaXRJbnB1dCIsImNhbmNlbEJ0biIsInJlbW92ZUJ0biIsImZvY3VzIiwiY2xvc2UiLCJyZW1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW0iLCJzZXRGZWF0dXJlZEltYWdlIiwiX3JlZjMiLCJfY2FsbGVlMyIsIl9jb250ZXh0MyIsImZvckVhY2giLCJfeDAiLCJfeDEiLCJtb3ZlSW1hZ2VVcCIsIl9yZWY0IiwiX2NhbGxlZTQiLCJpbmRleCIsInRlbXAiLCJfY29udGV4dDQiLCJmaW5kSW5kZXgiLCJfeDEwIiwiX3gxMSIsIm1vdmVJbWFnZURvd24iLCJfcmVmNSIsIl9jYWxsZWU1IiwiX2NvbnRleHQ1IiwiX3gxMiIsIl94MTMiLCJyZW1vdmVJbWFnZSIsIl9yZWY2IiwiX2NhbGxlZTYiLCJpbWFnZVRvUmVtb3ZlIiwicmVnaXN0cnkiLCJzdGlsbEluVXNlIiwic2hvdWxkRGVsZXRlIiwiX2NvbnRleHQ2IiwiZmlsdGVyIiwic29tZSIsIl94MTQiLCJfeDE1IiwiaW1hZ2VDYXJkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkcmFnZ2VkRWxlbWVudCIsImNhcmQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZnRlckVsZW1lbnQiLCJnZXREcmFnQWZ0ZXJFbGVtZW50IiwicGFyZW50RWxlbWVudCIsImNsaWVudFkiLCJpbnNlcnRCZWZvcmUiLCJfcmVmNyIsIl9jYWxsZWU3IiwiX2NvbnRleHQ3IiwicmVvcmRlckltYWdlc0FmdGVyRHJhZyIsIl94MTYiLCJjb250YWluZXIiLCJkcmFnZ2FibGVFbGVtZW50cyIsInJlZHVjZSIsImNsb3Nlc3QiLCJjaGlsZCIsImJveCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIm9mZnNldCIsInRvcCIsImhlaWdodCIsImVsZW1lbnQiLCJOdW1iZXIiLCJORUdBVElWRV9JTkZJTklUWSIsIl94MTciLCJfcmVvcmRlckltYWdlc0FmdGVyRHJhZyIsIl9jYWxsZWUxMCIsIm5ld09yZGVyIiwiX2NvbnRleHQxMCIsIkFycmF5IiwiZnJvbSIsImRhdGFzZXQiLCJzdGF0dXNEaXYiLCJ0ZXh0Q29udGVudCIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/helpers/imageGallery.js\n\n}");

/***/ }),

/***/ "./src/helpers/imageOptimizer.js":
/*!***************************************!*\
  !*** ./src/helpers/imageOptimizer.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IMAGE_PRESETS: () => (/* binding */ IMAGE_PRESETS),\n/* harmony export */   optimizeImage: () => (/* binding */ optimizeImage)\n/* harmony export */ });\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n/**\r\n * Optimize image before uploading to Cloudinary\r\n * @param {File} file - Original image file\r\n * @param {Object} options - Resize options\r\n * @returns {Promise<Blob>} - Optimized image blob\r\n */\nfunction optimizeImage(_x) {\n  return _optimizeImage.apply(this, arguments);\n}\n\n/**\r\n * Get recommended optimization settings for different image types\r\n */\nfunction _optimizeImage() {\n  _optimizeImage = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(file) {\n    var options,\n      _options$maxWidth,\n      maxWidth,\n      _options$maxHeight,\n      maxHeight,\n      _options$quality,\n      quality,\n      _options$format,\n      format,\n      _args = arguments;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _options$maxWidth = options.maxWidth, maxWidth = _options$maxWidth === void 0 ? 1600 : _options$maxWidth, _options$maxHeight = options.maxHeight, maxHeight = _options$maxHeight === void 0 ? 1600 : _options$maxHeight, _options$quality = options.quality, quality = _options$quality === void 0 ? 0.85 : _options$quality, _options$format = options.format, format = _options$format === void 0 ? 'image/jpeg' : _options$format;\n          return _context.a(2, new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onload = function (e) {\n              var img = new Image();\n              img.onload = function () {\n                // Calculate new dimensions (maintain aspect ratio)\n                var width = img.width;\n                var height = img.height;\n                if (width > maxWidth || height > maxHeight) {\n                  var ratio = Math.min(maxWidth / width, maxHeight / height);\n                  width = Math.round(width * ratio);\n                  height = Math.round(height * ratio);\n                }\n\n                // Create canvas\n                var canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n\n                // Draw resized image\n                var ctx = canvas.getContext('2d');\n                ctx.imageSmoothingEnabled = true;\n                ctx.imageSmoothingQuality = 'high';\n                ctx.drawImage(img, 0, 0, width, height);\n\n                // Convert to blob\n                canvas.toBlob(function (blob) {\n                  if (blob) {\n                    console.log(\"\\u2705 Optimized: \".concat((file.size / 1024).toFixed(0), \"KB \\u2192 \").concat((blob.size / 1024).toFixed(0), \"KB\"));\n                    resolve(blob);\n                  } else {\n                    reject(new Error('Failed to optimize image'));\n                  }\n                }, format, quality);\n              };\n              img.onerror = function () {\n                return reject(new Error('Failed to load image'));\n              };\n              img.src = e.target.result;\n            };\n            reader.onerror = function () {\n              return reject(new Error('Failed to read file'));\n            };\n            reader.readAsDataURL(file);\n          }));\n      }\n    }, _callee);\n  }));\n  return _optimizeImage.apply(this, arguments);\n}\nvar IMAGE_PRESETS = {\n  avatar: {\n    maxWidth: 400,\n    maxHeight: 400,\n    quality: 0.90,\n    format: 'image/jpeg'\n  },\n  recipeHero: {\n    maxWidth: 1600,\n    maxHeight: 1600,\n    quality: 0.85,\n    format: 'image/jpeg'\n  },\n  recipeThumbnail: {\n    maxWidth: 800,\n    maxHeight: 800,\n    quality: 0.80,\n    format: 'image/jpeg'\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxDQUFDK0IsYUFBYSxDQUFDN0MsSUFBSSxDQUFDO1VBQzVCLENBQUMsQ0FBQztNQUFBO0lBQUEsR0FBQUQsT0FBQTtFQUFBLENBQ0g7RUFBQSxPQUFBRCxjQUFBLENBQUFMLEtBQUEsT0FBQUQsU0FBQTtBQUFBO0FBS00sSUFBTXNELGFBQWEsR0FBRztFQUMzQkMsTUFBTSxFQUFFO0lBQ041QyxRQUFRLEVBQUUsR0FBRztJQUNiRSxTQUFTLEVBQUUsR0FBRztJQUNkRSxPQUFPLEVBQUUsSUFBSTtJQUNiRSxNQUFNLEVBQUU7RUFDVixDQUFDO0VBQ0R1QyxVQUFVLEVBQUU7SUFDVjdDLFFBQVEsRUFBRSxJQUFJO0lBQ2RFLFNBQVMsRUFBRSxJQUFJO0lBQ2ZFLE9BQU8sRUFBRSxJQUFJO0lBQ2JFLE1BQU0sRUFBRTtFQUNWLENBQUM7RUFDRHdDLGVBQWUsRUFBRTtJQUNmOUMsUUFBUSxFQUFFLEdBQUc7SUFDYkUsU0FBUyxFQUFFLEdBQUc7SUFDZEUsT0FBTyxFQUFFLElBQUk7SUFDYkUsTUFBTSxFQUFFO0VBQ1Y7QUFDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVjaXBlLW1lLXdlYnBhY2s1Ly4vc3JjL2hlbHBlcnMvaW1hZ2VPcHRpbWl6ZXIuanM/ZDU5YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogT3B0aW1pemUgaW1hZ2UgYmVmb3JlIHVwbG9hZGluZyB0byBDbG91ZGluYXJ5XHJcbiAqIEBwYXJhbSB7RmlsZX0gZmlsZSAtIE9yaWdpbmFsIGltYWdlIGZpbGVcclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBSZXNpemUgb3B0aW9uc1xyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxCbG9iPn0gLSBPcHRpbWl6ZWQgaW1hZ2UgYmxvYlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9wdGltaXplSW1hZ2UoZmlsZSwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgY29uc3Qge1xyXG4gICAgbWF4V2lkdGggPSAxNjAwLFxyXG4gICAgbWF4SGVpZ2h0ID0gMTYwMCxcclxuICAgIHF1YWxpdHkgPSAwLjg1LFxyXG4gICAgZm9ybWF0ID0gJ2ltYWdlL2pwZWcnXHJcbiAgfSA9IG9wdGlvbnM7XHJcblxyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgXHJcbiAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcclxuICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgIFxyXG4gICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBuZXcgZGltZW5zaW9ucyAobWFpbnRhaW4gYXNwZWN0IHJhdGlvKVxyXG4gICAgICAgIGxldCB3aWR0aCA9IGltZy53aWR0aDtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gaW1nLmhlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICBpZiAod2lkdGggPiBtYXhXaWR0aCB8fCBoZWlnaHQgPiBtYXhIZWlnaHQpIHtcclxuICAgICAgICAgIGNvbnN0IHJhdGlvID0gTWF0aC5taW4obWF4V2lkdGggLyB3aWR0aCwgbWF4SGVpZ2h0IC8gaGVpZ2h0KTtcclxuICAgICAgICAgIHdpZHRoID0gTWF0aC5yb3VuZCh3aWR0aCAqIHJhdGlvKTtcclxuICAgICAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0ICogcmF0aW8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDcmVhdGUgY2FudmFzXHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBEcmF3IHJlc2l6ZWQgaW1hZ2VcclxuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICBjdHguaW1hZ2VTbW9vdGhpbmdRdWFsaXR5ID0gJ2hpZ2gnO1xyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDb252ZXJ0IHRvIGJsb2JcclxuICAgICAgICBjYW52YXMudG9CbG9iKFxyXG4gICAgICAgICAgKGJsb2IpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJsb2IpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIE9wdGltaXplZDogJHsoZmlsZS5zaXplIC8gMTAyNCkudG9GaXhlZCgwKX1LQiDihpIgJHsoYmxvYi5zaXplIC8gMTAyNCkudG9GaXhlZCgwKX1LQmApO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoYmxvYik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIG9wdGltaXplIGltYWdlJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgICAgcXVhbGl0eVxyXG4gICAgICAgICk7XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGltYWdlJykpO1xyXG4gICAgICBpbWcuc3JjID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gcmVhZCBmaWxlJykpO1xyXG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgcmVjb21tZW5kZWQgb3B0aW1pemF0aW9uIHNldHRpbmdzIGZvciBkaWZmZXJlbnQgaW1hZ2UgdHlwZXNcclxuICovXHJcbmV4cG9ydCBjb25zdCBJTUFHRV9QUkVTRVRTID0ge1xyXG4gIGF2YXRhcjoge1xyXG4gICAgbWF4V2lkdGg6IDQwMCxcclxuICAgIG1heEhlaWdodDogNDAwLFxyXG4gICAgcXVhbGl0eTogMC45MCxcclxuICAgIGZvcm1hdDogJ2ltYWdlL2pwZWcnXHJcbiAgfSxcclxuICByZWNpcGVIZXJvOiB7XHJcbiAgICBtYXhXaWR0aDogMTYwMCxcclxuICAgIG1heEhlaWdodDogMTYwMCxcclxuICAgIHF1YWxpdHk6IDAuODUsXHJcbiAgICBmb3JtYXQ6ICdpbWFnZS9qcGVnJ1xyXG4gIH0sXHJcbiAgcmVjaXBlVGh1bWJuYWlsOiB7XHJcbiAgICBtYXhXaWR0aDogODAwLFxyXG4gICAgbWF4SGVpZ2h0OiA4MDAsXHJcbiAgICBxdWFsaXR5OiAwLjgwLFxyXG4gICAgZm9ybWF0OiAnaW1hZ2UvanBlZydcclxuICB9XHJcbn07Il0sIm5hbWVzIjpbImUiLCJ0IiwiciIsIlN5bWJvbCIsIm4iLCJpdGVyYXRvciIsIm8iLCJ0b1N0cmluZ1RhZyIsImkiLCJjIiwicHJvdG90eXBlIiwiR2VuZXJhdG9yIiwidSIsIk9iamVjdCIsImNyZWF0ZSIsIl9yZWdlbmVyYXRvckRlZmluZTIiLCJmIiwicCIsInkiLCJHIiwidiIsImEiLCJkIiwiYmluZCIsImxlbmd0aCIsImwiLCJUeXBlRXJyb3IiLCJjYWxsIiwiZG9uZSIsInZhbHVlIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsImdldFByb3RvdHlwZU9mIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJkaXNwbGF5TmFtZSIsIl9yZWdlbmVyYXRvciIsInciLCJtIiwiZGVmaW5lUHJvcGVydHkiLCJfcmVnZW5lcmF0b3JEZWZpbmUiLCJfaW52b2tlIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJhcmd1bWVudHMiLCJhcHBseSIsIl9uZXh0IiwiX3Rocm93Iiwib3B0aW1pemVJbWFnZSIsIl94IiwiX29wdGltaXplSW1hZ2UiLCJfY2FsbGVlIiwiZmlsZSIsIm9wdGlvbnMiLCJfb3B0aW9ucyRtYXhXaWR0aCIsIm1heFdpZHRoIiwiX29wdGlvbnMkbWF4SGVpZ2h0IiwibWF4SGVpZ2h0IiwiX29wdGlvbnMkcXVhbGl0eSIsInF1YWxpdHkiLCJfb3B0aW9ucyRmb3JtYXQiLCJmb3JtYXQiLCJfYXJncyIsIl9jb250ZXh0IiwidW5kZWZpbmVkIiwicmVqZWN0IiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImltZyIsIkltYWdlIiwid2lkdGgiLCJoZWlnaHQiLCJyYXRpbyIsIk1hdGgiLCJtaW4iLCJyb3VuZCIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJpbWFnZVNtb290aGluZ1F1YWxpdHkiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJibG9iIiwiY29uc29sZSIsImxvZyIsImNvbmNhdCIsInNpemUiLCJ0b0ZpeGVkIiwiRXJyb3IiLCJvbmVycm9yIiwic3JjIiwidGFyZ2V0IiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsIklNQUdFX1BSRVNFVFMiLCJhdmF0YXIiLCJyZWNpcGVIZXJvIiwicmVjaXBlVGh1bWJuYWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/helpers/imageOptimizer.js\n\n}");

/***/ })

};
