/*! For license information please see 100-bundle.js.LICENSE.txt */
export const __webpack_esm_id__=100;export const __webpack_esm_ids__=[100];export const __webpack_esm_modules__={4077:(e,t,n)=>{function r(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function u(n,r,a,i){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return o(l,"_invoke",function(n,r,o){var a,i,u,s=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,u=e,f.n=n,c}};function p(n,r){for(i=n,u=r,t=0;!d&&s&&!o&&t<l.length;t++){var o,a=l[t],p=f.p,m=a[2];n>3?(o=m===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,f.v=r,f.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,f.n=m,i=0))}if(o||n>1)return c;throw d=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),i=l,u=m;(t=i<2?e:u)||!d;){a||(i?i<3?(i>1&&(f.n=-1),p(i,u)):f.n=u:f.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:d}}}(n,a,i),!0),l}var c={};function s(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][a]?t(t([][a]())):(o(t={},a,function(){return this}),t),p=d.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,o(p,"constructor",d),o(d,"constructor",l),l.displayName="GeneratorFunction",o(d,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,a,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:u,m}})()}function o(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,n,r){function i(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},o(e,t,n,r)}function a(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return u.apply(this,arguments)}function u(){var e;return e=r().m(function e(t){var n,o,a,i,u,c,s,l,d,f=arguments;return r().w(function(e){for(;;)if(0===e.n)return o=(n=f.length>1&&void 0!==f[1]?f[1]:{}).maxWidth,a=void 0===o?1600:o,i=n.maxHeight,u=void 0===i?1600:i,c=n.quality,s=void 0===c?.85:c,l=n.format,d=void 0===l?"image/jpeg":l,e.a(2,new Promise(function(e,n){var r=new FileReader;r.onload=function(r){var o=new Image;o.onload=function(){var r=o.width,i=o.height;if(r>a||i>u){var c=Math.min(a/r,u/i);r=Math.round(r*c),i=Math.round(i*c)}var l=document.createElement("canvas");l.width=r,l.height=i;var f=l.getContext("2d");f.imageSmoothingEnabled=!0,f.imageSmoothingQuality="high",f.drawImage(o,0,0,r,i),l.toBlob(function(r){r?(console.log("âœ… Optimized: ".concat((t.size/1024).toFixed(0),"KB â†’ ").concat((r.size/1024).toFixed(0),"KB")),e(r)):n(new Error("Failed to optimize image"))},d,s)},o.onerror=function(){return n(new Error("Failed to load image"))},o.src=r.target.result},r.onerror=function(){return n(new Error("Failed to read file"))},r.readAsDataURL(t)}))},e)}),u=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)})},u.apply(this,arguments)}n.d(t,{J:()=>c,P:()=>i});var c={avatar:{maxWidth:400,maxHeight:400,quality:.9,format:"image/jpeg"},recipeHero:{maxWidth:1600,maxHeight:1600,quality:.85,format:"image/jpeg"},recipeThumbnail:{maxWidth:800,maxHeight:800,quality:.8,format:"image/jpeg"}}},4100:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{addUnsplashImage:()=>O,renderImageGallery:()=>E,setupImageGallery:()=>S});var o=n(4011),a=n(9262),i=n(4077),u=n(8362),c=n(8166),s=e([a]),l=s.then?(await s)():s;function d(e){return g(e)||m(e)||p(e)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function m(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function g(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return b(s,"_invoke",function(n,r,o){var a,u,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,u=0,c=e,f.n=n,i}};function p(n,r){for(u=n,c=r,t=0;!d&&s&&!o&&t<l.length;t++){var o,a=l[t],p=f.p,m=a[2];n>3?(o=m===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(u=0,f.v=r,f.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,f.n=m,u=0))}if(o||n>1)return i;throw d=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),u=l,c=m;(t=u<2?e:c)||!d;){a||(u?u<3?(u>1&&(f.n=-1),p(u,c)):f.n=c:f.v=c);try{if(s=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==i)break}catch(t){a=e,u=1,c=t}finally{s=1}}return{value:t,done:d}}}(n,o,a),!0),s}var i={};function u(){}function c(){}function s(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(b(t={},r,function(){return this}),t),d=s.prototype=u.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,b(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=s,b(d,"constructor",s),b(s,"constructor",c),c.displayName="GeneratorFunction",b(s,o,"GeneratorFunction"),b(d),b(d,o,"Generator"),b(d,r,function(){return this}),b(d,"toString",function(){return"[object Generator]"}),(v=function(){return{w:a,m:f}})()}function b(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}b=function(e,t,n,r){function a(t,n){b(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},b(e,t,n,r)}function y(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,u,"next",e)}function u(e){y(a,r,o,i,u,"throw",e)}i(void 0)})}}function S(e){var t=document.getElementById("cloudinary-upload");t?(t.addEventListener("change",function(){var n=w(v().m(function n(r){var o,s,l,d,f,p,m,g,h,b,y,w,S,O,I,j,_,A;return v().w(function(n){for(;;)switch(n.p=n.n){case 0:if(o=r.target.files[0]){n.n=1;break}return n.a(2);case 1:if(!o.type.startsWith("video/")){n.n=2;break}return C("âŒ Video files not supported. Please upload to YouTube and paste the link instead.","error"),t.value="",n.a(2);case 2:if(o.type.startsWith("image/")){n.n=3;break}return C("Please select an image file","error"),t.value="",n.a(2);case 3:if(!(o.size>20971520)){n.n=4;break}return C("Image must be smaller than 20MB","error"),n.a(2);case 4:return n.p=4,C("Checking for duplicates...","uploading"),n.n=5,(0,i.P)(o,i.J.recipeHero);case 5:return s=n.v,n.n=6,(0,u.wr)(s);case 6:if(l=n.v,!(d=(0,c.mg)(l))){n.n=9;break}if(p=d.usedByRecipes.length,!confirm("âœ… This image already exists!\n\n"+"File: ".concat((null===(f=d.metadata)||void 0===f?void 0:f.originalFilename)||"Unknown","\n")+"Used in: ".concat(p," recipe(s)\n")+"Uploaded: ".concat(new Date(d.uploadedAt).toLocaleDateString(),"\n\n")+"Reuse existing image? (Saves bandwidth & storage)")){n.n=9;break}return console.log("â™»ï¸ Reusing existing image:",d.url),g={url:d.url,source:"user-upload",cloudinaryPublicId:d.cloudinaryPublicId,fileHash:l,attribution:null,metadata:{uploadedAt:d.uploadedAt,originalFilename:o.name,reusedFrom:null===(m=d.metadata)||void 0===m?void 0:m.originalFilename,originalSize:o.size,optimizedSize:s.size}},n.n=7,P(e,g);case 7:return(0,c.Hr)(l,d,e),n.n=8,E(e);case 8:return C("âœ“ Image reused! (No upload needed)","success"),t.value="",n.a(2);case 9:return n.n=10,(0,a.Q5)();case 10:if(h=n.v,!(b=h.find(function(t){return t.id===e}))||!b.images){n.n=11;break}if(!(0,u.AT)(o.name,b.images)){n.n=11;break}if(confirm('âš ï¸ An image named "'.concat(o.name,'" already exists in this recipe.\n\n')+"Do you want to upload it anyway?")){n.n=11;break}return t.value="",C("Upload cancelled - duplicate detected","error"),n.a(2);case 11:return y=(o.size/1024).toFixed(0),w=(s.size/1024).toFixed(0),S=Math.round(100*(1-s.size/o.size)),console.log("ðŸ“‰ Size reduction: ".concat(y,"KB â†’ ").concat(w,"KB (").concat(S,"% smaller)")),C("Uploading optimized image...","uploading"),n.n=12,k(s,o.name);case 12:return O=n.v,I=O.url,j=O.publicId,_={url:I,source:"user-upload",cloudinaryPublicId:j,fileHash:l,attribution:null,metadata:{uploadedAt:(new Date).toISOString(),originalFilename:o.name,originalSize:o.size,optimizedSize:s.size}},(0,c.Hr)(l,_,e),n.n=13,P(e,_);case 13:return n.n=14,E(e);case 14:C("âœ“ Image added! (Saved ".concat(S,"% bandwidth)"),"success"),t.value="",n.n=16;break;case 15:n.p=15,A=n.v,console.error("Upload failed:",A),C("âœ— Upload failed: ".concat(A.message),"error");case 16:return n.a(2)}},n,null,[[4,15]])}));return function(e){return n.apply(this,arguments)}}()),E(e)):console.warn("Image upload input not found")}function O(e,t){return I.apply(this,arguments)}function I(){return(I=w(v().m(function e(t,n){return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,P(t,{url:n.url,source:"unsplash",cloudinaryPublicId:null,attribution:{photographer:n.photographer,photographerUrl:n.photographerLink,requiresAttribution:!0,canEdit:!1}});case 1:return e.n=2,E(t);case 2:return e.a(2)}},e)}))).apply(this,arguments)}function k(e){return j.apply(this,arguments)}function j(){return j=w(v().m(function e(t){var n,r,o,a,i,u,c,s=arguments;return v().w(function(e){for(;;)switch(e.n){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"image.jpg",r=new FormData,t instanceof Blob&&!(t instanceof File)?(o=new File([t],n,{type:t.type}),r.append("file",o)):r.append("file",t),r.append("upload_preset","recipe_images"),r.append("folder","recipes"),e.n=1,fetch("https://api.cloudinary.com/v1_1/".concat("day1f5nz8","/image/upload"),{method:"POST",body:r});case 1:if((a=e.v).ok){e.n=3;break}return e.n=2,a.json();case 2:throw u=e.v,new Error((null===(i=u.error)||void 0===i?void 0:i.message)||"Upload failed");case 3:return e.n=4,a.json();case 4:return c=e.v,e.a(2,{url:c.secure_url.replace("/upload/","/upload/q_auto,f_auto/"),publicId:c.public_id})}},e)})),j.apply(this,arguments)}function P(e,t){return _.apply(this,arguments)}function _(){return(_=w(v().m(function e(t,n){var r,i,u;return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,a.Q5)();case 1:if(r=e.v,i=r.find(function(e){return e.id===t})){e.n=2;break}return e.a(2);case 2:i.images||(i.images=[]),u={id:(0,o.A)(),url:n.url,source:n.source,isFeatured:0===i.images.length,order:i.images.length,cloudinaryPublicId:n.cloudinaryPublicId||null,fileHash:n.fileHash||null,attribution:n.attribution||null,metadata:n.metadata||null},i.images.push(u),i.updatedAt=(new Date).toISOString(),(0,a.Jp)(r),localStorage.setItem("editingRecipe",JSON.stringify(i));case 3:return e.a(2)}},e)}))).apply(this,arguments)}function E(e){return A.apply(this,arguments)}function A(){return(A=w(v().m(function e(t){var n,r,o,i,u;return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,a.Q5)();case 1:if(n=e.v,r=n.find(function(e){return e.id===t}),o=document.getElementById("image-gallery"),i=null==o?void 0:o.querySelector(".no-images"),r&&o){e.n=2;break}return e.a(2);case 2:if(r.images&&0!==r.images.length){e.n=3;break}return i&&(i.style.display="block"),o.innerHTML='<p class="no-images">No images yet. Upload or search to add images.</p>',e.a(2);case 3:i&&(i.style.display="none"),u=d(r.images).sort(function(e,t){return e.order-t.order}),o.innerHTML="\n    ".concat(u.map(function(e){var n;return'\n      <div class="image-card" data-image-id="'.concat(e.id,'" draggable="true">\n        <div class="image-preview">\n          <img src="').concat(e.url,'" alt="Recipe image">\n          ').concat(e.isFeatured?'<div class="featured-badge"><i class="fa-solid fa-star"></i> Featured</div>':"","\n          \n          ").concat("unsplash"===e.source?'\n            <div class="source-badge unsplash-badge" title="From Unsplash">\n              <i class="fa-solid fa-image"></i> Unsplash\n            </div>\n          ':e.attribution?'\n            <div class="source-badge attribution-badge" title="'.concat(x(e),'">\n              <i class="fa-solid fa-copyright"></i> Credit\n            </div>\n          '):null!==(n=e.metadata)&&void 0!==n&&n.reusedFrom?'\n            <div class="source-badge reused-badge" title="Reused from: '.concat(e.metadata.reusedFrom,'">\n              <i class="fa-solid fa-recycle"></i> Reused\n            </div>\n          '):"",'\n        </div>\n        \n        <div class="image-actions">\n          <button \n            class="btn-small ').concat(e.isFeatured?"active":"",'" \n            onclick="window.setFeaturedImage(\'').concat(t,"', '").concat(e.id,'\')"\n            title="Set as featured image"\n          >\n            <i class="fa-solid fa-star"></i>\n          </button>\n          \n          <button \n            class="btn-small" \n            onclick="window.moveImageUp(\'').concat(t,"', '").concat(e.id,'\')"\n            title="Move up"\n            ').concat(0===e.order?"disabled":"",'\n          >\n            <i class="fa-solid fa-arrow-up"></i>\n          </button>\n          \n          <button \n            class="btn-small" \n            onclick="window.moveImageDown(\'').concat(t,"', '").concat(e.id,'\')"\n            title="Move down"\n            ').concat(e.order===u.length-1?"disabled":"",'\n          >\n            <i class="fa-solid fa-arrow-down"></i>\n          </button>\n          \n          <button \n            class="btn-small ').concat(e.attribution?"has-attribution":"",'" \n            onclick="window.editAttribution(\'').concat(t,"', '").concat(e.id,'\')"\n            title="').concat("unsplash"===e.source?"Unsplash attribution (required)":e.attribution?"Edit attribution":"Add attribution",'"\n            ').concat("unsplash"===e.source?"disabled":"",'\n          >\n            <i class="fa-solid fa-').concat("unsplash"===e.source?"lock":"copyright",'"></i>\n          </button>\n          \n          <button \n            class="btn-small btn-danger" \n            onclick="window.removeImage(\'').concat(t,"', '").concat(e.id,'\')"\n            title="Remove image"\n          >\n            <i class="fa-solid fa-trash"></i>\n          </button>\n        </div>\n        \n        ').concat("unsplash"===e.source||e.attribution?'\n          <div class="image-credit '.concat("unsplash"===e.source?"unsplash-credit":"",'">\n            ').concat(F(e),"\n          </div>\n        "):"","\n      </div>\n    ")}).join(""),"\n  "),U(t);case 4:return e.a(2)}},e)}))).apply(this,arguments)}function F(e){if(!e.attribution)return"";var t=e.attribution;if("unsplash"===e.source)return'Photo by <a href="'.concat(t.photographerUrl,'" target="_blank" rel="noopener">').concat(t.photographer,'</a> on <a href="https://unsplash.com/?utm_source=recipe_me&utm_medium=referral" target="_blank" rel="noopener">Unsplash</a>');if(t.customCredit)return t.customCredit;var n="Photo by ".concat(t.photographer);return t.photographerUrl&&(n='<a href="'.concat(t.photographerUrl,'" target="_blank" rel="noopener">').concat(n,"</a>")),n}function x(e){if(!e.attribution)return"";var t=e.attribution;return"unsplash"===e.source?"Photo by ".concat(t.photographer," on Unsplash"):t.customCredit?t.customCredit:"Photo by ".concat(t.photographer)}function T(e){return new Promise(function(t){var n=document.createElement("dialog");n.className="attribution-dialog modal-dialog";var r=e&&e.photographer;n.innerHTML='\n      <form id="attribution-form">\n        <h3>'.concat(r?"Edit":"Add",' Image Attribution</h3>\n        <p class="hint">Optional - add credit if this photo is from a photographer or requires attribution.</p>\n        \n        <div class="form-group">\n          <label for="photographer-name">Photographer/Source Name:</label>\n          <input \n            type="text" \n            id="photographer-name" \n            placeholder="e.g., Jane Smith Photography"\n            value="').concat((null==e?void 0:e.photographer)||"",'"\n          >\n        </div>\n        \n        <div class="form-group">\n          <label for="photographer-url">Website/URL (optional):</label>\n          <input \n            type="url" \n            id="photographer-url" \n            placeholder="https://janesmith.com"\n            value="').concat((null==e?void 0:e.photographerUrl)||"",'"\n          >\n        </div>\n        \n        <div class="form-group">\n          <label for="custom-credit">Custom Credit Line (optional):</label>\n          <input \n            type="text" \n            id="custom-credit" \n            placeholder="e.g., Photography by Jane Smith"\n            value="').concat((null==e?void 0:e.customCredit)||"",'"\n          >\n          <small>If blank, will auto-generate from photographer name</small>\n        </div>\n        \n        <div class="button-group">\n          ').concat(r?'\n            <button type="button" id="remove-attribution-btn" class="btn-secondary">\n              Remove Attribution\n            </button>\n          ':"",'\n          <button type="button" id="cancel-btn" class="btn-secondary">\n            Cancel\n          </button>\n          <button type="submit" class="btn-primary">\n            Save\n          </button>\n        </div>\n      </form>\n    '),document.body.appendChild(n),n.showModal();var o=n.querySelector("#attribution-form"),a=n.querySelector("#photographer-name"),i=n.querySelector("#photographer-url"),u=n.querySelector("#custom-credit"),c=n.querySelector("#cancel-btn"),s=n.querySelector("#remove-attribution-btn");a.focus(),c.addEventListener("click",function(){n.close(),n.remove(),t(void 0)}),s&&s.addEventListener("click",function(){confirm("Remove attribution from this image?")&&(n.close(),n.remove(),t(null))}),n.addEventListener("click",function(e){e.target===n&&(n.close(),n.remove(),t(void 0))}),o.addEventListener("submit",function(e){e.preventDefault();var r=a.value.trim(),o=i.value.trim(),c=u.value.trim();if(!r)return n.close(),n.remove(),void t(null);var s={photographer:r,photographerUrl:o||null,customCredit:c||null,requiresAttribution:!0,canEdit:!0};n.close(),n.remove(),t(s)})})}function U(e){var t=document.querySelectorAll(".image-card"),n=null;t.forEach(function(t){t.addEventListener("dragstart",function(e){n=t,t.classList.add("dragging")}),t.addEventListener("dragend",function(){t.classList.remove("dragging")}),t.addEventListener("dragover",function(e){e.preventDefault();var r,o,a=(r=t.parentElement,o=e.clientY,d(r.querySelectorAll(".image-card:not(.dragging)")).reduce(function(e,t){var n=t.getBoundingClientRect(),r=o-n.top-n.height/2;return r<0&&r>e.offset?{offset:r,element:t}:e},{offset:Number.NEGATIVE_INFINITY}).element);null==a?t.parentElement.appendChild(n):t.parentElement.insertBefore(n,a)}),t.addEventListener("drop",function(){var t=w(v().m(function t(n){return v().w(function(t){for(;;)switch(t.n){case 0:return n.preventDefault(),t.n=1,R(e);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())})}function R(e){return D.apply(this,arguments)}function D(){return(D=w(v().m(function e(t){var n,r,o;return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,a.Q5)();case 1:if(n=e.v,(r=n.find(function(e){return e.id===t}))&&r.images){e.n=2;break}return e.a(2);case 2:o=document.querySelectorAll(".image-card"),Array.from(o).map(function(e){return e.dataset.imageId}).forEach(function(e,t){var n=r.images.find(function(t){return t.id===e});n&&(n.order=t)}),r.updatedAt=(new Date).toISOString(),(0,a.Jp)(n),localStorage.setItem("editingRecipe",JSON.stringify(r));case 3:return e.a(2)}},e)}))).apply(this,arguments)}function C(e,t){var n=document.getElementById("upload-status");n&&(n.textContent=e,n.className="upload-status-".concat(t),"success"!==t&&"error"!==t||setTimeout(function(){n.textContent="",n.className=""},3e3))}a=l[0],window.editAttribution=function(){var e=w(v().m(function e(t,n){var r,o,i,u,c;return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,a.Q5)();case 1:if(o=e.v,i=o.find(function(e){return e.id===t}),u=null==i||null===(r=i.images)||void 0===r?void 0:r.find(function(e){return e.id===n})){e.n=2;break}return e.a(2);case 2:if("unsplash"!==u.source){e.n=3;break}return alert("Unsplash attribution cannot be edited or removed per their terms of use."),e.a(2);case 3:return e.n=4,T(u.attribution);case 4:if(void 0===(c=e.v)){e.n=5;break}return u.attribution=c,i.updatedAt=(new Date).toISOString(),(0,a.Jp)(o),localStorage.setItem("editingRecipe",JSON.stringify(i)),e.n=5,E(t);case 5:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),window.setFeaturedImage=function(){var e=w(v().m(function e(t,n){var r,o,i;return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,a.Q5)();case 1:if(r=e.v,(o=r.find(function(e){return e.id===t}))&&o.images){e.n=2;break}return e.a(2);case 2:return o.images.forEach(function(e){return e.isFeatured=!1}),(i=o.images.find(function(e){return e.id===n}))&&(i.isFeatured=!0),o.updatedAt=(new Date).toISOString(),(0,a.Jp)(r),localStorage.setItem("editingRecipe",JSON.stringify(o)),e.n=3,E(t);case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),window.moveImageUp=function(){var e=w(v().m(function e(t,n){var r,o,i,u;return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,a.Q5)();case 1:if(r=e.v,(o=r.find(function(e){return e.id===t}))&&o.images){e.n=2;break}return e.a(2);case 2:if(!((i=o.images.findIndex(function(e){return e.id===n}))<=0)){e.n=3;break}return e.a(2);case 3:return u=o.images[i].order,o.images[i].order=o.images[i-1].order,o.images[i-1].order=u,o.updatedAt=(new Date).toISOString(),(0,a.Jp)(r),localStorage.setItem("editingRecipe",JSON.stringify(o)),e.n=4,E(t);case 4:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),window.moveImageDown=function(){var e=w(v().m(function e(t,n){var r,o,i,u;return v().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,a.Q5)();case 1:if(r=e.v,(o=r.find(function(e){return e.id===t}))&&o.images){e.n=2;break}return e.a(2);case 2:if(!(-1===(i=o.images.findIndex(function(e){return e.id===n}))||i>=o.images.length-1)){e.n=3;break}return e.a(2);case 3:return u=o.images[i].order,o.images[i].order=o.images[i+1].order,o.images[i+1].order=u,o.updatedAt=(new Date).toISOString(),(0,a.Jp)(r),localStorage.setItem("editingRecipe",JSON.stringify(o)),e.n=4,E(t);case 4:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),window.removeImage=function(){var e=w(v().m(function e(t,n){var r,o,i,u,s,l;return v().w(function(e){for(;;)switch(e.n){case 0:if(confirm("Remove this image? This cannot be undone.")){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,a.Q5)();case 2:if(r=e.v,(o=r.find(function(e){return e.id===t}))&&o.images){e.n=3;break}return e.a(2);case 3:return null!=(i=o.images.find(function(e){return e.id===n}))&&i.fileHash&&(0,c.AS)(i.fileHash,t),u=(0,c.VJ)(),s=u[null==i?void 0:i.fileHash],!(l=(null==s?void 0:s.usedByRecipes.length)>0)&&"user-upload"===(null==i?void 0:i.source)&&i.cloudinaryPublicId?confirm("This image is not used by any other recipe.\n\nDelete from Cloudinary? (Saves storage)")&&(C("Deleting from Cloudinary...","uploading"),console.log("ðŸ—‘ï¸ Would delete:",i.cloudinaryPublicId)):l&&console.log("â™»ï¸ Image still used by ".concat(s.usedByRecipes.length," recipe(s), keeping in Cloudinary")),o.images=o.images.filter(function(e){return e.id!==n}),o.images.sort(function(e,t){return e.order-t.order}),o.images.forEach(function(e,t){return e.order=t}),o.images.length>0&&!o.images.some(function(e){return e.isFeatured})&&(o.images[0].isFeatured=!0),o.updatedAt=(new Date).toISOString(),(0,a.Jp)(r),localStorage.setItem("editingRecipe",JSON.stringify(o)),e.n=4,E(t);case 4:C("Image removed","success");case 5:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),r()}catch(z){r(z)}})},8166:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return(t=function(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{AS:()=>f,Hr:()=>d,VJ:()=>c,mg:()=>l});var u="imageRegistry";function c(){try{var e=localStorage.getItem(u);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load image registry:",e),{}}}function s(e){try{localStorage.setItem(u,JSON.stringify(e))}catch(e){console.error("Failed to save image registry:",e)}}function l(e){return c()[e]||null}function d(e,t,n){var r=c();r[e]?r[e].usedByRecipes.includes(n)||(r[e].usedByRecipes.push(n),r[e].lastUsedAt=(new Date).toISOString()):r[e]=a(a({},t),{},{uploadedAt:(new Date).toISOString(),lastUsedAt:(new Date).toISOString(),usedByRecipes:[n]}),s(r)}function f(e,t){var n=c();n[e]&&(n[e].usedByRecipes=n[e].usedByRecipes.filter(function(e){return e!==t}),s(n))}},8362:(e,t,n)=>{function r(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function u(n,r,a,i){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return o(l,"_invoke",function(n,r,o){var a,i,u,s=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,u=e,f.n=n,c}};function p(n,r){for(i=n,u=r,t=0;!d&&s&&!o&&t<l.length;t++){var o,a=l[t],p=f.p,m=a[2];n>3?(o=m===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,f.v=r,f.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,f.n=m,i=0))}if(o||n>1)return c;throw d=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),i=l,u=m;(t=i<2?e:u)||!d;){a||(i?i<3?(i>1&&(f.n=-1),p(i,u)):f.n=u:f.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==c)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:d}}}(n,a,i),!0),l}var c={};function s(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][a]?t(t([][a]())):(o(t={},a,function(){return this}),t),p=d.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,o(p,"constructor",d),o(d,"constructor",l),l.displayName="GeneratorFunction",o(d,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,a,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:u,m}})()}function o(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,n,r){function i(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},o(e,t,n,r)}function a(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return u.apply(this,arguments)}function u(){return(e=r().m(function e(t){var n,o,a,i;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.arrayBuffer();case 1:return n=e.v,e.n=2,crypto.subtle.digest("SHA-256",n);case 2:return o=e.v,a=Array.from(new Uint8Array(o)),i=a.map(function(e){return e.toString(16).padStart(2,"0")}).join(""),e.a(2,i)}},e)}),u=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)})}).apply(this,arguments);var e}function c(e,t){if(!t||0===t.length)return null;var n=e.toLowerCase().trim().replace(/\s+/g,"-");return t.find(function(e){var t;return!(null===(t=e.metadata)||void 0===t||!t.originalFilename)&&e.metadata.originalFilename.toLowerCase().trim().replace(/\s+/g,"-")===n})||null}n.d(t,{AT:()=>c,wr:()=>i})}};
//# sourceMappingURL=100-bundle.js.map?3f7a8cc4f64b0cd82874