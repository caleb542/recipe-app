<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recipe me - Profile</title>
</head>
<body>
  <div id="app">
    <h1>Profile</h1>
    
    <div id="user-profile"></div>
    
    <button id="login-btn">Login</button>
    <button id="logout-btn" style="display: none;">Logout</button>
    <button id="profile-btn" style="display: none;">Show Profile</button>
  </div>
  
  <!-- Webpack will inject your bundle here -->
   <script type="module">
    // app.js or index.js - Main application entry point
import { 
  initAuth0, 
  login, 
  logout, 
  isAuthenticated,
  getUser,
  makeAuthenticatedRequest 
} from './auth0.js';

// Initialize Auth0 when the app loads
const initializeApp = async () => {
  try {
    // Initialize Auth0
    await initAuth0();
    console.log('Auth0 initialized successfully');
    
    // Set up event listeners after initialization
    setupEventListeners();
    
  } catch (error) {
    console.error('Failed to initialize Auth0:', error);
  }
};

// Set up event listeners for login/logout buttons
const setupEventListeners = () => {
  const loginBtn = document.getElementById('login-btn');
  const logoutBtn = document.getElementById('logout-btn');
  const profileBtn = document.getElementById('profile-btn');
  
  if (loginBtn) {
    loginBtn.addEventListener('click', async () => {
      await login();
    });
  }
  
  if (logoutBtn) {
    logoutBtn.addEventListener('click', () => {
      logout();
    });
  }
  
  if (profileBtn) {
    profileBtn.addEventListener('click', async () => {
      const authenticated = await isAuthenticated();
      if (authenticated) {
        const user = await getUser();
        console.log('User profile:', user);
        alert(`Hello ${user.name}!`);
      }
    });
  }
};

// Example: Making an authenticated API call
const fetchUserData = async () => {
  try {
    const response = await makeAuthenticatedRequest('https://your-api.com/user/data');
    const data = await response.json();
    console.log('User data:', data);
  } catch (error) {
    console.error('Error fetching user data:', error);
  }
};

// Initialize on page load
window.addEventListener('DOMContentLoaded', initializeApp);
   </script>
  <!-- <script src="auth-bundle.js"></script> -->
</body>
</html>